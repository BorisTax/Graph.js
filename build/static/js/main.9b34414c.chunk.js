(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){},18:function(e,t,n){},37:function(e,t,n){e.exports=n(49)},49:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),s=n(33),a=n.n(s),o=n(1),c=n(3),l=n(5),h=n(2),p=n(4),u=n(19),d=n(16),y=n(7),v=n(17),f=n(35),g={status:"FREE"};var S=n(6),m={ADD_SHAPE:"ADD_SHAPE",CANCEL:"CANCEL",CANCEL_SELECTION:"CANCEL_SELECTION",CENTER_TO_POINT:"CENTER_TO_POINT",CREATE_SHAPE:"CREATE_SHAPE",DELETE_CONFIRM:"DELETE_CONFIRM",DELETE_SELECTED_SHAPES:"DELETE_SELECTED_SHAPES",PAN_SCREEN:"PAN_SCREEN",PICK:"PICK",REFRESH_SHAPE_MANAGER:"REFRESH_SHAPE_MANAGER",REFRESH_SNAP_MARKERS:"REFRESH_SNAP_MARKERS",REPAINT:"REPAINT",SELECT_ALL:"SELECT_ALL",SELECT_SHAPE:"SELECT_SHAPE",SET_BOUNDED_CIRCLE:"SET_BOUNDED_CIRCLE",SET_CUR_COORD:"SET_CUR_COORD",SET_CYCLIC_FLAG:"SET_CYCLIC_FLAG",SET_DIMENSIONS:"SET_DIMENSIONS",SET_GRID_SNAP:"SET_GRID_SNAP",SET_GRID_VISIBLE:"SET_GRID_VISIBLE",SET_PICKED_DATA:"SET_PICKED_DATA",SET_PREV_COORD:"SET_PREV_COORD",SET_PREV_STATUS:"SET_PREV_STATUS",SET_RATIO:"SET_RATIO",SET_REAL_WIDTH:"SET_REAL_WIDTH",SET_SCALE:"SET_SCALE",SET_SCREEN_CONTEXT:"SET_SCREEN_CONTEXT",SET_SELECTION_TYPE:"SET_SELECTION_TYPE",SET_SNAP:"SET_SNAP",SET_STATUS:"SET_STATUS",SET_TOP_LEFT:"SET_TOP_LEFT",START_PICKING:"START_PICKING",START_SELECTION:"START_SELECTION",addShape:function(e){return{type:m.ADD_SHAPE,payload:e}},cancel:function(){return{type:m.CANCEL}},cancelSelection:function(){return{type:m.CANCEL_SELECTION}},centerToPoint:function(e){return{type:m.CENTER_TO_POINT,payload:e}},createNewShape:function(e){return{type:m.CREATE_SHAPE,payload:e}},deleteConfirm:function(){return{type:m.DELETE_CONFIRM}},deleteSelectedShapes:function(){return{type:m.DELETE_SELECTED_SHAPES}},refreshShapeManager:function(){return{type:m.REFRESH_SHAPE_MANAGER}},refreshSnapMarkers:function(){return{type:m.REFRESH_SNAP_MARKERS}},repaint:function(){return{type:m.REPAINT}},selectAll:function(){return{type:m.SELECT_ALL}},selectShapes:function(e){return{type:m.SELECT_SHAPE,payload:e}},setBoundedCircle:function(){return{type:m.SET_BOUNDED_CIRCLE}},setCurCoord:function(e,t){return{type:m.SET_CUR_COORD,payload:{point:e,screenPoint:t}}},setCyclicFlag:function(e){return{type:m.SET_CYCLIC_FLAG,payload:e}},setDimensions:function(e,t,n,i){return{type:m.SET_DIMENSIONS,payload:{width:e,height:t,realWidth:n,topLeft:i}}},setGridSnap:function(e){return{type:m.SET_GRID_SNAP,payload:e}},setGridVisible:function(e){return{type:m.SET_GRID_VISIBLE,payload:e}},setPickedData:function(e){return{type:m.SET_PICKED_DATA,payload:e}},setPrevCoord:function(e,t){return{type:m.SET_PREV_COORD,payload:{point:e,screenPoint:t}}},setPrevStatus:function(){return{type:m.SET_PREV_STATUS}},setRatio:function(e){return{type:m.SET_RATIO,payload:e}},setRealWidth:function(e){return{type:m.SET_REAL_WIDTH,payload:e}},setScale:function(e,t){return{type:m.SET_SCALE,payload:{scale:e,anchor:t}}},setScreenContext:function(e){return{type:m.SET_SCREEN_CONTEXT,payload:e}},setScreenStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te.FREE,t=arguments.length>1?arguments[1]:void 0,n=null,i=null;switch(e){case te.SELECT:i=m.START_SELECTION;break;case te.CREATE:i=m.CREATE_SHAPE,n={creator:t.creator};break;case te.CANCEL:i=m.CANCEL;break;case te.PAN:i=m.PAN_SCREEN;break;case te.PICK:i=m.PICK,n={picker:t.picker}}return{type:i,payload:n}},setSelectionType:function(e){return{type:m.SET_SELECTION_TYPE,payload:e}},setSnap:function(e,t){return{type:"grid"===e?m.SET_GRID_SNAP:m.SET_SNAP,payload:"grid"===e?t:{snapClass:e,snap:t}}},setTopLeft:function(e){return{type:m.SET_TOP_LEFT,payload:e}},startPicking:function(e,t){return{type:m.START_PICKING,payload:{id:e,picker:t}}}},b={CREATE_SHAPE:"CREATE_SHAPE",SELECT_SHAPE:"SELECT_SHAPE",SET_PROPERTY:"SET_PROPERTY"};var E={BLUE:"#0000FF",BLACK:"#000000",GRAY:"#D0D0D0",RED:"#FF0000",DARK_ORANGE:"#FFB000",GREEN:"#00FF00",SELECTED:"#0000FF",SELECTION_AREA:"#000000",GRID:"#909090",ACTIVE_POINT_MARKER:"#FF0000",POINT_MARKER:"#0000FF"},w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.BLACK,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.SOLID,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;switch(Object(o.a)(this,e),this.color=t,this.originColor=this.color,this.width=i,this.type=n,n){case e.DASH:this.stroke=[1,3];break;case e.SOLID:this.stroke=[0];break;case e.SELECTION:this.stroke=[1,1]}}return Object(c.a)(e,[{key:"getColor",value:function(){return this.color}},{key:"setColor",value:function(e){this.color=e}},{key:"getType",value:function(){return this.type}},{key:"getStroke",value:function(){return this.stroke}},{key:"setStroke",value:function(e){this.stroke=e}},{key:"getWidth",value:function(){return this.width}},{key:"setWidth",value:function(e){this.width=e}}]),e}();w.DASH=[1,3],w.SOLID=[0],w.SELECTION=[1,1];var k=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(o.a)(this,e),this.x=t,this.y=n},C=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(o.a)(this,e),this.x=t,this.y=n},O=function e(t,n){Object(o.a)(this,e),2===arguments.length&&(this.p1=t,this.p2=n),4===arguments.length&&(this.p1={x:arguments[0],y:arguments[1]},this.p2={x:arguments[2],y:arguments[3]})},P=function(){function e(){var t=this;Object(o.a)(this,e);var n=arguments,i=function(e,n){t.a=e.y-n.y,t.b=n.x-e.x,t.c=e.x*n.y-e.y*n.x};switch(n.length){case 0:i(new k,new k);break;case 1:i(n[0].p1,n[0].p2);break;case 2:i(n[0],n[1]);break;case 3:this.a=n[0],this.b=n[1],this.c=n[2]}}return Object(c.a)(e,[{key:"getYbyX",value:function(e){return 0!==this.b?-(this.a*e+this.c)/this.b:NaN}},{key:"getXbyY",value:function(e){return 0!==this.a?-(this.b*e+this.c)/this.a:NaN}}]),e}(),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new k,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new k;Object(o.a)(this,e),this.origin=t,this.vector=new A,this.vector.x=n.x-t.x,this.vector.y=n.y-t.y,this.directionPoint={x:this.origin.x+this.vector.x,y:this.origin.y+this.vector.y}}return Object(c.a)(e,[{key:"getYbyX",value:function(e){if(0!==this.b){var t=-(this.a*e+this.c)/this.b;return(e-this.origin.x)*this.vector.x>=0&&(t-this.origin.y)*this.vector.y>=0?t:NaN}return NaN}},{key:"getXbyY",value:function(e){return 0!==this.a&&(-(this.b*e+this.c)/this.a-this.origin.x)*this.vector.x>=0&&(e-this.origin.y)*this.vector.y>=0?e:NaN}}]),e}(),T=function e(t,n,i){Object(o.a)(this,e),this.first=t,this.second=n,this.third=i,this.chord=Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y))},R=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new k,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new k;Object(o.a)(this,e),this.topLeft={},this.bottomRight={},this.topLeft.x=t.x>n.x?n.x:t.x,this.topLeft.y=t.y<n.y?n.y:t.y,this.width=Math.abs(n.x-t.x),this.height=Math.abs(n.y-t.y),this.bottomRight.x=this.topLeft.x+this.width,this.bottomRight.y=this.topLeft.y-this.height},L=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new k,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(o.a)(this,e),this.center=t,this.radius=n},j=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new k,new k,new k];Object(o.a)(this,e),this.points=t}return Object(c.a)(e,[{key:"getOuterCircle",value:function(){var e=_.SLinePerpOnPoint(new P(this.points[0],this.points[1]),_.midPoint(this.points[0],this.points[1])),t=_.SLinePerpOnPoint(new P(this.points[0],this.points[2]),_.midPoint(this.points[0],this.points[2])),n=N.SLineSLine(e,t);return null===n&&(n=_.midPoint(this.points[0],this.points[1])),new L(n,_.distance(n,this.points[0]))}}]),e}(),A=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new k,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new k;Object(o.a)(this,e),this.x=n.x-t.x,this.y=n.y-t.y,this.modulus=Math.sqrt(this.x*this.x+this.y*this.y)},N=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"SLineSLine",value:function(e,t){var n=e.a*t.b-e.b*t.a;if(0===n)return null;var i=-e.c*t.b- -t.c*e.b,r=-t.c*e.a- -e.c*t.a;return new k(i/n,r/n)}},{key:"LineSLine",value:function(t,n){var i=e.SLineSLine(n,new P(t));return null===i?null:_.pointOnLine(i,t.p1,t.p2)?i:null}},{key:"RectangleSLine",value:function(t,n,i){var r=new Array(4),s=[];return r[0]=new O(t.x,t.y,n.x,t.y),r[1]=new O(t.x,n.y,n.x,n.y),r[2]=new O(t.x,t.y,t.x,n.y),r[3]=new O(n.x,t.y,n.x,n.y),r.forEach(function(t){var n=e.LineSLine(t,i);n&&s.length<2&&s.push(n)}),s}},{key:"RectangleRLine",value:function(t,n,i){var r=e.RectangleSLine(t,n,_.SLineFromRLine(i)),s=[];return r.forEach(function(e){_.isPointOnRayLine(i,e)&&s.push(e)}),s}},{key:"RectangleRectangle",value:function(t,n,i,r){var s=[new O(t.x,t.y,n.x,t.y),new O(n.x,t.y,n.x,n.y),new O(t.x,n.y,n.x,n.y),new O(t.x,t.y,t.x,n.y)],a=[new O(i.x,i.y,r.x,i.y),new O(r.x,i.y,r.x,r.y),new O(i.x,r.y,r.x,r.y),new O(i.x,i.y,i.x,r.y)],o=[];return s.forEach(function(t){a.forEach(function(n){var i=e.LineLine(t,n);i&&o.push(i)})}),o}},{key:"LineRectangle",value:function(t,n,i){var r=new Array(4),s=[];return r[0]=new O(n.x,n.y,i.x,n.y),r[1]=new O(n.x,i.y,i.x,i.y),r[2]=new O(n.x,n.y,n.x,i.y),r[3]=new O(i.x,n.y,i.x,i.y),r.forEach(function(n){var i=e.LineLine(t,n);i&&s.length<2&&s.push(i)}),s}},{key:"LineLine",value:function(t,n){var i=e.SLineSLine(new P(t),new P(n));return i&&_.pointOnLine(i,t.p1,t.p2)&&_.pointOnLine(i,n.p1,n.p2)?i:null}},{key:"CircleSLine",value:function(e,t){var n=-e.center.x,i=-e.center.y,r=_.LineShifted(t,n,i),s=r.a,a=r.b,o=r.c,c=e.radius;0===a&&(s=r.b,a=r.a);var l=s*s+a*a,h=2*s*o,p=o*o-c*c*a*a,u=_.QuadEquation(l,h,p);if(null===u)return null;for(var d=new Array(u.length),y=0;y<u.length;y++)d[y]=new k,0===r.b?(d[y].y=u[y],d[y].x=-(s*u[y]+o)/a):(d[y].x=u[y],d[y].y=-(s*u[y]+o)/a),d[y].x=d[y].x-n,d[y].y=d[y].y-i;return d}},{key:"CircleRLine",value:function(t,n){var i=e.CircleSLine(t,new P(n.origin,new k(n.origin.x+n.vector.x,n.origin.y+n.vector.y)));if(null===i)return null;var r=0,s=0,a=!0,o=!1,c=void 0;try{for(var l,h=i[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){var p=l.value;_.isPointOnRayLine(n,p)?r++:i[s]=null,s++}}catch(m){o=!0,c=m}finally{try{a||null==h.return||h.return()}finally{if(o)throw c}}if(0===r)return null;var u=new Array(r);r=0;var d=!0,y=!1,v=void 0;try{for(var f,g=i[Symbol.iterator]();!(d=(f=g.next()).done);d=!0){var S=f.value;null!=S&&(u[r++]=S)}}catch(m){y=!0,v=m}finally{try{d||null==g.return||g.return()}finally{if(y)throw v}}return u}}]),e}(),_=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,null,[{key:"realToScreenLength",value:function(e,t,n){return Math.round(e/(t/n))}},{key:"SLineFromRLine",value:function(e){return new P(e.origin,new k(e.origin.x+e.vector.x,e.origin.y+e.vector.y))}},{key:"SLineFromLine",value:function(e){return new P(e.p1,e.p2)}},{key:"SLineByTwoPoints",value:function(e,t){return new P(e,t)}},{key:"SLinePerpOnPoint",value:function(e,t){return new P(-e.b,e.a,-e.a*t.y+e.b*t.x)}},{key:"LineShifted",value:function(e,t,n){for(var i=new Array(2),r=0;r<2;r++){var s=r,a=e.getYbyX(s);isNaN(a)&&(a=r,s=e.getXbyY(a)),s+=t,a+=n,i[r]=new k(s,a)}return new P(i[0],i[1])}},{key:"pointInRect",value:function(e,t,n){var i=(e.x-n.x)*(e.x-t.x),r=(e.y-n.y)*(e.y-t.y);return i<=0&&r<=0}},{key:"pointInRectByPoints",value:function(e,t,n,i,r,s){return e>=n&&e<=r&&t<=i&&t>=s}},{key:"pointOnLine",value:function(e,t,n){if(!e||!t||!n)return!1;var i=Math.round((e.x-t.x)*(e.x-n.x)*1e5)/1e5,r=Math.round((e.y-t.y)*(e.y-n.y)*1e5)/1e5;return i<=0&&r<=0}},{key:"pointOnSLineProjection",value:function(t,n){return N.SLineSLine(n,e.SLinePerpOnPoint(n,t))}},{key:"PointToSLineDistance",value:function(t,n){return e.distance(t,e.pointOnSLineProjection(t,n))}},{key:"PointToRLineDistance",value:function(t,n){var i=e.pointOnSLineProjection(t,e.SLineFromRLine(n));return e.isPointOnRayLine(n,i)?e.distance(t,i):e.distance(t,n.origin)}},{key:"PointToLineDistance",value:function(t,n){var i=e.pointOnSLineProjection(t,e.SLineFromLine(n));return e.pointOnLine(i,n.p1,n.p2)?e.distance(t,i):Math.min(e.distance(t,n.p1),e.distance(t,n.p2))}},{key:"midPoint",value:function(e,t){return new k((t.x+e.x)/2,(t.y+e.y)/2)}},{key:"scalar",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"modulus",value:function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}},{key:"angleVectors",value:function(e,t){return Math.acos(this.scalar(e,t)/(e.modulus*t.modulus))}},{key:"arcCenterPoint",value:function(t,n,i){var r=new P(t,n),s=new P(n,i),a=e.midPoint(t,n),o=e.midPoint(n,i),c=e.SLinePerpOnPoint(r,a),l=e.SLinePerpOnPoint(s,o);return N.SLineSLine(c,l)}},{key:"isPointOnRayLine",value:function(e,t){return(t.x-e.origin.x)*e.vector.x>=0&&(t.y-e.origin.y)*e.vector.y>=0}},{key:"arcMiddlePoint",value:function(t){var n=e.midPoint(t.first,t.third),i=Math.sqrt((n.x-t.center.x)*(n.x-t.center.x)+(n.y-t.center.y)*(n.y-t.center.y));return new k(t.radius/i+t.center.x,t.radius/i+t.center.y)}},{key:"arcToPointArray",value:function(t,n){if(t.chord<=n){var i=new Array(2);return i[0]=t.first,i[1]=t.third,i}for(var r=e.arcMiddlePoint(t),s=e.arcToPointArray(e.arcByTwoPointsCenter(t.first,r,t.center),n),a=e.arcToPointArray(e.arcByTwoPointsCenter(r,t.third,t.center),n),o=s.length-1+a.length,c=new Array(o),l=0;l<=o;l++)l<s.length-1?c[l]=s[l]:c[l]=a[l];return c}},{key:"arcByTwoPointsCenter",value:function(t,n,i){var r=e.midPoint(t,n),s=Math.sqrt((r.x-i.x)*(r.x-i.x)+(r.y-i.y)*(r.y-i.y)),a=Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y));return new T(t,new k(a/s+i.x,a/s+i.y),n)}},{key:"arcLength",value:function(t){var n=new A(t.center,t.first),i=new A(t.center,t.third);return e.angleVectors(n,i)*t.radius}},{key:"QuadEquation",value:function(e,t,n){if(0===e)return null;var i=t*t-4*e*n;if(i<0)return null;var r=[];return 0===i?((r=[])[0]=-t/(2*e),r):((r=[])[0]=(-t+Math.sqrt(i))/(2*e),r[1]=(-t-Math.sqrt(i))/(2*e),r)}},{key:"distance",value:function(e,t){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}},{key:"rotatePoint",value:function(e,t,n){var i=new k(e.x-n.x,e.y-n.y),r=new k;return r.x=i.x*Math.cos(t)-i.y*Math.sin(t)+n.x,r.y=i.x*Math.sin(t)+i.y*Math.cos(t)+n.y,r}},{key:"screenToReal",value:function(e,t,n,i,r,s){var a=s.x-r.x,o=r.y-s.y;return{x:e/n*a+r.x,y:r.y-t/i*o}}},{key:"realToScreen",value:function(e,t,n){var i=t.width/n.width;return{x:Math.round((e.x-t.topLeft.x)/i),y:-Math.round((e.y-t.topLeft.y)/i)}}}]),e}(),I=function(){function e(){Object(o.a)(this,e),this.style=new w(E.BLACK,w.SOLID),this.state={selected:!1,underCursor:!1},this.pointMarkers=[],this.controlPoints=[]}return Object(c.a)(e,[{key:"setActivePoint",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.controlPoints[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var s=i.value;s.selected=!1,s.marker.setActive(!1)}}catch(a){t=!0,n=a}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"getDistanceToControlPoints",value:function(e){return this.controlPoints.map(function(t){return _.distance(e,t.point)})}},{key:"getModel",value:function(){return this.model}},{key:"setColor",value:function(e){this.style.setColor(e)}},{key:"getColor",value:function(){return this.style.getColor()}},{key:"getStyle",value:function(){return this.style}},{key:"setStyle",value:function(e){this.style=e}},{key:"setState",value:function(e){if(this.state=Object(S.a)({},this.state,e),!0!==this.state.selected){this.setStyle(new w(E.BLACK,w.SOLID,1));var t=!0,n=!1,i=void 0;try{for(var r,s=this.controlPoints[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var a=r.value;a.show=!1,a.selected=!1,a.underCursor=!1}}catch(d){n=!0,i=d}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}this.pointMarkers=null,!0===this.state.underCursor&&this.setStyle(new w(E.BLACK,w.SOLID,2))}else{this.setStyle(new w(E.SELECTED,w.SOLID,2));var o=!0,c=!1,l=void 0;try{for(var h,p=this.controlPoints[Symbol.iterator]();!(o=(h=p.next()).done);o=!0){var u=h.value;u.show=!0,u.marker.setPoint(u.point),u.marker.setActive(u.selected||u.underCursor)}}catch(d){c=!0,l=d}finally{try{o||null==p.return||p.return()}finally{if(c)throw l}}}}},{key:"getState",value:function(){return this.state}},{key:"setProperty",value:function(e){"Color"===e.key&&this.setColor(e.value)}}]),e}(),M=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this))).p=e,n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"refresh",value:function(e,t){this.p0=_.realToScreen(this.p,e,t)}},{key:"setCoord",value:function(e){this.p=e}},{key:"setAdditional",value:function(e){var t=e.shiftKey,n=e.altKey;this.shiftKey=t,this.altKey=n}}]),t}(I),D=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawSelf",value:function(e,t,n){this.refresh(t,n),e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=this.getStyle().getWidth();e.beginPath(),e.moveTo(this.p0.x-15,this.p0.y),e.lineTo(this.p0.x+15,this.p0.y),e.moveTo(this.p0.x,this.p0.y-15),e.lineTo(this.p0.x,this.p0.y+15),e.strokeRect(this.p0.x-3,this.p0.y-3,6,6),e.stroke(),this.shiftKey&&!this.altKey&&this.drawPlus(e,15),this.altKey&&this.drawMinus(e,15)}},{key:"drawPlus",value:function(e,t){e.beginPath(),e.moveTo(this.p0.x+t/4,this.p0.y-t/2),e.lineTo(this.p0.x+t/4+t/2,this.p0.y-t/2),e.moveTo(this.p0.x+t/2,this.p0.y-t/4),e.lineTo(this.p0.x+t/2,this.p0.y-t/4-t/2),e.stroke()}},{key:"drawMinus",value:function(e,t){e.beginPath(),e.moveTo(this.p0.x+t/4,this.p0.y-t/2),e.lineTo(this.p0.x+t/4+t/2,this.p0.y-t/2),e.stroke()}}]),t}(M),B=function(){function e(t){Object(o.a)(this,e),this.allShapes=t}return Object(c.a)(e,[{key:"setShapes",value:function(e,t){this.allShapes=e,this.selType=t}},{key:"findShapeNearPoint",value:function(e,t){var n=null;this.allShapes.forEach(function(i){var r=i.getDistance(e);null!==r&&r<=t&&(n=i),i.getState().inSelection||i.setState({underCursor:!1})}),null!==n&&n.setState({underCursor:!0})}},{key:"findControlPoints",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var s,a=this.allShapes[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value;if(o.getState().selected){var c=o.getDistanceToControlPoints?o.getDistanceToControlPoints(e):[],l=0,h=!0,p=!1,u=void 0;try{for(var d,y=c[Symbol.iterator]();!(h=(d=y.next()).done);h=!0){var v=d.value;o.controlPoints[l].underCursor=null!==v&&v<=t,l++}}catch(f){p=!0,u=f}finally{try{h||null==y.return||y.return()}finally{if(p)throw u}}}}}catch(f){i=!0,r=f}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},{key:"selectControlPoints",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var s,a=this.allShapes[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value;if(o.getState().selected){var c=o.getDistanceToControlPoints?o.getDistanceToControlPoints(e):[],l=0,h=!0,p=!1,u=void 0;try{for(var d,y=c[Symbol.iterator]();!(h=(d=y.next()).done);h=!0){var v=d.value;null!==v&&v<=t&&(o.controlPoints[l].selected=!0),l++}}catch(f){p=!0,u=f}finally{try{h||null==y.return||y.return()}finally{if(p)throw u}}}}}catch(f){i=!0,r=f}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},{key:"findShapeInRect",value:function(e,t){var n=this,i=Object(S.a)({},e),r=Object(S.a)({},t);e.x>t.x&&(i.x=t.x,r.x=e.x),e.y<t.y&&(i.y=t.y,r.y=e.y);var s=[];this.allShapes.forEach(function(e){if(e.isInRect){var t=e.isInRect(i,r),a=t.cross,o=t.full,c=!1;"fullSelect"===n.selType&&!0===o&&(c=!0),"crossSelect"===n.selType&&!0===a&&(c=!0),"crossSelect"===n.selType&&!0===o&&(c=!0),c&&s.push(e),e.setState({underCursor:!1})}}),0!==s.length&&s.forEach(function(e){e.setState({underCursor:!0,inSelection:!0})})}},{key:"selectShapes",value:function(e){var t=e.shiftKey,n=e.altKey;t||n||this.deselectShapes(),this.allShapes.forEach(function(e){e.getState().underCursor&&(e.setState({selected:!0}),n&&e.setState({selected:!1}))})}},{key:"deselectShapes",value:function(){this.allShapes.forEach(function(e){return e.setState({selected:!1})})}},{key:"getSelectedShapes",value:function(){return this.allShapes.filter(function(e){return!0===e.getState().selected})}}]),e}(),K=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawSelf",value:function(e,t,n){this.refresh(t,n),e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=this.getStyle().getWidth();e.beginPath(),e.moveTo(this.p0.x-10,this.p0.y),e.lineTo(this.p0.x+10,this.p0.y),e.moveTo(this.p0.x,this.p0.y-10),e.lineTo(this.p0.x,this.p0.y+10),e.stroke()}}]),t}(M),H=n(8),F=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this))).line=e,n.model=e,n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawSelf",value:function(e,t,n){this.refresh(t,n),null!==this.p0&&null!==this.p1&&(e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=this.getStyle().getWidth(),e.beginPath(),e.moveTo(this.p0.x,this.p0.y),e.lineTo(this.p1.x,this.p1.y),e.stroke())}},{key:"refresh",value:function(e,t){var n=new k(e.topLeft.x+e.width,e.topLeft.y-e.height),i=_.midPoint(e.topLeft,n),r=_.distance(e.topLeft,n)/2,s=new L(i,r),a=N.CircleSLine(s,this.line);if(null!==a){if(1===a.length){var o=this.p[0];(a=new Array(2))[0]=o,a[1]=a[0]}this.p0=_.realToScreen(a[0],e,t),this.p1=_.realToScreen(a[1],e,t)}else this.p0=null,this.p1=null}},{key:"setActivePoint",value:function(){this.activePoint=null}},{key:"getMarkers",value:function(){return null}},{key:"getProperties",value:function(){var e=new Map;return e.set("Title",{value:"SLine",regexp:/\s*/}),e.set("A",{value:this.line.a,regexp:/^-?\d*\.?\d*$/}),e.set("B",{value:this.line.b,regexp:/^-?\d*\.?\d*$/}),e.set("C",{value:this.line.c,regexp:/^-?\d*\.?\d*$/}),e}},{key:"setProperty",value:function(e){switch(Object(H.a)(Object(h.a)(t.prototype),"setProperty",this).call(this,e),e.key){case"A":0===this.line.b&&0===e.value||(this.line.a=e.value);break;case"B":0===this.line.a&&0===e.value||(this.line.b=e.value);break;case"C":this.line.c=e.value}}},{key:"getDistance",value:function(e){return _.PointToSLineDistance(e,this.line)}},{key:"isInRect",value:function(e,t){return{cross:N.RectangleSLine(e,t,this.line).length>0,full:!1}}},{key:"toString",value:function(){return"Line ".concat(this.line.a,"X+").concat(this.line.b,"Y+").concat(this.line.c,"=0")}}]),t}(I),W=function(){function e(){Object(o.a)(this,e),this.snapSet=new Set,this.snapMarkersActive=new Set,this.snapMarkersAll=new Set,this.activeMarker=null}return Object(c.a)(e,[{key:"addSnap",value:function(e){this.snapSet.add(e),this.refreshMarkerList()}},{key:"removeSnap",value:function(e){this.snapSet.delete(e),this.refreshMarkerList()}},{key:"addSnapMarkers",value:function(e){if(null!==e){var t=!0,n=!1,i=void 0;try{for(var r,s=e[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var a=r.value;this.snapMarkersAll.add(a),this.snapSet.has(a.constructor)&&this.snapMarkersActive.add(a)}}catch(o){n=!0,i=o}finally{try{t||null==s.return||s.return()}finally{if(n)throw i}}}}},{key:"refreshMarkerList",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.snapMarkersAll[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var s=i.value;this.snapSet.has(s.constructor)&&this.snapMarkersActive.add(s)}}catch(u){t=!0,n=u}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var a=!0,o=!1,c=void 0;try{for(var l,h=this.snapMarkersActive[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){var p=l.value;this.snapSet.has(p.constructor)||this.snapMarkersActive.delete(p)}}catch(u){o=!0,c=u}finally{try{a||null==h.return||h.return()}finally{if(o)throw c}}}},{key:"clear",value:function(){this.snapMarkersAll.clear(),this.snapMarkersActive.clear()}},{key:"getDistanceToNearestMarker",value:function(e,t){var n=null,i=t,r=!0,s=!1,a=void 0;try{for(var o,c=this.snapMarkersActive[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var l=o.value,h=_.distance(l.getPos(),e);h<=t&&h<=i&&(n=l,i=h)}}catch(p){s=!0,a=p}finally{try{r||null==c.return||c.return()}finally{if(s)throw a}}return this.activeMarker=n,null!=n?i:-1}},{key:"getActiveMarker",value:function(){return this.activeMarker}}]),e}(),U=function(){function e(t){Object(o.a)(this,e),this.creator=t,this.selectionCreator=new t}return Object(c.a)(e,[{key:"setNext",value:function(e){this.selectionCreator.setNextPoint(e)}},{key:"setCurrent",value:function(e){this.selectionCreator.setCurrent(e)}},{key:"getSelectionShape",value:function(){return this.selectionCreator.getShape()}},{key:"reset",value:function(){this.selectionCreator=new this.creator}}]),e}(),G=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this))).rectangle=e,n.rect=new R,n.setStyle(new w(E.SELECTION_AREA,w.SELECTION)),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawSelf",value:function(e,t,n){this.refresh(t,n),e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=this.getStyle().getWidth(),e.strokeRect(this.rect.topLeft.x,this.rect.topLeft.y,this.rect.width,this.rect.height)}},{key:"refresh",value:function(e,t){this.rect.topLeft=_.realToScreen(this.rectangle.topLeft,e,t),this.rect.width=_.realToScreenLength(this.rectangle.width,e.width,t.width),this.rect.height=_.realToScreenLength(this.rectangle.height,e.height,t.height)}},{key:"getModel",value:function(){return this.rectangle}},{key:"getMarkers",value:function(){return[]}},{key:"getProperties",value:function(){return new Map}},{key:"setProperty",value:function(e){Object(H.a)(Object(h.a)(t.prototype),"setProperty",this).call(this,e)}},{key:"toString",value:function(){return"RectSelection"}}]),t}(I),Y=function(){function e(t){Object(o.a)(this,e),this.i=0,this.boundedCircle=t,this.legal=!0}return Object(c.a)(e,[{key:"getShape",value:function(){return this.shape}},{key:"getHelperShapes",value:function(){return this.helperShapes}},{key:"isNext",value:function(){return this.i<this.points.length}},{key:"setNextPoint",value:function(e){this.setCurrent(e),this.i++}},{key:"isLegal",value:function(){return this.legal}},{key:"refresh",value:function(e){this.boundedCircle=e,null!=this.points[this.i]&&this.setControlPoints()}},{key:"setStyle",value:function(e){this.style=e}},{key:"getCurrentStep",value:function(){return this.i}},{key:"getName",value:function(){return this.name}}]),e}(),V=function(e){function t(e,n){var i;return Object(o.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this,n))).rectangle=new R,i.points=new Array(2),i.name="SelectRectCreator",i.shape=new G(i.rectangle),i.helperShapes=[],i}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setCurrent",value:function(e){this.isNext()&&(this.points[this.i]=e,0===this.i&&(this.points[1]=this.points[0]),this.i>0&&(this.rectangle=new R(this.points[0],this.points[1])),this.shape=new G(this.rectangle))}},{key:"setControlPoints",value:function(){}},{key:"reset",value:function(){return new t}}]),t}(Y);V.caption="RectSelection";var Z=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawArrow",value:function(e,t){e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.moveTo(t[2].x,t[2].y),e.lineTo(t[1].x,t[1].y),e.moveTo(t[1].x,t[1].y),e.lineTo(t[3].x,t[3].y),e.stroke()}},{key:"drawSelf",value:function(e,t,n){var i=this;this.refresh(t,n),e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=2;var r=new Array(4);r[0]=this.p0,r[1]={x:r[0].x,y:r[0].y-10},r[2]={x:r[0].x-10/3,y:r[0].y-20/3},r[3]={x:r[0].x+10/3,y:r[0].y-20/3},this.drawArrow(e,r),this.drawArrow(e,r.map(function(e){return _.rotatePoint(e,Math.PI/2,i.p0)})),this.drawArrow(e,r.map(function(e){return _.rotatePoint(e,Math.PI,i.p0)})),this.drawArrow(e,r.map(function(e){return _.rotatePoint(e,3*Math.PI/2,i.p0)}))}}]),t}(M),X=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawSelf",value:function(e,t,n){this.refresh(t,n),e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=this.getStyle().getWidth();e.beginPath(),e.moveTo(this.p0.x,this.p0.y-10),e.lineTo(this.p0.x,this.p0.y+10),e.moveTo(this.p0.x-10,this.p0.y),e.lineTo(this.p0.x+10,this.p0.y),e.arc(this.p0.x,this.p0.y,10,0,2*Math.PI),e.stroke()}}]),t}(M),q=function(){function e(t){var n=t.point,i=t.curScreenPoint;Object(o.a)(this,e),this.coord=n,this.curPoint=i,this.prevCoord=n}return Object(c.a)(e,[{key:"isOutRect",value:function(e,t){return e.x<t.marginLeft||e.x>t.screenWidth-t.marginRight||e.y<t.marginTop||e.y>t.screenHeight-t.marginBottom}},{key:"move",value:function(e){var t=e.curPoint,n=e.screenProps;this.prevPoint=Object(S.a)({},this.curPoint),this.curPoint=Object(S.a)({},t),this.coord=_.screenToReal(this.curPoint.x,this.curPoint.y,n.screenWidth,n.screenHeight,n.topLeft,n.bottomRight),this.coord.x=+this.coord.x.toFixed(4),this.coord.y=+this.coord.y.toFixed(4),this.mouseOnScreen=!this.isOutRect(this.curPoint,n),this.mouseOnScreen||(this.curPoint.x=this.prevPoint.x,this.curPoint.y=this.prevPoint.y)}},{key:"mouseOnScreen",value:function(e){return!this.isOutRect(this.curPoint,e)}},{key:"down",value:function(){}},{key:"up",value:function(){}},{key:"leave",value:function(){this.mouseOnScreen=!1}},{key:"wheel",value:function(e){var t=e.deltaY,n=e.point,i=e.screenProps;t>0?i.realWidth<=1e3&&i.actions.setScale(1.2,n):i.pixelRatio>=.001&&i.actions.setScale(1/1.2,n)}},{key:"snap",value:function(e){var t={x:this.coord.x,y:this.coord.y};if(e.gridSnap){var n=Math.round(t.x/e.gridStep)*e.gridStep,i=Math.round(t.y/e.gridStep)*e.gridStep,r=n-t.x,s=i-t.y;Math.sqrt(r*r+s*s)<=e.snapMinDist*e.pixelRatio&&(this.isOutRect(_.realToScreen({x:n,y:i},this.getRealRect(e),this.getScreenRect(e)),e)||(t.x=n,t.y=i,this.curPoint=_.realToScreen(t,this.getRealRect(e),this.getScreenRect(e))))}if(e.status!==te.FREE){var a=e.snapMarkersManager.getDistanceToNearestMarker(t,e.snapDist*e.pixelRatio);a>=0&&a<=e.snapMinDist*e.pixelRatio&&(t=e.snapMarkersManager.getActiveMarker().getPos(),this.curPoint=_.realToScreen(t,this.getRealRect(e),this.getScreenRect(e)))}this.coord=t}},{key:"getRealRect",value:function(e){var t=new R;return t.topLeft=e.topLeft,t.bottomRight=e.bottomRight,t.width=e.bottomRight.x-e.topLeft.x,t.height=e.topLeft.y-e.bottomRight.y,t}},{key:"getScreenRect",value:function(e){var t=new R;return t.topLeft.x=0,t.topLeft.y=0,t.width=e.screenWidth,t.height=e.screenHeight,t}}]),e}(),z=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"move",value:function(e){var n=e.curPoint,i=e.screenProps,r=e.shiftKey,s=e.altKey;Object(H.a)(Object(h.a)(t.prototype),"move",this).call(this,{curPoint:n,screenProps:i}),i.cursor.setAdditional({shiftKey:r,altKey:s}),i.shapeManager.findShapeNearPoint(this.coord,i.selectDist*i.pixelRatio),i.shapeManager.findControlPoints(this.coord,i.selectDist*i.pixelRatio),i.actions.setCurCoord(this.coord,this.curPoint)}},{key:"down",value:function(e){var t=e.curPoint,n=e.screenProps;this.curPoint=Object(S.a)({},t),this.prevCoord=_.screenToReal(this.curPoint.x,this.curPoint.y,n.screenWidth,n.screenHeight,n.topLeft,n.bottomRight),n.selectionManager.reset(),n.selectionManager.setNext(_.screenToReal(this.curPoint.x,this.curPoint.y,n.screenWidth,n.screenHeight,n.topLeft,n.bottomRight)),n.actions.setScreenStatus(te.SELECT),n.actions.setPrevCoord(this.prevCoord,this.curPoint)}},{key:"click",value:function(e){var t=e.screenProps,n=e.shiftKey,i=e.altKey;t.shapeManager.selectShapes({shiftKey:n,altKey:i}),t.shapeManager.selectControlPoints(this.coord,t.selectDist*t.pixelRatio,n)}}]),t}(q),$=function(e){function t(e){var n,i=e.point,r=e.curScreenPoint;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,{point:i,curScreenPoint:r}))).dragX0=i.x,n.dragY0=i.y,n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"move",value:function(e){var n=e.curPoint,i=e.screenProps;Object(H.a)(Object(h.a)(t.prototype),"move",this).call(this,{curPoint:n,screenProps:i});var r=this.coord.x-this.dragX0,s=this.coord.y-this.dragY0;i.actions.setTopLeft({x:i.topLeft.x-r,y:i.topLeft.y-s}),i.actions.setBoundedCircle()}},{key:"wheel",value:function(){}},{key:"leave",value:function(e){var n=e.screenProps;Object(H.a)(Object(h.a)(t.prototype),"leave",this).call(this),n.actions.setPrevStatus()}}]),t}(q),J=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"move",value:function(e){var n=e.curPoint,i=e.screenProps;Object(H.a)(Object(h.a)(t.prototype),"move",this).call(this,{curPoint:n,screenProps:i}),this.snap(i),i.picker.setCurrent(this.coord),i.actions.setCurCoord(this.coord,this.curPoint)}},{key:"click",value:function(e){var t=e.screenProps;t.picker.setNextPoint(t.curCoord),t.picker.isNext()||(t.actions.setPickedData(t.picker.getPickedData()),t.actions.refreshSnapMarkers(),t.actions.refreshShapeManager())}}]),t}(q),Q=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"move",value:function(e){var n=e.curPoint,i=e.screenProps;Object(H.a)(Object(h.a)(t.prototype),"move",this).call(this,{curPoint:n,screenProps:i}),this.snap(i),i.selectionManager.setCurrent(i.curCoord),i.shapeManager.findShapeInRect(this.prevCoord,this.coord),i.shapeManager.findShapeNearPoint(this.coord,i.selectDist*i.pixelRatio),i.actions.setCurCoord(this.coord,this.curPoint)}},{key:"up",value:function(e){e.screenProps.actions.cancel()}},{key:"click",value:function(){}}]),t}(q),ee=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"move",value:function(e){var n=e.curPoint,i=e.screenProps;Object(H.a)(Object(h.a)(t.prototype),"move",this).call(this,{curPoint:n,screenProps:i}),this.snap(i),i.shapeCreator.setCurrent(this.coord),i.actions.setCurCoord(this.coord,this.curPoint)}},{key:"click",value:function(e){var t=e.screenProps;t.shapeCreator.setCurrent(t.curCoord),t.shapeCreator.isLegal()&&t.shapeCreator.setNextPoint(t.curCoord),t.shapeCreator.isNext()||(t.actions.addShape(t.shapeCreator.getShape()),t.actions.refreshSnapMarkers(),t.actions.refreshShapeManager(),t.cyclicCreation?t.actions.createShape(t.shapeCreator.reset(t.boundedCircle)):t.actions.cancel())}}]),t}(q),te={FREE:"FREE",SELECT:"SELECT",CREATE:"CREATE",DRAWING:"DRAWING",CANCEL:"CANCEL",PAN:"PAN",PICK:"PICK",PICK_END:"PICK_END",MOVETRANS:"MOVETRANS"},ne=new F(new P(0,1,0),new L(new k(0,0),8)),ie=new F(new P(1,0,0),new L(new k(0,0),8));ne.setStyle(new w(E.RED,w.SOLID)),ie.setStyle(new w(E.RED,w.SOLID));var re={bottomRight:{x:10,y:-10},boundedCircle:new L({x:0,y:0},20),curCoord:{x:0,y:0},curScreenPoint:{x:225,y:225},cursor:new D({x:0,y:0}),curShape:null,cyclicCreation:!1,gridSnap:!1,gridStep:1,gridStepPixels:1,marginTop:15,marginLeft:40,marginBottom:15,marginRight:10,pickedData:{data:null,editId:0,fix:!1},picker:null,prevStatus:te.FREE,ratio:1,pixelRatio:1,realWidth:20,realHeight:20,repaint:0,screenHeight:550,screenWidth:550,selectedShapes:[],selectDist:2,selectionManager:new U(V),selectionType:"crossSelect",shapes:[],shapeCreator:null,shapeManager:new B,show:{grid:!0},snap:{snapClass:null,snap:!1},snapDist:20,snapMinDist:10,snapMarkersManager:new W,status:te.FREE,statusBar:5,statusParams:{creator:null,picker:null},topLeft:{x:-10,y:10},xAxe:ne,yAxe:ie};function se(e,t,n,i,r){var s=e/t,a=n*s,o=Math.round(r/s),c={};return c.x=i.x+e,c.y=i.y-a,{realWidth:e,realHeight:a,pixelRatio:s,gridStepPixels:o,bottomRight:c,gridStep:r}}re.mouseHandler=new z({point:re.curCoord,screenPoint:re.curScreenPoint});var ae={devUrl:"",_devUrl:""},oe={SET_LANGUAGE:"SET_LANGUAGE",REQUEST_LANGUAGE:"REQUEST_LANGUAGE",SHOW_HELP:"SHOW_HELP",SHOW_CONFIRM:"SHOW_CONFIRM",SHOW_ALERT:"SHOW_ALERT"};function ce(e){return{type:oe.SET_LANGUAGE,payload:e}}function le(e){return{type:oe.SHOW_HELP,payload:e}}function he(e,t,n){return{type:oe.SHOW_CONFIRM,payload:{show:e,messageKey:t,okAction:n}}}function pe(e,t){return{type:oe.SHOW_ALERT,payload:{show:e,messageKey:t}}}function ue(){var e=document.querySelector(".modalContainer > .toolBar"),t=e.style.backgroundColor,n=0,i=setInterval(function(){e.style.backgroundColor===t?e.style.backgroundColor="red":e.style.backgroundColor=t,++n>3&&(clearInterval(i),e.style.backgroundColor=t)},40)}var de={about:{name:"\xa9 Takhmazov Borys, 2018-2019",email:"E-Mail: tboris1983@gmail.com"},user:{name:""},buttons:{cancel:"Cancel",logout:"Log out",showPass:"Show password",pick:"Pick"},registerForm:{title:"Sign up",name:"Nickname",email:"E-Mail",password:"Password",passwordAgain:"Password again",serverMessages:["","User already exists","E-Mail already exists","","","Internal server error"],inputMessages:["Name length too short (4 char at least)","Name can contain only letters, digits and _","Password too short (6 char at least)","Passwords aren't equal","E-mail format incorrect"]},loginForm:{title:"Sign in",name:"Name or E-Mail",password:"Password",regForm:"Sign up",rememberMe:"Remember me on this device",messages:["","User data incorrect","User isn't activated yet","","","Internal server error. Please try again"]},activation:{title:"Activation",messages:["Activation succeeded. You can now sign in with your login and password.","Activation code is incorrect or expired","","","","Server internal error"]},title:"Geometry editor",messages:{deleteShapes:"Delete selected shapes?",logout:"Do you want to log out?",regSucceed:"Registration succeeded. Please check you mailbox to activate account"},create:{createToolBar:"Create",createCheckBox:"Cyclic",createSLine2Points:"Straight line",createRayLine2Points:"Ray line",createSegmentLine2Points:"Segment line",createCircleCenter:"Circle by center",createCircle2P:"Circle by 2 points",createCircle3P:"Circle by 3 points",createRect:"Rectangle by 2 points",createRectCenter:"Rectangle by center",createTriangle:"Triangle",createTriangleInscribed:"Triangle inscribed in circle",createTriangleDescribed:"Triangle described about circle",createParabola:"Parabola",createHyperbola:"Hyperbola",createFunction:"User defined function",development:"(in development)"},modify:{crossSelect:"Partial selection",fullSelect:"Full selection"},snap:{snapToggleBar:"Snap",snapGridPoints:"Snap to grid points",snapEndPoints:"Snap to end points",snapCenterPoints:"Snap to center points",snapMiddlePoints:"Snap to middle points"},showGrid:"Show grid",propBar:"Properties",noShapesSelected:"No shapes selected",NShapesSelected:" shapes selected",deleteButton:"Delete",shapes:{Circle:{Title:"Circle",Radius:"Radius",Center:"Center"},Rectangle:{Title:"Rectangle",P1:"P1",P2:"P2"},Line:{Title:"Line",P1:"P1",P2:"P2"},SLine:{Title:"Straight Line AX+BY+C=0",A:"A",B:"B",C:"C"},RLine:{Title:"Ray Line",Origin:"Origin",Direction:"Direction"},Triangle:{Title:"Triangle",P1:"P1",P2:"P2",P3:"P3"}},pickers:{PointPicker:{description:"",steps:["Select point"]},DistancePicker:{description:"",steps:["Select 1st point","Select 2nd point"]}},creators:{StraightLineCreator:{description:"Straight Line",steps:["Select 1st point","Select 2nd point"]},RayLineCreator:{description:"Ray Line",steps:["Select origin point","Select direction point"]},LineCreator:{description:"Segment Line",steps:["Select first point","Select second point"]},CircleCRCreator:{description:"Circle",steps:["Select center point","Select radius point"]},Circle2PCreator:{description:"Circle",steps:["Select first point","Select second point"]},Circle3PCreator:{description:"Circle",steps:["Select first point","Select second point","Select third point"]},RectangleCreator:{description:"Rectangle",steps:["Select first point","Select second point"]},TriangleCreator:{description:"Triangle",steps:["Select first point","Select second point","Select third"]},SelectRectCreator:{description:"",steps:["","Specify second selection point"]}},help:{title:"Reference",hotKeys:[{key:"ESC",desc:"Cancel"},{key:"Ctrl-A",desc:"Select all"},{key:"Del",desc:"Delete selected"},{key:"C",desc:"View to origin"},{key:"Mouse wheel",desc:"Zoom +/-"},{key:"Mouse middle button",desc:"Move screen"}]}},ye={captions:de,keyDownHandler:[{ctrlKey:!0,shiftKey:!1,altKey:!1,keyCode:65,action:"selectAll",param:null},{ctrlKey:!1,shiftKey:!1,altKey:!1,keyCode:46,action:"deleteConfirm",param:null},{ctrlKey:!1,shiftKey:!1,altKey:!1,keyCode:67,action:"centerToPoint",param:{x:0,y:0}},{ctrlKey:!1,shiftKey:!1,altKey:!1,keyCode:27,action:"cancelSelection",param:null}]};var ve={SET_ACTIVE_SNAP_BUTTON:"SET_ACTIVE_SNAP_BUTTON",CLEAR_ACTIVE_SNAP_BUTTON:"CLEAR_ACTIVE_SNAP_BUTTON",SET_ACTIVE_CREATE_BUTTON:"SET_ACTIVE_CREATE_BUTTON",SET_ACTIVE_LANG_BUTTON:"SET_ACTIVE_LANG_BUTTON",SET_ACTIVE_SELECTION_BUTTON:"SET_ACTIVE_SELECTION_BUTTON"};var fe={activeLangButton:"en",defaultLang:"en",activeSnapButtons:new Set,showHelp:!1,showConfirm:{show:!1,message:""},showAlert:{show:!1,message:""}};var ge={SET_TOKEN:"SET_TOKEN",LOGOUT:"LOGOUT"};function Se(){return{type:ge.LOGOUT}}var me=n(28),be=n.n(me),Ee={},we=document.cookie.split("=")[1];we?Ee={name:be()(we).name,token:we}:Ee.name=de.user.name;var ke=Object(v.c)({shapes:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:g},screen:function(){var e,t,n,i,r,s,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,c=arguments.length>1?arguments[1]:void 0,l={point:o.curCoord,screenPoint:o.curScreenPoint};switch(c.type){case m.ADD_SHAPE:return o.shapes.push(c.payload),Object(S.a)({},o);case m.CANCEL:return Object(S.a)({},o,{status:te.FREE,curShape:null,curHelperShapes:null,shapeCreator:null,picker:null,creationStep:"",currentShape:"",cursor:new D(o.curCoord),mouseHandler:new z(l),repaint:Math.random()});case m.CANCEL_SELECTION:return o.shapes.forEach(function(e){return e.setState({selected:!1})}),Object(S.a)({},o,{status:te.FREE,selectedShapes:[],curShape:null,curHelperShapes:null,shapeCreator:null,picker:null,creationStep:"",currentShape:"",cursor:new D(o.curCoord),repaint:Math.random()});case m.CENTER_TO_POINT:var h=c.payload,p=o.realWidth-(o.marginLeft+o.marginRight)*o.pixelRatio,u=o.realHeight-(o.marginTop+o.marginBottom)*o.pixelRatio;return e={x:h.x-p/2-o.marginLeft*o.pixelRatio,y:h.y+u/2+o.marginTop*o.pixelRatio},(n={}).x=e.x+o.realWidth,n.y=e.y-o.realHeight,t=_.screenToReal(o.screenWidth/2,o.screenHeight/2,o.screenWidth,o.screenHeight,e,n),a=Math.sqrt(o.realWidth*o.realWidth+o.realHeight*o.realHeight)/2,i=new L(t,a),null!=o.shapeCreator&&o.shapeCreator.refresh(i),Object(S.a)({},o,{topLeft:e,bottomRight:n});case m.CREATE_SHAPE:return Object(S.a)({},o,{status:te.CREATE,shapeCreator:c.payload,curShape:null,curHelperShapes:null,cursor:new K(o.curCoord),mouseHandler:new ee(l)});case m.DELETE_SELECTED_SHAPES:return Object(S.a)({},o,{shapes:o.shapes.filter(function(e){return!e.getState().selected}),selectedShapes:[],mouseHandler:new z(l),cursor:new D});case m.PAN_SCREEN:return Object(S.a)({},o,{status:te.PAN,prevStatus:o.status,prevCursor:o.cursor,prevMouseHandler:o.mouseHandler,cursor:new Z(o.curCoord),mouseHandler:new $(l)});case m.REFRESH_SNAP_MARKERS:o.snapMarkersManager.clear();var d=!0,y=!1,v=void 0;try{for(var f,g=o.shapes[Symbol.iterator]();!(d=(f=g.next()).done);d=!0){var E=f.value;o.snapMarkersManager.addSnapMarkers(E.getMarkers())}}catch(W){y=!0,v=W}finally{try{d||null==g.return||g.return()}finally{if(y)throw v}}return Object(S.a)({},o);case m.REFRESH_SHAPE_MANAGER:return o.shapeManager=new B(o.shapes),Object(S.a)({},o);case m.REPAINT:return Object(S.a)({},o,{repaint:Math.random()});case m.SELECT_ALL:var w=[];return o.shapes.forEach(function(e,t){t>1&&(e.setState({selected:!0}),w.push(e))}),Object(S.a)({},o,{selectedShapes:w});case m.SELECT_SHAPE:return Object(S.a)({},o,{selectedShapes:c.payload});case m.SET_BOUNDED_CIRCLE:return t=_.screenToReal(o.screenWidth/2,o.screenHeight/2,o.screenWidth,o.screenHeight,o.topLeft,o.bottomRight),a=Math.sqrt(o.realWidth*o.realWidth+o.realHeight*o.realHeight)/2,i=new L(t,a),null!=o.shapeCreator&&o.shapeCreator.refresh(i),Object(S.a)({},o,{boundedCircle:i});case m.SET_DIMENSIONS:return s=(r=c.payload).height*r.realWidth/r.width,Object(S.a)({},o,{screenWidth:r.width,screenHeight:r.height,realWidth:r.realWidth,ratio:r.width/r.height,pixelRatio:r.realWidth/o.screenWidth,realHeight:s,bottomRight:{x:o.topLeft.x+r.realWidth,y:o.topLeft.y-s}});case m.SET_CUR_COORD:return Object(S.a)({},o,{curCoord:Object(S.a)({},c.payload.point),curScreenPoint:Object(S.a)({},c.payload.screenPoint)});case m.SET_CYCLIC_FLAG:return Object(S.a)({},o,{cyclicCreation:c.payload});case m.SET_GRID_SNAP:return Object(S.a)({},o,{gridSnap:c.payload});case m.SET_GRID_VISIBLE:return Object(S.a)({},o,{show:{grid:c.payload}});case m.START_PICKING:return Object(S.a)({},o,{status:te.PICK,pickedData:{data:o.pickedData.data,editId:c.payload.id},picker:c.payload.picker,cursor:new X(o.curCoord),mouseHandler:new J(l)});case m.START_SELECTION:return Object(S.a)({},o,{status:te.SELECT,mouseHandler:new Q(l)});case m.SET_PICKED_DATA:return Object(S.a)({},o,{status:te.PICK_END,pickedData:{data:c.payload,editId:o.pickedData.editId}});case m.SET_PREV_COORD:return Object(S.a)({},o,{prevCoord:Object(S.a)({},c.payload.point),prevScreenPoint:Object(S.a)({},c.payload.screenPoint)});case m.SET_PREV_STATUS:return Object(S.a)({},o,{status:o.prevStatus,cursor:o.prevCursor,mouseHandler:o.prevMouseHandler});case b.SET_PROPERTY:var k=!0,C=!1,O=void 0;try{for(var P,x=o.selectedShapes[Symbol.iterator]();!(k=(P=x.next()).done);k=!0){var T=P.value;T.getProperties().has(c.payload.key)&&T.setProperty({key:c.payload.key,value:c.payload.value})}}catch(W){C=!0,O=W}finally{try{k||null==x.return||x.return()}finally{if(C)throw O}}return Object(S.a)({},o);case m.SET_RATIO:return Object(S.a)({},o,{ratio:c.payload});case m.SET_REAL_WIDTH:return(r=se(c.payload,o.screenWidth,o.screenHeight,o.topLeft,o.gridStep)).gridStepPixels=Math.round(r.gridStep/r.pixelRatio),Object(S.a)({},o,r);case m.SET_SCALE:var R=c.payload,j=R.scale,A=R.anchor;e=o.topLeft;var N=A.x-e.x,I=A.y-e.y;r=se(o.realWidth*j,o.screenWidth,o.screenHeight,e,o.gridStep),N*=j,I*=j,e={x:A.x-N,y:A.y-I},(n={}).x=e.x+r.realWidth,n.y=e.y-r.realHeight,t=_.screenToReal(o.screenWidth/2,o.screenHeight/2,o.screenWidth,o.screenHeight,e,n),a=Math.sqrt(r.realWidth*r.realWidth+r.realHeight*r.realHeight)/2,i=new L(t,a),null!=o.shapeCreator&&o.shapeCreator.refresh(i),r.gridStep/r.pixelRatio<10?r.gridStep<1e6&&(r.gridStep=10*r.gridStep):r.gridStep/r.pixelRatio>100&&r.gridStep>.001&&(r.gridStep=r.gridStep/10),r.gridStepPixels=Math.round(r.gridStep/r.pixelRatio);var M=r.realWidth/o.screenWidth;return Object(S.a)({},o,r,{topLeft:e,bottomRight:n,boundedCircle:i,pixelRatio:M});case m.SET_SCREEN_CONTEXT:return Object(S.a)({},o,{context:c.payload});case m.SET_SELECTION_TYPE:return Object(S.a)({},o,{selectionType:c.payload});case m.SET_SNAP:return!0===c.payload.snap?o.snapMarkersManager.addSnap(c.payload.snapClass):o.snapMarkersManager.removeSnap(c.payload.snapClass),Object(S.a)({},o);case m.SET_STATUS:return Object(S.a)({},o,{status:c.payload.status,prevStatus:c.payload.status,statusParams:c.payload.params});case m.SET_TOP_LEFT:var H=c.payload,F={};return F.x=H.x+o.realWidth,F.y=H.y-o.realHeight,t=_.midPoint(H,F),a=_.distance(H,t),i=new L(t,a),null!=o.shapeCreator&&o.shapeCreator.refresh(i),Object(S.a)({},o,{topLeft:H,bottomRight:F,boundedCircle:i});default:return o}},options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe.SET_LANGUAGE:return document.title=t.payload.title,Object(S.a)({},e,{captions:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge.SET_TOKEN:var n;return t.payload.token?(n=!0===t.payload.remember?";expires=Tue, 19 Jan 2099 00:00:00 GMT":"",document.cookie="token=".concat(t.payload.token).concat(n),Ee={name:be()(t.payload.token).name,token:t.payload.token}):Ee.name=de.user.name,Ee;case ge.LOGOUT:return document.cookie="token=",{};default:return e}},components:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0,n=Object(S.a)({},e),i=t.payload;switch(n.activeButtons||(n.activeButtons=new Set),t.type){case m.CANCEL:return Object(S.a)({},n,{activeCreateButton:null});case ve.SET_ACTIVE_CREATE_BUTTON:return n.activeCreateButton=i,n;case ve.SET_ACTIVE_LANG_BUTTON:return n.activeLangButton=i,n;case ve.SET_ACTIVE_SNAP_BUTTON:return n.activeSnapButtons.add(i),n;case ve.CLEAR_ACTIVE_SNAP_BUTTON:return n.activeSnapButtons.delete(i),n;case m.SET_STATUS:return i.status===te.FREE?Object(S.a)({},e,{activeCreateButton:""}):Object(S.a)({},e);case oe.SHOW_HELP:return Object(S.a)({},e,{showHelp:i});case oe.SHOW_CONFIRM:return Object(S.a)({},e,{showConfirm:i});case oe.SHOW_ALERT:return Object(S.a)({},e,{showAlert:i});case m.DELETE_CONFIRM:return Object(S.a)({},e,{showConfirm:{show:!0,messageKey:"deleteShapes",okAction:m.deleteSelectedShapes.bind(null,!1)}});default:return n}}});window.actions=[];var Ce=Object(v.d)(ke,Object(v.a)(f.a,function(e){return function(e){return function(t){return window.actions.push(t.type),e(t)}}})),Oe=(n(10),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onClick",value:function(){this.props.pressed||(this.props.requestLanguage(this.props.lang),this.props.setActiveLangButtonId(this.props.lang))}},{key:"render",value:function(){var e=this.props.pressed?"langToggleButtonDown":"langToggleButtonUp";return r.a.createElement("div",{id:this.props.lang,className:e+" noselect",title:this.props.title,onClick:this.onClick.bind(this)})}}]),t}(r.a.Component)),Pe=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"langToggleBar"},r.a.createElement(Oe,{lang:"ru",pressed:"ru"===this.props.pressed,setActiveLangButtonId:this.props.setActiveLangButtonId,requestLanguage:this.props.requestLanguage,title:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}),r.a.createElement(Oe,{lang:"en",pressed:"en"===this.props.pressed,setActiveLangButtonId:this.props.setActiveLangButtonId,requestLanguage:this.props.requestLanguage,title:"English"}),r.a.createElement(Oe,{lang:"fr",pressed:"fr"===this.props.pressed,setActiveLangButtonId:this.props.setActiveLangButtonId,requestLanguage:this.props.requestLanguage,title:"Fran\xe7ais"}))}}]),t}(r.a.Component),xe=Object(y.b)(function(e){return{pressed:e.components.activeLangButton}},function(e){return{setActiveLangButtonId:function(t){return e((n=t,{type:ve.SET_ACTIVE_LANG_BUTTON,payload:n}));var n},requestLanguage:function(t){return e(function(e){return function(t){fetch(ae.devUrl+"/lang",{method:"POST",body:JSON.stringify({lang:e}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){return t(ce(e))}).catch(function(e){console.error(e)})}}(t))}}})(Pe),Te=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onClick",value:function(){this.props.showHelp(!0)}},{key:"render",value:function(){return r.a.createElement("button",{className:"helpButton noselect",onClick:this.onClick.bind(this)},"?")}}]),t}(r.a.Component),Re=Object(y.b)(null,function(e){return{showHelp:function(t){e(le(t))}}})(Te),Le=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"logout",value:function(){this.props.showConfirm()}},{key:"render",value:function(){var e=this.props.user.token?r.a.createElement(u.b,{to:"/",onClick:this.logout.bind(this)},r.a.createElement("span",{className:"link"},this.props.cap.buttons.logout)):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.b,{to:"/login"},r.a.createElement("span",{className:"link"},this.props.cap.loginForm.title)),r.a.createElement(u.b,{to:"/register"},r.a.createElement("span",{className:"link"},this.props.cap.registerForm.title)));return r.a.createElement("div",{className:"user noselect"},this.props.user.name?this.props.user.name:"",e)}}]),t}(r.a.Component),je=Object(y.b)(function(e){return{user:e.user,cap:e.options.captions}},function(e){return{showConfirm:function(){return e(he(!0,"logout",Se))}}})(Le),Ae=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement(xe,null),r.a.createElement(Re,null),r.a.createElement(je,null))}}]),t}(r.a.Component),Ne=(n(18),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={pressed:e.activeButtonId===e.id},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onclick",value:function(){if(!this.props.params||!this.props.params.dev){var e=this.props.activeButtonId===this.props.id,t=this.props.params?Object(S.a)({},this.props.params,{id:this.props.id}):{id:this.props.id};this.props.onClick&&this.props.onClick({pressed:e,params:t}),this.props.setButtonFirst&&this.props.setButtonFirst(this.props.id)}}},{key:"render",value:function(){var e=this.props.activeButtonId===this.props.id,t=this.props.title;this.props.params&&this.props.params.dev&&(t="".concat(t," ").concat(this.props.params.dev));var n=e?"toolButtonDown":"toolButtonUp";return n+=" toolButton",r.a.createElement("div",{id:this.props.id,className:n,onClick:this.onclick.bind(this),title:t})}}]),t}(r.a.Component)),_e=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={buttons:e.buttons,firstButton:e.buttons[0].id,expanded:!1},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onMouseEnter",value:function(){this.setState({expanded:!0})}},{key:"onMouseLeave",value:function(){this.setState({expanded:!1})}},{key:"setButtonFirst",value:function(e){this.setState({firstButton:e,expanded:!1})}},{key:"render",value:function(){var e=this,t=[],n=this.props.buttons.find(function(t){return t.id===e.state.firstButton});t.push(r.a.createElement(Ne,{title:n.title,id:n.id,params:n.params,key:0,index:0,onClick:this.props.onClick,activeButtonId:this.props.activeButton,setButtonFirst:this.setButtonFirst.bind(this)}));var i=1;this.props.buttons.forEach(function(n){n.id!==e.state.firstButton&&t.push(r.a.createElement(Ne,{title:n.title,id:n.id,params:n.params,key:i,index:i++,onClick:e.props.onClick,activeButtonId:e.props.activeButton,setButtonFirst:e.setButtonFirst.bind(e)}))});var s="toolButtonGroup";return this.state.expanded?s+=" toolButtonGroupExpanded":s+=" toolButtonGroupCollapsed",r.a.createElement("div",{className:s,onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this)},t)}}]),t}(r.a.Component),Ie=n(24),Me=n(25),De=function(){function e(t){Object(o.a)(this,e),this.pos=t}return Object(c.a)(e,[{key:"getMarker",value:function(){return this.markerShape}},{key:"getPos",value:function(){return this.pos}},{key:"setMarker",value:function(e,t){this.pos=e,this.markerShape=t}},{key:"refresh",value:function(e,t){this.markerShape.refresh(e,t)}}]),e}();De.MARKER_SIZE=5,De.SNAP_MARKER_SIZE=5;var Be=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).circle=new L,n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"refresh",value:function(e,n){this.circle.center=this.getPos(),this.circle.radius=e.width/n.width*De.SNAP_MARKER_SIZE;var i=new qe(this.circle);i.setStyle(new w(E.GREEN,w.SOLID)),this.setMarker(this.circle.center,i),Object(H.a)(Object(h.a)(t.prototype),"refresh",this).call(this,e,n)}}]),t}(De);Be.caption="center points";var Ke=function(e){function t(e,n){var i;return Object(o.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this))).point=e,i.setActive(n),i}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setPoint",value:function(e){this.point=e}},{key:"setActive",value:function(e){this.active=e,this.setColor(e?E.ACTIVE_POINT_MARKER:E.POINT_MARKER)}},{key:"drawSelf",value:function(e,t,n){this.refresh(t,n),e.fillStyle=this.getStyle().getColor(),e.lineWidth=this.getStyle().getWidth(),e.beginPath(),e.arc(this.center.x,this.center.y,this.radius,0,2*Math.PI),e.fill()}},{key:"refresh",value:function(e,t){this.center=_.realToScreen(this.point,e,t),this.radius=De.MARKER_SIZE/2}}]),t}(I);Ke.caption="center points";var He=function(){function e(){Object(o.a)(this,e),this.i=0}return Object(c.a)(e,[{key:"getShape",value:function(){return this.shape}},{key:"getHelperShapes",value:function(){return this.helperShapes}},{key:"getPickedData",value:function(){return this.data}},{key:"isNext",value:function(){return this.i<this.points.length}},{key:"setNextPoint",value:function(e){this.setCurrent(e),this.i++}},{key:"refresh",value:function(e){this.boundedCircle=e,null!=this.points[this.i]&&this.setControlPoints()}},{key:"setStyle",value:function(e){this.style=e}},{key:"getCurrentStep",value:function(){return this.i}},{key:"getName",value:function(){return this.name}}]),e}(),Fe=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).name="PointPicker",e.points=[new k],e.helperShapes=[],e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setCurrent",value:function(e){this.isNext()&&(this.points[this.i]=e,this.data=e)}},{key:"reset",value:function(){return new t(new w(this.style.getColor(),this.style.getType()))}}]),t}(He);Fe.caption="";var We=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this))).p=[new k,new k,new k],n.triangle=e,n.model=e,n.controlPoints=[{point:n.triangle.points[0],show:!1,selected:!1},{point:n.triangle.points[1],show:!1,selected:!1},{point:n.triangle.points[2],show:!1,selected:!1}];var i=!0,r=!1,s=void 0;try{for(var a,c=n.controlPoints[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var p=a.value;p.marker=new Ke(p.point,!1)}}catch(u){r=!0,s=u}finally{try{i||null==c.return||c.return()}finally{if(r)throw s}}return n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawSelf",value:function(e,t,n){this.refresh(t,n),e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=this.getStyle().getWidth(),e.beginPath(),e.moveTo(this.p[0].x,this.p[0].y),e.lineTo(this.p[1].x,this.p[1].y),e.lineTo(this.p[2].x,this.p[2].y),e.lineTo(this.p[0].x,this.p[0].y),e.stroke()}},{key:"refresh",value:function(e,t){for(var n=0;n<3;n++)this.p[n]=_.realToScreen(this.triangle.points[n],e,t);this.activePoint&&(this.activePointMarker=new Ke(this.activePoint))}},{key:"setActivePoint",value:function(e){Object(H.a)(Object(h.a)(t.prototype),"setActivePoint",this).call(this),"P1"===e&&(this.controlPoints[0].selected=!0,this.controlPoints[0].marker.setActive(!0)),"P2"===e&&(this.controlPoints[1].selected=!0,this.controlPoints[1].marker.setActive(!0)),"P3"===e&&(this.controlPoints[2].selected=!0,this.controlPoints[2].marker.setActive(!0))}},{key:"getMarkers",value:function(){var e=[];return e.push(new Ye(this.triangle.points[0])),e.push(new Ye(this.triangle.points[1])),e.push(new Ye(this.triangle.points[2])),e.push(new Ue(_.midPoint(this.triangle.points[0],this.triangle.points[1]))),e.push(new Ue(_.midPoint(this.triangle.points[1],this.triangle.points[2]))),e.push(new Ue(_.midPoint(this.triangle.points[2],this.triangle.points[0]))),e}},{key:"getProperties",value:function(){var e=new Map;return e.set("Title",{value:"Triangle",regexp:/\s*/}),e.set("P1",{value:{x:this.triangle.points[0].x,y:this.triangle.points[0].y},picker:Fe,regexp:/^-?\d*\.?\d*$/}),e.set("P2",{value:{x:this.triangle.points[1].x,y:this.triangle.points[1].y},picker:Fe,regexp:/^-?\d*\.?\d*$/}),e.set("P3",{value:{x:this.triangle.points[2].x,y:this.triangle.points[2].y},picker:Fe,regexp:/^-?\d*\.?\d*$/}),e}},{key:"setProperty",value:function(e){switch(Object(H.a)(Object(h.a)(t.prototype),"setProperty",this).call(this,e),e.key){case"P1":this.triangle.points[0].x=e.value.x,this.triangle.points[0].y=e.value.y,this.controlPoints[0].point=this.triangle.points[0];break;case"P2":this.triangle.points[1].x=e.value.x,this.triangle.points[1].y=e.value.y,this.controlPoints[1].point=this.triangle.points[1];break;case"P3":this.triangle.points[2].x=e.value.x,this.triangle.points[2].y=e.value.y,this.controlPoints[2].point=this.triangle.points[2]}}},{key:"getDistance",value:function(e){var t=new O(this.triangle.points[0],this.triangle.points[1]),n=new O(this.triangle.points[1],this.triangle.points[2]),i=new O(this.triangle.points[2],this.triangle.points[0]);return Math.min(_.PointToLineDistance(e,t),_.PointToLineDistance(e,n),_.PointToLineDistance(e,i))}},{key:"isInRect",value:function(e,t){var n=[_.pointInRect(this.triangle.points[0],e,t),_.pointInRect(this.triangle.points[1],e,t),_.pointInRect(this.triangle.points[2],e,t)].every(function(e){return!0===e});return{cross:[N.LineRectangle(new O(this.triangle.points[0],this.triangle.points[1]),e,t),N.LineRectangle(new O(this.triangle.points[1],this.triangle.points[2]),e,t),N.LineRectangle(new O(this.triangle.points[2],this.triangle.points[0]),e,t)].some(function(e){return e.length>0}),full:n}}},{key:"toString",value:function(){return"Triangle"}}]),t}(I),Ue=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).triangle=new j,n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"refresh",value:function(e,n){var i=this.getPos(),r=e.width/n.width*De.SNAP_MARKER_SIZE,s=new Array(3);s[0]=new k(i.x,i.y+r),s[1]=_.rotatePoint(s[0],2*Math.PI/3,i),s[2]=_.rotatePoint(s[1],2*Math.PI/3,i),this.triangle=new j(s);var a=new We(this.triangle);a.setStyle(new w(E.GREEN,w.SOLID)),this.setMarker(i,a),Object(H.a)(Object(h.a)(t.prototype),"refresh",this).call(this,e,n)}}]),t}(De);Ue.caption="middle points";var Ge=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this))).rectangle=e,n.model=e,n.rect=new R,n.controlPoints=[{point:n.rectangle.topLeft,show:!1,selected:!1},{point:n.rectangle.bottomRight,show:!1,selected:!1}];var i=!0,r=!1,s=void 0;try{for(var a,c=n.controlPoints[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var p=a.value;p.marker=new Ke(p.point,!1)}}catch(u){r=!0,s=u}finally{try{i||null==c.return||c.return()}finally{if(r)throw s}}return n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawSelf",value:function(e,t,n){this.refresh(t,n),e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=this.getStyle().getWidth(),e.strokeRect(this.rect.topLeft.x,this.rect.topLeft.y,this.rect.width,this.rect.height)}},{key:"refresh",value:function(e,t){this.rect.topLeft=_.realToScreen(this.rectangle.topLeft,e,t),this.rect.width=_.realToScreenLength(this.rectangle.width,e.width,t.width),this.rect.height=_.realToScreenLength(this.rectangle.height,e.height,t.height),this.activePoint&&(this.activePointMarker=new Ke(this.activePoint))}},{key:"getMarkers",value:function(){var e=[];return e.push(new Ye(this.rectangle.topLeft)),e.push(new Ye(new k(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y))),e.push(new Ye(new k(this.rectangle.topLeft.x,this.rectangle.topLeft.y-this.rectangle.height))),e.push(new Ye(new k(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y-this.rectangle.height))),e.push(new Ue(_.midPoint(this.rectangle.topLeft,new k(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y)))),e.push(new Ue(_.midPoint(new k(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y),new k(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y-this.rectangle.height)))),e.push(new Ue(_.midPoint(new k(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y-this.rectangle.height),new k(this.rectangle.topLeft.x,this.rectangle.topLeft.y-this.rectangle.height)))),e.push(new Ue(_.midPoint(new k(this.rectangle.topLeft.x,this.rectangle.topLeft.y-this.rectangle.height),this.rectangle.topLeft))),e}},{key:"setActivePoint",value:function(e){Object(H.a)(Object(h.a)(t.prototype),"setActivePoint",this).call(this),"P1"===e&&(this.controlPoints[0].selected=!0,this.controlPoints[0].marker.setActive(!0)),"P2"===e&&(this.controlPoints[1].selected=!0,this.controlPoints[1].marker.setActive(!0))}},{key:"getProperties",value:function(){var e=new Map;return e.set("Title",{value:"Rectangle",regexp:/\s*/}),e.set("P1",{value:{x:this.rectangle.topLeft.x,y:this.rectangle.topLeft.y},picker:Fe,regexp:/^-?\d*\.?\d*$/}),e.set("P2",{value:{x:this.rectangle.bottomRight.x,y:this.rectangle.bottomRight.y},picker:Fe,regexp:/^-?\d*\.?\d*$/}),e}},{key:"setProperty",value:function(e){switch(Object(H.a)(Object(h.a)(t.prototype),"setProperty",this).call(this,e),e.key){case"P1":this.rectangle.topLeft.x=e.value.x,this.rectangle.topLeft.y=e.value.y,this.controlPoints[0].point=this.rectangle.topLeft;break;case"P2":this.rectangle.bottomRight.x=e.value.x,this.rectangle.bottomRight.y=e.value.y,this.controlPoints[1].point=this.rectangle.bottomRight}this.rectangle.width=this.rectangle.bottomRight.x-this.rectangle.topLeft.x,this.rectangle.height=this.rectangle.topLeft.y-this.rectangle.bottomRight.y}},{key:"getDistance",value:function(e){var t=this.rectangle.topLeft,n=new k(t.x+this.rectangle.width,t.y),i=new k(t.x,t.y-this.rectangle.height),r=new k(t.x+this.rectangle.width,t.y-this.rectangle.height),s=new O(t,n),a=new O(i,r),o=new O(n,r),c=new O(t,i);return Math.min(_.PointToLineDistance(e,s),_.PointToLineDistance(e,c),_.PointToLineDistance(e,a),_.PointToLineDistance(e,o))}},{key:"isInRect",value:function(e,t){var n=[_.pointInRect(this.rectangle.topLeft,e,t),_.pointInRect(this.rectangle.bottomRight,e,t)].every(function(e){return!0===e});return{cross:N.RectangleRectangle(e,t,this.rectangle.topLeft,this.rectangle.bottomRight).length>0,full:n}}},{key:"toString",value:function(){return"Rectangle"}}]),t}(I),Ye=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).rect=new R,n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"refresh",value:function(e,n){var i=this.getPos();this.rect.width=e.width/n.width*De.SNAP_MARKER_SIZE,this.rect.height=this.rect.width,this.rect.topLeft.x=i.x-this.rect.width/2,this.rect.topLeft.y=i.y+this.rect.height/2;var r=new Ge(this.rect);r.setStyle(new w(E.DARK_ORANGE,w.SOLID,3)),this.setMarker(i,r),Object(H.a)(Object(h.a)(t.prototype),"refresh",this).call(this,e,n)}}]),t}(De);Ye.caption="end points";var Ve=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this))).p=[],n.p[0]=e.p1,n.p[1]=e.p2,n.line=e,n.model=e,n.controlPoints=[{point:n.p[0],show:!1,selected:!1},{point:n.p[1],show:!1,selected:!1}];var i=!0,r=!1,s=void 0;try{for(var a,c=n.controlPoints[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var p=a.value;p.marker=new Ke(p.point,!1)}}catch(u){r=!0,s=u}finally{try{i||null==c.return||c.return()}finally{if(r)throw s}}return n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawSelf",value:function(e,t,n){this.refresh(t,n),e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=this.getStyle().getWidth(),e.beginPath(),e.moveTo(this.p0.x,this.p0.y),e.lineTo(this.p1.x,this.p1.y),e.stroke()}},{key:"refresh",value:function(e,t){this.p0=_.realToScreen(this.line.p1,e,t),this.p1=_.realToScreen(this.line.p2,e,t)}},{key:"getMarkers",value:function(){var e=[];return e.push(new Ye(this.line.p1)),e.push(new Ye(this.line.p2)),e.push(new Ue(_.midPoint(this.line.p1,this.line.p2))),e}},{key:"setActivePoint",value:function(e){Object(H.a)(Object(h.a)(t.prototype),"setActivePoint",this).call(this),"P1"===e&&(this.controlPoints[0].selected=!0,this.controlPoints[0].marker.setActive(!0)),"P2"===e&&(this.controlPoints[1].selected=!0,this.controlPoints[1].marker.setActive(!0))}},{key:"getProperties",value:function(){var e=new Map;return e.set("Title",{value:"Line",regexp:/\s*/}),e.set("P1",{value:{x:this.line.p1.x,y:this.line.p1.y},picker:Fe,regexp:/^-?\d*\.?\d*$/}),e.set("P2",{value:{x:this.line.p2.x,y:this.line.p2.y},picker:Fe,regexp:/^-?\d*\.?\d*$/}),e}},{key:"setProperty",value:function(e){switch(Object(H.a)(Object(h.a)(t.prototype),"setProperty",this).call(this,e),e.key){case"P1":this.line.p1.x=e.value.x,this.line.p1.y=e.value.y,this.controlPoints[0].point=this.line.p1;break;case"P2":this.line.p2.x=e.value.x,this.line.p2.y=e.value.y,this.controlPoints[1].point=this.line.p2}}},{key:"getDistance",value:function(e){return _.PointToLineDistance(e,this.line)}},{key:"isInRect",value:function(e,t){var n=[_.pointInRect(this.line.p1,e,t),_.pointInRect(this.line.p2,e,t)].every(function(e){return!0===e});return{cross:N.LineRectangle(this.line,e,t).length>0,full:n}}},{key:"toString",value:function(){return"Line P1(".concat(this.line.p1.x,",").concat(this.line.p1.y,") P2(").concat(this.line.p2.x,",").concat(this.line.p2.y,")")}}]),t}(I),Ze=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).p=i,e.text=n,e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawSelf",value:function(e,n,i){this.refresh(n,i),e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=this.getStyle().getWidth(),console.log(e.lineWidth),e.save(),e.font=this.font;var r=Object(S.a)({},this.p0);if(this.anchor===t.CENTER){var s=e.measureText(this.text).width/2;r.x=this.p0.x-s*Math.cos(this.angle),r.y=this.p0.y-s*Math.sin(this.angle)}var a=_.rotatePoint(r,this.angle,{x:0,y:0});e.translate(r.x-a.x,r.y-a.y),e.rotate(this.angle),e.strokeText(this.text,r.x,r.y),e.restore()}},{key:"refresh",value:function(e,t){this.p0=_.realToScreen(this.p,e,t)}},{key:"rotate",value:function(e){this.angle=e}},{key:"getMarkers",value:function(){return[]}},{key:"setText",value:function(e){this.text=e}},{key:"setFont",value:function(e){this.font=e}},{key:"setPoint",value:function(e){this.p=e}},{key:"setAnchor",value:function(e){this.anchor=e}},{key:"setActivePoint",value:function(e){this.activePoint=null,"P1"===e&&(this.activePoint=this.p)}},{key:"getProperties",value:function(){return new Map}},{key:"setProperty",value:function(e){switch(Object(H.a)(Object(h.a)(t.prototype),"setProperty",this).call(this,e),e.key){case"P1":this.line.p1.x=e.value.x,this.line.p1.y=e.value.y;break;case"P2":this.line.p2.x=e.value.x,this.line.p2.y=e.value.y}}},{key:"getDistance",value:function(e){return null}},{key:"isInRect",value:function(e,t){return{cross:!1,full:!1}}},{key:"toString",value:function(){return"Line P1(".concat(this.line.p1.x,",").concat(this.line.p1.y,") P2(").concat(this.line.p2.x,",").concat(this.line.p2.y,")")}}]),t}(I);Ze.CENTER=1;var Xe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new w(E.BLACK,w.DASH);return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).name="DistancePicker",e.line=new O(new k,new k),e.boundedCircle=new L(new k,0),e.points=[new k,new k],e.shape=new Ve(e.line),e.text=new Ze,e.text.setAnchor(Ze.CENTER),e.text.setFont("10px sans-serif"),e.style=n,e.shape.setStyle(n),e.helperShapes=[e.text],e.xAxe=new A({x:1,y:0},{x:0,y:0}),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setCurrent",value:function(e){if(this.isNext()){this.points[this.i]=e,0===this.i&&(this.points[1]=this.points[0]),this.i>0&&(this.line=new O(this.points[0],this.points[1])),this.data=_.distance(this.points[0],this.points[1]),this.shape=new Ve(this.line),this.shape.setStyle(this.style),this.text.setText(this.data.toFixed(4)),this.text.setPoint(_.midPoint(this.points[0],this.points[1]));var t=_.angleVectors(new A(this.points[1],this.points[0]),this.xAxe);t<Math.PI/2?t*=Math.sign(this.points[0].y-this.points[1].y):t=(Math.PI-t)*Math.sign(this.points[1].y-this.points[0].y),this.text.rotate(t),this.setControlPoints()}}},{key:"setControlPoints",value:function(){}},{key:"reset",value:function(){return new t(new w(this.style.getColor(),this.style.getType()))}}]),t}(He);Xe.caption="";var qe=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this))).p=new k,n.circle=e,n.model=e,n.setStyle(new w),n.controlPoints=[{point:e.center,show:!1,selected:!1}];var i=!0,r=!1,s=void 0;try{for(var a,c=n.controlPoints[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var p=a.value;p.marker=new Ke(p.point,!1)}}catch(u){r=!0,s=u}finally{try{i||null==c.return||c.return()}finally{if(r)throw s}}return n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawSelf",value:function(e,t,n){this.refresh(t,n),e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=this.getStyle().getWidth(),e.beginPath(),e.arc(this.screenCenter.x,this.screenCenter.y,this.screenRadius,0,2*Math.PI),e.stroke()}},{key:"refresh",value:function(e,t){this.screenCenter=_.realToScreen(this.circle.center,e,t),this.screenRadius=_.realToScreenLength(this.circle.radius,e.width,t.width),this.activePoint&&(this.activePointMarker=new Ke(this.activePoint))}},{key:"setActivePoint",value:function(e){Object(H.a)(Object(h.a)(t.prototype),"setActivePoint",this).call(this),"Center"===e&&(this.controlPoints[0].selected=!0,this.controlPoints[0].marker.setActive(!0))}},{key:"getMarkers",value:function(){var e=[];return e.push(new Be(this.circle.center)),e}},{key:"getProperties",value:function(){var e=new Map;return e.set("Title",{value:"Circle",regexp:/\s*/}),e.set("Center",{value:{x:this.circle.center.x,y:this.circle.center.y},picker:Fe,regexp:/^-?\d*\.?\d*$/}),e.set("Radius",{value:this.circle.radius,picker:Xe,regexp:/^\d*\.?\d*$/}),e}},{key:"setProperty",value:function(e){switch(Object(H.a)(Object(h.a)(t.prototype),"setProperty",this).call(this,e),e.key){case"Center":this.circle.center.x=e.value.x,this.circle.center.y=e.value.y,this.controlPoints[0].point=this.circle.center;break;case"Radius":this.circle.radius=e.value}}},{key:"getDistance",value:function(e){return Math.abs(_.distance(e,this.circle.center)-this.circle.radius)}},{key:"isInRect",value:function(e,t){var n=e.x-this.circle.radius,i=e.y+this.circle.radius,r=t.x+this.circle.radius,s=t.y-this.circle.radius,a=e.x+this.circle.radius,o=e.y-this.circle.radius,c=t.x-this.circle.radius,l=t.y+this.circle.radius,h=this.circle.center,p=!1;return[Math.sign(_.distance(h,{x:e.x,y:e.y})-this.circle.radius),Math.sign(_.distance(h,{x:t.x,y:e.y})-this.circle.radius),Math.sign(_.distance(h,{x:t.x,y:t.y})-this.circle.radius),Math.sign(_.distance(h,{x:e.x,y:t.y})-this.circle.radius)].every(function(e){return e<0})?{cross:!1,full:!1}:!0===_.pointInRectByPoints(h.x,h.y,a,o,c,l)?{cross:!1,full:!0}:(_.pointInRectByPoints(h.x,h.y,n,i,r,s)&&(p=!0,_.pointInRectByPoints(h.x,h.y,n,i,e.x,e.y)&&_.distance(h,{x:e.x,y:e.y})>this.circle.radius&&(p=!1),_.pointInRectByPoints(h.x,h.y,t.x,i,r,e.y)&&_.distance(h,{x:t.x,y:e.y})>this.circle.radius&&(p=!1),_.pointInRectByPoints(h.x,h.y,t.x,t.y,r,s)&&_.distance(h,{x:t.x,y:t.y})>this.circle.radius&&(p=!1),_.pointInRectByPoints(h.x,h.y,n,t.y,e.x,s)&&_.distance(h,{x:e.x,y:t.y})>this.circle.radius&&(p=!1)),{cross:p,full:!1})}},{key:"toString",value:function(){return"Center("+this.circle.center.x+","+this.circle.center.y+") radius("+this.circle.radius+")"}}]),t}(I),ze=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).curPoint=new C,n.prevPoint=new C,n.gridStep=1,n.gridStepPixels=1,n.dragGrid=!1,n.gridPointsX=[],n.gridPointsY=[],n.gridNumbersX=[],n.gridNumbersY=[],n.dragX0=0,n.dragY0=0,n.drag=!1,n.lbut=0,n.mbut=1,window.KEYDOWNHANDLE=!0,n.refCanvas=r.a.createRef(),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"getRealRect",value:function(){var e=new R;return e.topLeft=this.props.topLeft,e.bottomRight=this.props.bottomRight,e.width=this.props.bottomRight.x-this.props.topLeft.x,e.height=this.props.topLeft.y-this.props.bottomRight.y,e}},{key:"getScreenRect",value:function(){var e=new R;return e.topLeft.x=0,e.topLeft.y=0,e.width=this.props.screenWidth,e.height=this.props.screenHeight,e}},{key:"test",value:function(){var e=new Ze("Text",{x:0,y:0});e.setStyle(new w(E.BLACK,w.SOLID)),e.rotate(45*Math.PI/180),this.props.shapes.push(e)}},{key:"drawCursor",value:function(e){this.props.cursor.setCoord(this.props.curCoord),this.drawShape(this.props.cursor,e)}},{key:"drawGrid",value:function(e){e.strokeStyle=E.GRID;var t=new w(E.GRAY,w.SOLID),n=new w(E.GRAY,w.DASH),i=Math.round(this.props.topLeft.x/this.props.gridStep)*this.props.gridStep,r=Math.round(this.props.topLeft.y/this.props.gridStep)*this.props.gridStep,s=!1,a=!1,o=0,c=0,l=Math.round(i/this.props.gridStep),h=Math.round(r/this.props.gridStep),p=Math.round(this.props.realWidth/this.props.gridStep),u=Math.round(this.props.realHeight/this.props.gridStep);for(this.gridPointsX=new Array(p),this.gridPointsY=new Array(u),this.gridNumbersX=new Array(p),this.gridNumbersY=new Array(u);!s||!a;){if(!s){var d=i+this.props.gridStep*o,y=_.realToScreen(new k(d,this.props.topLeft.y),this.getRealRect(),this.getScreenRect());l%10===0?e.setLineDash(t.getStroke()):e.setLineDash(n.getStroke()),this.props.show.grid&&(e.beginPath(),e.moveTo(y.x,0),e.lineTo(y.x,this.props.screenHeight),e.stroke()),this.gridPointsX[o]=y.x,this.gridNumbersX[o]=d,o++,l++,d>this.props.topLeft.x+this.props.realWidth&&(s=!0)}if(!a){var v=r-this.props.gridStep*c,f=_.realToScreen(new k(this.props.topLeft.x,v),this.getRealRect(),this.getScreenRect());h%10===0?e.setLineDash(t.getStroke()):e.setLineDash(n.getStroke()),h--,this.props.show.grid&&(e.beginPath(),e.moveTo(0,f.y),e.lineTo(this.props.screenWidth,f.y),e.stroke()),this.gridPointsY[c]=f.y,this.gridNumbersY[c]=v,c++,v<this.props.topLeft.y-this.props.realHeight&&(a=!0)}}e.setLineDash(t.getStroke())}},{key:"drawCoordinates",value:function(e){e.font="10px sans-serif",e.strokeStyle="black";var t,n=0,i=0;this.props.gridStep>=.001&&(i=3),this.props.gridStep>=.01&&(i=2),this.props.gridStep>=.1&&(i=1),this.props.gridStep>=1&&(i=0);var r=0,s="",a=!0,o=!1,c=void 0;try{for(var l,h=this.gridNumbersX[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){var p=l.value;if(null!==p){var u=p.toFixed(i);r<u.length&&(s=u,r=u.length)}}}catch(A){o=!0,c=A}finally{try{a||null==h.return||h.return()}finally{if(o)throw c}}t=e.measureText(s).width;var d=!0,y=!1,v=void 0;try{for(var f,g=this.gridPointsX[Symbol.iterator]();!(d=(f=g.next()).done);d=!0){var S=f.value;if(null!==S){if(S>this.props.marginLeft&&S<this.props.screenWidth-this.props.marginRight){var m=this.gridNumbersX[n].toFixed(i),b=1,E=t/this.props.gridStepPixels;E>=1&&(b=2),E>=1.5&&(b=5),Math.round(this.gridNumbersX[n]/this.props.gridStep)%b===0&&e.strokeText(m,S-e.measureText(m).width/2,this.props.marginTop-5)}n++}}}catch(A){y=!0,v=A}finally{try{d||null==g.return||g.return()}finally{if(y)throw v}}n=0;var w=!0,k=!1,C=void 0;try{for(var O,P=this.gridPointsY[Symbol.iterator]();!(w=(O=P.next()).done);w=!0){var x=O.value;if(null!==x){if(x>this.props.marginTop&&x<this.props.screenHeight-this.props.marginBottom){var T=this.gridNumbersY[n].toFixed(i);t=e.measureText(T).width;var R=e.measureText("12").width,L=1,j=R/this.props.gridStepPixels;j>.8&&j<1.5&&(L=2),j>=1.5&&(L=5),Math.round(this.gridNumbersY[n]/this.props.gridStep)%L===0&&e.strokeText(T,this.props.marginLeft-t,x+R/3)}n++}}}catch(A){k=!0,C=A}finally{try{w||null==P.return||P.return()}finally{if(k)throw C}}}},{key:"drawShape",value:function(e,t){e.drawSelf(t,this.getRealRect(),this.getScreenRect())}},{key:"paint",value:function(e){e.fillStyle="white",e.lineWidth=1,e.lineJoin="round",e.fillRect(0,0,this.props.screenWidth,this.props.screenHeight),this.drawGrid(e),this.drawShape(this.props.xAxe,e),this.drawShape(this.props.yAxe,e);var t="X=".concat(this.props.curCoord.x.toFixed(3)," Y=").concat(this.props.curCoord.y.toFixed(3)," "),n="";this.props.shapeCreator&&(n=this.props.captions.creators[this.props.shapeCreator.getName()].description);var i="";if(this.props.status===te.CREATE&&(i=this.props.captions.creators[this.props.shapeCreator.getName()].steps[this.props.shapeCreator.getCurrentStep()],t+="".concat(n,": ").concat(i)),this.props.shapeCreator){var r=null;if(null!=(r=this.props.shapeCreator.getHelperShapes())){var s=!0,a=!1,o=void 0;try{for(var c,l=r[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var h=c.value;this.drawShape(h,e)}}catch(_){a=!0,o=_}finally{try{s||null==l.return||l.return()}finally{if(a)throw o}}}var p;null!=(p=this.props.shapeCreator.getShape())&&this.drawShape(p,e)}if(this.props.status===te.PICK&&(i=this.props.captions.pickers[this.props.picker.getName()].steps[this.props.picker.getCurrentStep()],t+="".concat(i)),this.props.picker){var u=this.props.picker.getShape();null!=u&&this.drawShape(u,e);var d=this.props.picker.getHelperShapes();if(null!=d){var y=!0,v=!1,f=void 0;try{for(var g,S=d[Symbol.iterator]();!(y=(g=S.next()).done);y=!0){var m=g.value;this.drawShape(m,e)}}catch(_){v=!0,f=_}finally{try{y||null==S.return||S.return()}finally{if(v)throw f}}}}var b=!0,E=!1,k=void 0;try{for(var C,O=this.props.shapes[Symbol.iterator]();!(b=(C=O.next()).done);b=!0){var P=C.value;this.drawShape(P,e);var x=!0,T=!1,R=void 0;try{for(var L,j=P.controlPoints[Symbol.iterator]();!(x=(L=j.next()).done);x=!0){var A=L.value;A.show&&this.drawShape(A.marker,e)}}catch(_){T=!0,R=_}finally{try{x||null==j.return||j.return()}finally{if(T)throw R}}}}catch(_){E=!0,k=_}finally{try{b||null==O.return||O.return()}finally{if(E)throw k}}if(e.lineWidth=1,e.setLineDash(w.SOLID),e.fillStyle="white",e.fillRect(0,0,this.props.screenWidth-this.props.marginRight,this.props.marginTop),e.fillRect(0,0,this.props.marginLeft,this.props.screenHeight),e.fillRect(this.props.screenWidth-this.props.marginRight,0,this.props.screenWidth,this.props.screenHeight),e.fillRect(this.props.marginLeft,this.props.screenHeight-this.props.marginBottom,this.props.screenWidth-this.props.marginRight,this.props.screenHeight-this.props.marginTop),e.strokeStyle="black",e.strokeRect(this.props.marginLeft,this.props.marginTop,this.props.screenWidth-this.props.marginRight-this.props.marginLeft,this.props.screenHeight-this.props.marginBottom-this.props.marginTop),this.drawCoordinates(e),e.font="12px sans-serif",e.strokeText(t,this.props.marginLeft,this.props.screenHeight-this.props.statusBar),this.props.status!==te.FREE){var N=this.props.snapMarkersManager.getActiveMarker();null!=N&&(N.refresh(this.getRealRect(),this.getScreenRect()),this.drawShape(N.getMarker(),e))}e.lineWidth=1,this.props.status===te.SELECT&&this.drawShape(this.props.selectionManager.getSelectionShape(),e),this.props.mouseHandler.mouseOnScreen&&this.drawCursor(e)}},{key:"isOutRect",value:function(e){return e.x<this.props.marginLeft||e.x>this.props.screenWidth-this.props.marginRight||e.y<this.props.marginTop||e.y>this.props.screenHeight-this.props.marginBottom}},{key:"mmoveHandle",value:function(e){var t=e.target.getBoundingClientRect(),n={x:e.clientX-t.left,y:e.clientY-t.top};this.props.mouseHandler.move({curPoint:n,screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey})}},{key:"mmove",value:function(e){var t=e.target.getBoundingClientRect(),n={x:e.clientX-t.left,y:e.clientY-t.top};this.mouseOnScreen=!this.isOutRect(n);var i={x:this.props.curCoord.x,y:this.props.curCoord.y};if(this.props.status===te.PAN){i=_.screenToReal(n.x,n.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight);var r=n.x-this.dragX0,s=n.y-this.dragY0;this.dragX0=n.x,this.dragY0=n.y;var a=this.props.realWidth*r/this.props.screenWidth,o=this.props.realHeight*s/this.props.screenHeight;return this.props.actions.setTopLeft({x:this.props.topLeft.x-a,y:this.props.topLeft.y+o}),void this.props.actions.setBoundedCircle()}this.isOutRect(n)&&(n.x=this.prevPoint.x,n.y=this.prevPoint.y),(i=_.screenToReal(n.x,n.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight)).x=+i.x.toFixed(4),i.y=+i.y.toFixed(4),this.prevPoint.x=n.x,this.prevPoint.y=n.y;var c={x:i.x,y:i.y};if(this.props.gridSnap&&this.props.status!==te.FREE){var l=Math.round(c.x/this.props.gridStep)*this.props.gridStep,h=Math.round(c.y/this.props.gridStep)*this.props.gridStep,p=l-c.x,u=h-c.y;Math.sqrt(p*p+u*u)<=this.props.snapMinDist*this.props.pixelRatio&&(this.isOutRect(_.realToScreen({x:l,y:h},this.getRealRect(),this.getScreenRect()))||(c.x=l,c.y=h,n=_.realToScreen(c,this.getRealRect(),this.getScreenRect())))}if(this.props.status!==te.FREE){var d=this.props.snapMarkersManager.getDistanceToNearestMarker(c,this.props.snapDist*this.props.pixelRatio);d>=0&&d<=this.props.snapMinDist*this.props.pixelRatio&&(c=this.props.snapMarkersManager.getActiveMarker().getPos(),n=_.realToScreen(c,this.getRealRect(),this.getScreenRect()))}i=c,this.props.status===te.FREE&&this.props.shapeManager.findShapeNearPoint(i,this.props.selectDist*this.props.pixelRatio),this.props.status===te.SELECT&&(this.props.selectionManager.setCurrent(i),this.props.shapeManager.findShapeInRect(this.prevCoord,i)),this.props.status===te.CREATE&&this.props.shapeCreator.setCurrent(i),this.props.status===te.PICK&&this.props.picker.setCurrent(i),this.props.actions.setCurCoord(i)}},{key:"mdownHandle",value:function(e){if(1===e.button){var t=e.target.getBoundingClientRect(),n={x:e.clientX-t.left,y:e.clientY-t.top};this.dragX0=n.x,this.dragY0=n.y,this.props.actions.setScreenStatus(te.PAN),e.preventDefault()}if(0===e.button){var i=e.target.getBoundingClientRect();this.curPoint.x=e.clientX-i.left,this.curPoint.y=e.clientY-i.top,this.props.mouseHandler.down({curPoint:this.curPoint,screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey}),this.props.actions.repaint(),e.preventDefault()}}},{key:"mdown",value:function(e){if(1===e.button){var t=e.target.getBoundingClientRect(),n={x:e.clientX-t.left,y:e.clientY-t.top};this.dragX0=n.x,this.dragY0=n.y,this.props.actions.setScreenStatus(te.PAN),e.preventDefault()}if(0===e.button){var i=e.target.getBoundingClientRect();this.curPoint.x=e.clientX-i.left,this.curPoint.y=e.clientY-i.top,this.props.status===te.FREE&&(this.prevCoord=_.screenToReal(this.curPoint.x,this.curPoint.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight),this.props.selectionManager.reset(),this.props.selectionManager.setNext(_.screenToReal(this.curPoint.x,this.curPoint.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight)),this.props.actions.setScreenStatus(te.SELECT)),this.props.actions.repaint(),e.preventDefault()}}},{key:"mupHandle",value:function(e){1===e.button&&this.props.actions.setPrevStatus(),0===e.button&&this.props.mouseHandler.up({screenProps:this.props})}},{key:"mup",value:function(e){1===e.button&&this.props.actions.setPrevStatus(),0===e.button&&this.props.status===te.SELECT&&this.props.actions.cancel()}},{key:"mwheelHandle",value:function(e){if(this.props.status!==te.PAN){var t=e.target.getBoundingClientRect(),n=_.screenToReal(e.clientX-t.left,e.clientY-t.top,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight);this.props.mouseHandler.wheel({deltaY:e.deltaY,point:n,screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey}),e.preventDefault()}}},{key:"mleaveHandle",value:function(){this.props.mouseHandler.leave({screenProps:this.props}),this.props.actions.repaint()}},{key:"mleave",value:function(){this.props.status===te.PAN&&this.props.actions.setPrevStatus(),this.mouseOnScreen=!1,this.props.actions.repaint()}},{key:"menter",value:function(){}},{key:"clickHandle",value:function(e){0===e.button&&this.props.mouseHandler.click({screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey}),this.props.actions.selectShapes(this.props.shapeManager.getSelectedShapes()),e.preventDefault()}},{key:"onclick",value:function(e){0===e.button&&(this.props.status===te.CREATE&&(this.props.shapeCreator.setCurrent(this.props.curCoord),this.props.shapeCreator.isLegal()&&this.props.shapeCreator.setNextPoint(this.props.curCoord),this.props.shapeCreator.isNext()||(this.props.shapes.push(this.props.shapeCreator.getShape()),this.props.actions.refreshSnapMarkers(),this.props.actions.refreshShapeManager(),this.props.cyclicCreation?this.props.actions.createShape(this.props.shapeCreator.reset(this.props.boundedCircle)):this.props.actions.cancel())),this.props.status===te.FREE&&this.props.shapeManager.toggleShapeSelected(),this.props.status===te.PICK&&(this.props.picker.setNextPoint(this.props.curCoord),this.props.picker.isNext()||(this.props.actions.setPickedData(this.props.picker.getPickedData()),this.props.actions.refreshSnapMarkers(),this.props.actions.refreshShapeManager()))),this.props.actions.selectShapes(this.props.shapeManager.getSelectedShapes()),e.preventDefault()}},{key:"resize",value:function(){var e=window.getComputedStyle(document.querySelector(".screenContainer")),t=Number.parseInt(e.width),n=Number.parseInt(e.height);this.props.actions.setDimensions(t,n,this.props.realWidth,this.props.topLeft),this.canvas.width=t,this.canvas.height=n,this.props.actions.setBoundedCircle()}},{key:"componentDidMount",value:function(){var e=this;this.canvas=document.querySelector("#canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.addEventListener("mousewheel",this.mwheelHandle.bind(this),{passive:!1}),this.paint(this.ctx),window.addEventListener("load",function(){e.resize(),e.props.actions.centerToPoint(new k(0,0)),e.props.actions.repaint(),document.body.oncontextmenu=function(){return!1}}),window.addEventListener("resize",function(){e.resize()}),window.addEventListener("keyup",function(t){e.props.cursor.setAdditional({shiftKey:t.shiftKey,altKey:t.altKey}),e.props.actions.repaint()}),window.addEventListener("keydown",function(t){!1!==window.KEYDOWNHANDLE&&(e.props.cursor.setAdditional({shiftKey:t.shiftKey,altKey:t.altKey}),e.props.keyDownHandler.forEach(function(n){t.ctrlKey===n.ctrlKey&&t.shiftKey===n.shiftKey&&t.altKey===n.altKey&&t.keyCode===n.keyCode&&(e.props.actions[n.action]&&e.props.actions[n.action](n.param),t.preventDefault())}),e.props.actions.repaint())})}},{key:"componentDidUpdate",value:function(){this.props.shapeManager.setShapes(this.props.shapes,this.props.selectionType),this.canvas.style.cursor="none",this.paint(this.ctx)}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.refCanvas,id:"canvas",width:this.props.screenWidth,height:this.props.screenHeight,onMouseMove:this.mmoveHandle.bind(this),onMouseDown:this.mdownHandle.bind(this),onMouseUp:this.mupHandle.bind(this),onMouseLeave:this.mleaveHandle.bind(this),onMouseEnter:this.menter.bind(this),onClick:this.clickHandle.bind(this)})}}]),t}(r.a.Component);ze.MARKER_SIZE=.005,ze.SNAP_MARKER_SIZE=5;var $e=function(e){function t(e,n){var i;return Object(o.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this,n))).name="StraightLineCreator",i.points=new Array(2),i.points[0]=new k,i.points[1]=new k,i.line=new P(0,0,0),i.shape=new F(i.line),i.style=e||new w(E.BLACK,w.SOLID),i.shape.setStyle(e),i.helperShapes=[],i.helperShapes.push(new qe(new L(new k,0))),i.helperShapes.push(new qe(new L(new k,0))),i}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setControlPoints",value:function(){this.helperShapes[0]=new qe(new L(this.points[0],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[1]=new qe(new L(this.points[1],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[0].setColor(E.POINT_MARKER),this.helperShapes[1].setColor(E.POINT_MARKER)}},{key:"setCurrent",value:function(e){this.isNext()&&(this.points[this.i]=e,0===this.i&&(this.points[1]=this.points[0]),this.i>0&&(this.line=Object(Ie.a)(P,Object(Me.a)(this.points)),0===this.line.a&&0===this.line.b?this.legal=!1:this.legal=!0),this.shape=new F(this.line),this.shape.setStyle(this.style),this.setControlPoints())}},{key:"reset",value:function(){return new t(new w(this.style.getColor(),this.style.getType()),this.boundedCircle)}}]),t}(Y);$e.caption="Straight line";var Je=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this))).line=e,n.model=e,n.controlPoints=[{point:n.line.origin,show:!1,selected:!1},{point:n.line.directionPoint,show:!1,selected:!1}];var i=!0,r=!1,s=void 0;try{for(var a,c=n.controlPoints[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){var p=a.value;p.marker=new Ke(p.point,!1)}}catch(u){r=!0,s=u}finally{try{i||null==c.return||c.return()}finally{if(r)throw s}}return n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"drawSelf",value:function(e,t,n){this.refresh(t,n),null!==this.p0&&null!==this.p1&&(e.strokeStyle=this.getStyle().getColor(),e.setLineDash(this.getStyle().getStroke()),e.lineWidth=this.getStyle().getWidth(),e.beginPath(),e.moveTo(this.p0.x,this.p0.y),e.lineTo(this.p1.x,this.p1.y),e.stroke())}},{key:"refresh",value:function(e,t){var n=new k(e.topLeft.x+e.width,e.topLeft.y-e.height),i=_.midPoint(e.topLeft,n),r=_.distance(e.topLeft,n)/2,s=new L(i,r),a=N.CircleRLine(s,this.line);if(null!=a){if(1===a.length){var o=a[0];(a=new Array(2))[0]=this.line.origin,a[1]=o}this.p0=_.realToScreen(a[0],e,t),this.p1=_.realToScreen(a[1],e,t)}else this.p0=null,this.p1=null;this.activePoint&&(this.activePointMarker=new Ke(this.activePoint))}},{key:"getMarkers",value:function(){var e=[];return e.push(new Ye(this.line.origin)),e}},{key:"setActivePoint",value:function(e){Object(H.a)(Object(h.a)(t.prototype),"setActivePoint",this).call(this),"Origin"===e&&(this.controlPoints[0].selected=!0,this.controlPoints[0].marker.setActive(!0)),"Direction"===e&&(this.controlPoints[1].selected=!0,this.controlPoints[1].marker.setActive(!0))}},{key:"getProperties",value:function(){var e=new Map;return e.set("Title",{value:"RLine",regexp:/\s*/}),e.set("Origin",{value:{x:this.line.origin.x,y:this.line.origin.y},picker:Fe,regexp:/^-?\d*\.?\d*$/}),e.set("Direction",{value:{x:this.line.origin.x+this.line.vector.x,y:this.line.origin.y+this.line.vector.y},picker:Fe,regexp:/^-?\d*\.?\d*$/}),e}},{key:"setProperty",value:function(e){switch(Object(H.a)(Object(h.a)(t.prototype),"setProperty",this).call(this,e),e.key){case"Origin":this.line.origin.x=e.value.x,this.line.origin.y=e.value.y,this.line.directionPoint.x=this.line.origin.x+this.line.vector.x,this.line.directionPoint.y=this.line.origin.y+this.line.vector.y,this.controlPoints[0].point=this.line.origin,this.controlPoints[1].point=this.line.directionPoint;break;case"Direction":this.line.vector.x=e.value.x-this.line.origin.x,this.line.vector.y=e.value.y-this.line.origin.y,this.line.directionPoint.x=this.line.origin.x+this.line.vector.x,this.line.directionPoint.y=this.line.origin.y+this.line.vector.y,this.controlPoints[1].point=this.line.directionPoint}}},{key:"getDistance",value:function(e){return _.PointToRLineDistance(e,this.line)}},{key:"isInRect",value:function(e,t){return{cross:N.RectangleRLine(e,t,this.line).length>0,full:!1}}},{key:"toString",value:function(){return"Ray origin (".concat(this.line.origin.x,",").concat(this.line.origin.y,") vector(").concat(this.line.vector.x,",").concat(this.line.vector.y,")")}}]),t}(I),Qe=function(e){function t(e,n){var i;return Object(o.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this,n))).name="RayLineCreator",i.line=new x(new k,new k),i.points=new Array(2),i.shape=new Je(i.line),i.style=e||new w(E.BLACK,w.SOLID),i.shape.setStyle(e),i.helperShapes=[],i.helperShapes.push(new qe(new L(new k,0))),i.helperShapes.push(new qe(new L(new k,0))),i}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setControlPoints",value:function(){this.helperShapes[0]=new qe(new L(this.points[0],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[1]=new qe(new L(this.points[1],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[0].setColor(E.POINT_MARKER),this.helperShapes[1].setColor(E.POINT_MARKER)}},{key:"setCurrent",value:function(e){this.isNext()&&(this.points[this.i]=e,0===this.i&&(this.points[1]=this.points[0]),this.i>0&&(this.line=Object(Ie.a)(x,Object(Me.a)(this.points)),0===this.line.vector.x&&0===this.line.vector.y?this.legal=!1:this.legal=!0),this.shape=new Je(this.line,this.boundedCircle),this.shape.setStyle(this.style),this.setControlPoints())}},{key:"reset",value:function(){return new t(new w(this.style.getColor(),this.style.getType()),this.boundedCircle)}}]),t}(Y);Qe.caption="Ray line";var et=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new w(E.BLACK,w.SOLID),i=arguments.length>1?arguments[1]:void 0;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this,i))).name="LineCreator",e.line=new O(new k,new k),e.points=[new k,new k],e.shape=new Ve(e.line),e.style=n,e.shape.setStyle(n),e.helperShapes=[],e.helperShapes.push(new qe(new L(new k,0))),e.helperShapes.push(new qe(new L(new k,0))),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setCurrent",value:function(e){this.isNext()&&(this.points[this.i]=e,0===this.i&&(this.points[1]=this.points[0]),this.i>0&&(this.line=new O(this.points[0],this.points[1])),this.shape=new Ve(this.line),this.shape.setStyle(this.style),this.setControlPoints())}},{key:"setControlPoints",value:function(){this.helperShapes[0]=new qe(new L(this.points[0],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[1]=new qe(new L(this.points[1],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[0].setColor(E.POINT_MARKER),this.helperShapes[1].setColor(E.POINT_MARKER)}},{key:"reset",value:function(){return new t(new w(this.style.getColor(),this.style.getType()),this.boundedCircle)}}]),t}(Y);et.caption="Segment line";var tt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new w(E.BLACK,w.SOLID),i=arguments.length>1?arguments[1]:void 0;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this,i))).name="CircleCRCreator",e.points=new Array(2),e.circle=new L(new k,0),e.helperShapes=[],e.shape=new qe(e.circle),e.radiusLine=new O(e.circle.center,e.circle.center),e.helperShapes.push(new Ve(e.radiusLine)),e.helperShapes.push(new qe(new L(new k,0))),e.helperShapes.push(new qe(new L(new k,0))),e.style=n,e.shape.setStyle(n),e.helperShapes[0].setStyle(new w(E.GRAY,w.DASH)),e.helperShapes[1].setStyle(new w(E.BLUE,w.SOLID)),e.helperShapes[2].setStyle(new w(E.BLUE,w.SOLID)),e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setCurrent",value:function(e){this.isNext()&&(this.points[this.i]=e,0===this.i&&(this.points[1]=this.points[0]),this.i>0&&(this.circle=new L(this.points[0],_.distance(this.points[0],this.points[this.i]))),this.radiusLine=new O(this.points[0],this.points[this.i]),this.shape=new qe(this.circle),this.helperShapes[0]=new Ve(this.radiusLine),this.shape.setStyle(this.style),this.helperShapes[0].setStyle(new w(E.GRAY,w.DASH)),this.setControlPoints())}},{key:"setControlPoints",value:function(){this.helperShapes[1]=new qe(new L(this.points[0],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[2]=new qe(new L(this.points[1],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[1].setStyle(new w(E.POINT_MARKER,w.SOLID)),this.helperShapes[2].setStyle(new w(E.POINT_MARKER,w.SOLID))}},{key:"reset",value:function(){return new t(new w(this.style.getColor(),this.style.getType()),this.boundedCircle)}}]),t}(Y);tt.caption="Circle by center";var nt=function(e){function t(e,n){var i;return Object(o.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this,n))).name="Circle2PCreator",i.style=e,i.circle=new L(new k,0),i.shape=new qe(i.circle),i.shape.setStyle(e),i.helperShapes=[],i.diamLine=new O(i.circle.center,i.circle.center),i.helperShapes.push(new Ve(i.diamLine)),i.helperShapes.push(new qe(new L(new k,0))),i.helperShapes.push(new qe(new L(new k,0))),i.helperShapes[0].setStyle(new w(E.gray,w.DASH)),i.helperShapes[1].setStyle(new w(E.blue,w.SOLID)),i.helperShapes[2].setStyle(new w(E.blue,w.SOLID)),i.points=new Array(2),i}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setCurrent",value:function(e){this.isNext()&&(this.points[this.i]=e,0===this.i&&(this.points[1]=this.points[0]),this.i>0&&(this.circle=new L(_.midPoint(this.points[0],this.points[1]),_.distance(this.points[0],this.points[1])/2)),this.diamLine=new O(this.points[0],this.points[this.i]),this.shape=new qe(this.circle),this.shape.setStyle(this.style),this.setControlPoints())}},{key:"setControlPoints",value:function(){this.helperShapes[0]=new Ve(this.diamLine),this.helperShapes[1]=new qe(new L(this.points[0],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[2]=new qe(new L(this.points[1],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[0].setStyle(new w(E.GRAY,w.DASH)),this.helperShapes[1].setStyle(new w(E.POINT_MARKER,w.SOLID)),this.helperShapes[2].setStyle(new w(E.POINT_MARKER,w.SOLID))}},{key:"reset",value:function(){return new t(new w(this.style.getColor(),this.style.getType()),this.boundedCircle)}}]),t}(Y);nt.caption="Circle by 2 points";var it=function(e){function t(e,n){var i;return Object(o.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this,n))).name="Circle3PCreator",i.style=e,i.circle=new L(new k,0),i.shape=new qe(i.circle),i.shape.setStyle(e),i.helperShapes=[],i.triangle=new j,i.helperShapes.push(new We(i.triangle)),i.helperShapes.push(new qe(new L(new k,0))),i.helperShapes.push(new qe(new L(new k,0))),i.helperShapes.push(new qe(new L(new k,0))),i.helperShapes[0].setStyle(new w(E.gray,w.DASH)),i.helperShapes[1].setStyle(new w(E.POINT_MARKER,w.SOLID)),i.helperShapes[2].setStyle(new w(E.POINT_MARKER,w.SOLID)),i.helperShapes[3].setStyle(new w(E.POINT_MARKER,w.SOLID)),i.points=new Array(3),i}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setCurrent",value:function(e){this.isNext()&&(this.points[this.i]=e,0===this.i&&(this.points[1]=this.points[0]),this.i<2&&(this.points[2]=this.points[1]),this.triangle=new j(this.points),this.circle=this.triangle.getOuterCircle(),this.shape=new qe(this.circle),this.shape.setStyle(this.style),this.setControlPoints())}},{key:"setControlPoints",value:function(){this.helperShapes[0]=new We(new j(this.points)),this.helperShapes[1]=new qe(new L(this.points[0],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[2]=new qe(new L(this.points[1],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[3]=new qe(new L(this.points[2],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[0].setStyle(new w(E.GRAY,w.DASH)),this.helperShapes[1].setStyle(new w(E.BLUE,w.SOLID)),this.helperShapes[2].setStyle(new w(E.BLUE,w.SOLID)),this.helperShapes[3].setStyle(new w(E.BLUE,w.SOLID))}},{key:"reset",value:function(){return new t(new w(this.style.getColor(),this.style.getType()),this.boundedCircle)}},{key:"refresh",value:function(e){this.boundedCircle=e,null!=this.points[this.i]&&this.setControlPoints()}}]),t}(Y);it.caption="Circle by 3 points";var rt=function(e){function t(e,n){var i;return Object(o.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this,n))).name="TriangleCreator",i.style=e,i.triangle=new j,i.shape=new We(i.triangle),i.helperShapes=[],i.helperShapes.push(new qe(new L(new k,0))),i.helperShapes.push(new qe(new L(new k,0))),i.helperShapes.push(new qe(new L(new k,0))),i.shape.setStyle(e),i.points=new Array(3),i}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setCurrent",value:function(e){this.isNext()&&(this.points[this.i]=e,0===this.i&&(this.points[1]=this.points[0]),this.i<2&&(this.points[2]=this.points[1]),this.triangle=new j(this.points),this.shape=new We(this.triangle),this.shape.setStyle(this.style),this.setControlPoints())}},{key:"setControlPoints",value:function(){this.helperShapes[0]=new qe(new L(this.points[0],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[1]=new qe(new L(this.points[1],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[2]=new qe(new L(this.points[2],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[0].setColor(E.POINT_MARKER),this.helperShapes[1].setColor(E.POINT_MARKER),this.helperShapes[2].setColor(E.POINT_MARKER)}},{key:"reset",value:function(){return new t(new w(this.style.getColor(),this.style.getType()),this.boundedCircle)}}]),t}(Y);rt.caption="Triangle";var st=function(e){function t(e,n){var i;return Object(o.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this,n))).rectangle=new R,i.points=new Array(2),i.name="RectangleCreator",i.style=e,i.shape=new Ge(i.rectangle),i.shape.setStyle(e),i.helperShapes=[],i.helperShapes.push(new qe(new L(new k,0))),i.helperShapes.push(new qe(new L(new k,0))),i.helperShapes[0].setStyle(new w(E.BLUE,w.SOLID)),i.helperShapes[1].setStyle(new w(E.BLUE,w.SOLID)),i}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setCurrent",value:function(e){this.isNext()&&(this.points[this.i]=e,0===this.i&&(this.points[1]=this.points[0]),this.i>0&&(this.rectangle=new R(this.points[0],this.points[1])),this.shape=new Ge(this.rectangle),this.shape.setStyle(this.style),this.setControlPoints())}},{key:"setControlPoints",value:function(){this.helperShapes[0]=new qe(new L(this.points[0],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[1]=new qe(new L(this.points[1],this.boundedCircle.radius*ze.MARKER_SIZE)),this.helperShapes[0].setStyle(new w(E.POINT_MARKER,w.SOLID)),this.helperShapes[1].setStyle(new w(E.POINT_MARKER,w.SOLID))}},{key:"reset",value:function(){return new t(new w(this.style.getColor(),this.style.getType()),this.boundedCircle)}}]),t}(Y);st.caption="Rectangle";var at=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onClick",value:function(e){var t=e.pressed,n=e.params;t?(this.setButtonId(""),this.props.cancel()):(this.setButtonId(n.id),this.props.createNewShape(new n.creator(new w(E.BLACK,w.SOLID),this.props.boundedCircle)))}},{key:"setButtonId",value:function(e){this.props.setActiveCreateButton(e)}},{key:"render",value:function(){var e=this,t=this.props.captions.create;return r.a.createElement("div",{className:"toolBar",id:"createToolBar"},r.a.createElement("div",{className:"toolBarHeader"},r.a.createElement("span",{className:"toolBarCaption noselect"},t.createToolBar)),r.a.createElement("hr",null),r.a.createElement("div",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",id:"cyclic",onChange:function(t){e.props.setCyclicFlag(t.target.checked)}}),r.a.createElement("label",{htmlFor:"cyclic"},t.createCheckBox)),r.a.createElement(_e,{buttons:[{title:t.createSLine2Points,id:"SLine",params:{creator:$e}},{title:t.createRayLine2Points,id:"RLine",params:{creator:Qe}},{title:t.createSegmentLine2Points,id:"Line",params:{creator:et}}],activeButton:this.props.activeButton,onClick:this.onClick.bind(this)}),r.a.createElement(_e,{buttons:[{title:t.createCircleCenter,id:"CircleRad",params:{creator:tt}},{title:t.createCircle2P,id:"Circle2p",params:{creator:nt}},{title:t.createCircle3P,id:"Circle3p",params:{creator:it}}],activeButton:this.props.activeButton,onClick:this.onClick.bind(this)}),r.a.createElement(_e,{buttons:[{title:t.createRect,id:"Rect2p",params:{creator:st}},{title:t.createRectCenter,id:"RectCenter",params:{creator:null,dev:t.development}}],activeButton:this.props.activeButton,onClick:this.onClick.bind(this)}),r.a.createElement(_e,{buttons:[{title:t.createTriangle,id:"Triangle",params:{creator:rt}},{title:t.createTriangleInscribed,id:"TriangleInscribed",params:{creator:null,dev:t.development}},{title:t.createTriangleDescribed,id:"TriangleDescribed",params:{creator:null,dev:t.development}}],activeButton:this.props.activeButton,onClick:this.onClick.bind(this)}),r.a.createElement(_e,{buttons:[{title:t.createParabola,id:"Parabola",params:{creator:null,dev:t.development}},{title:t.createHyperbola,id:"Hyperbola",params:{creator:null,dev:t.development}}],activeButton:this.props.activeButton,onClick:this.onClick.bind(this)}),r.a.createElement(_e,{buttons:[{title:t.createFunction,id:"Function",params:{creator:null,dev:t.development}}],activeButton:this.props.activeButton,onClick:this.onClick.bind(this)}))}}]),t}(r.a.Component),ot=Object(y.b)(function(e,t){return{boundedCircle:e.screen.boundedCircle,context:e.screen.context,captions:e.options.captions,activeButton:e.components.activeCreateButton}},function(e){return{cancel:function(){return e(m.cancel())},createNewShape:function(t){return e(m.createNewShape(t))},setActiveCreateButton:function(t){return e(function(e){return{type:ve.SET_ACTIVE_CREATE_BUTTON,payload:e}}(t))},setScreenStatus:function(t,n){return e(m.setScreenStatus(t,n))},setCyclicFlag:function(t){return e(m.setCyclicFlag(t))}}})(at),ct=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onclick",value:function(){this.props.pressed?(this.props.setSnap(this.props.snapClass,!1),this.props.clearActiveSnapButton(this.props.id)):(this.props.setSnap(this.props.snapClass,!0),this.props.setActiveSnapButton(this.props.id))}},{key:"render",value:function(){var e=this.props.pressed?"toolButtonDown":"toolButtonUp";return e+=" toolButton snapButton",r.a.createElement("div",{id:this.props.id,className:e,onClick:this.onclick.bind(this),title:this.props.title})}}]),t}(r.a.Component),lt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.captions.snap;return r.a.createElement("div",{className:"toolBar snapToolBar"},r.a.createElement(ct,{title:e.snapGridPoints,id:"grid",setSnap:this.props.setSnap,snapClass:"grid",setActiveSnapButton:this.props.setActiveSnapButton,clearActiveSnapButton:this.props.clearActiveSnapButton,pressed:this.props.activeButtons.has("grid")}),r.a.createElement(ct,{title:e.snapEndPoints,id:"endpoint",setSnap:this.props.setSnap,snapClass:Ye,setActiveSnapButton:this.props.setActiveSnapButton,clearActiveSnapButton:this.props.clearActiveSnapButton,pressed:this.props.activeButtons.has("endpoint")}),r.a.createElement(ct,{title:e.snapMiddlePoints,id:"middlepoint",setSnap:this.props.setSnap,snapClass:Ue,setActiveSnapButton:this.props.setActiveSnapButton,clearActiveSnapButton:this.props.clearActiveSnapButton,pressed:this.props.activeButtons.has("middlepoint")}),r.a.createElement(ct,{title:e.snapCenterPoints,id:"centerpoint",setSnap:this.props.setSnap,snapClass:Be,setActiveSnapButton:this.props.setActiveSnapButton,clearActiveSnapButton:this.props.clearActiveSnapButton,pressed:this.props.activeButtons.has("centerpoint")}))}}]),t}(r.a.Component),ht=Object(y.b)(function(e){return{screen:e.screen,captions:e.options.captions,activeButtons:e.components.activeSnapButtons}},function(e){return{setSnap:function(t,n){return e(m.setSnap(t,n))},setActiveSnapButton:function(t){return e(function(e){return{type:ve.SET_ACTIVE_SNAP_BUTTON,payload:e}}(t))},clearActiveSnapButton:function(t){return e(function(e){return{type:ve.CLEAR_ACTIVE_SNAP_BUTTON,payload:e}}(t))}}})(lt),pt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.active?"pickButtonDown":"pickButtonUp";return r.a.createElement("div",{title:this.props.captions.buttons.pick,onClick:this.props.onClick,className:"pickButton "+e})}}]),t}(r.a.Component),ut=Object(y.b)(function(e){return{captions:e.options.captions}})(pt),dt=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).state={value:e.value.toFixed(4),correct:!0,prevValue:e.value.toFixed(4),originValue:e.value.toFixed(4)},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"change",value:function(e){var t=e.target.value,n=this.props.regexp;null!=t.match(n)?this.setState({value:t,prevValue:t}):this.setState({value:""===t?"":this.state.prevValue})}},{key:"blur",value:function(){this.setState({value:this.state.originValue}),window.KEYDOWNHANDLE=!0}},{key:"onKeyPress",value:function(e){if(13===e.charCode){var t=e.target.value;t=""===t?"0":t;var n=this.props.regexp;if(null!==t.match(n)){var i=Number.parseFloat(t);return this.props.setProperty(this.props.propKey,i),void this.setState({value:i,correct:!0,prevValue:i})}this.setState({value:this.state.prevValue})}return!1}},{key:"componentDidUpdate",value:function(){this.props.status===te.PICK_END&&this.props.propKey===this.props.editId&&(this.props.setProperty(this.props.propKey,+this.state.value),this.props.cancel())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"noselect"},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignContent:"center"}},this.props.label,r.a.createElement("input",{style:this.state.correct?{}:{backgroundColor:"red"},className:"propertyField",type:"text",value:this.state.value,id:this.props.label,onChange:this.change.bind(this),onKeyPress:this.onKeyPress.bind(this),onKeyDown:function(e){e.stopPropagation()},onBlur:this.blur.bind(this),onFocus:function(){window.KEYDOWNHANDLE=!1}}),this.props.picker?r.a.createElement(ut,{active:this.props.status===te.PICK&&this.props.id===this.props.editId,onClick:function(){e.props.status!==te.PICK||e.props.id!==e.props.editId?(e.props.setPickedData(e.state.value),e.props.startPicking(e.props.id,new e.props.picker)):e.props.cancel()}}):r.a.createElement(r.a.Fragment,null)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.status===te.PICK_END&&e.id===e.editId?e.pickedValue:t.value;return n=(+n).toFixed(4),Object(S.a)({},e,{value:n,originValue:e.value,correct:!0})}}]),t}(r.a.Component),yt=Object(y.b)(function(e){return{pickedValue:e.screen.pickedData.data,editId:e.screen.pickedData.editId,status:e.screen.status}},function(e){return{startPicking:function(t,n){return e(m.startPicking(t,n))},setPickedData:function(t){return e(m.setPickedData(t))},cancel:function(){return e(m.cancel())}}})(dt),vt=function(e){function t(e){var n;Object(o.a)(this,t),n=Object(l.a)(this,Object(h.a)(t).call(this,e));var i={x:e.value.x,y:e.value.y};return n.state={value:{x:i.x,y:i.y},correct:!0,prevValue:{x:i.x,y:i.y},originValue:{x:i.x,y:i.y}},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"change",value:function(e){var t={x:this.state.value.x,y:this.state.value.y};t[e.target.id]=e.target.value;var n=this.props.regexp;if(null!=t[e.target.id].match(n)&&""!==t[e.target.id])this.setState({value:{x:t.x,y:t.y},prevValue:{x:t.x,y:t.y}});else{var i=this.state.prevValue;""===t[e.target.id]&&(i[e.target.id]=""),this.setState({value:i})}}},{key:"blur",value:function(){this.setState({value:this.state.originValue}),window.KEYDOWNHANDLE=!0}},{key:"focus",value:function(){this.props.setActivePoint(this.props.propKey),window.KEYDOWNHANDLE=!1}},{key:"onKeyPress",value:function(e){if(13===e.charCode){var t=e.target.value;t=""===t?"0":t;var n=this.props.regexp;if(null!==t.match(n)){var i=Number.parseFloat(t),r=this.state.value;return r[e.target.id]=i,this.props.setProperty(this.props.propKey,r),void this.setState({value:r,correct:!0,prevValue:r})}this.setState({value:this.state.prevValue})}return!1}},{key:"componentDidUpdate",value:function(){this.props.status===te.PICK_END&&this.props.propKey===this.props.editId&&(this.props.setProperty(this.props.propKey,this.state.value),this.props.cancel())}},{key:"render",value:function(){var e=this,t=this.state.value;return r.a.createElement("div",{className:"noselect"},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignContent:"center"}},this.props.label,r.a.createElement("input",{style:this.state.correct?{}:{backgroundColor:"red"},className:"propertyMultField",type:"text",value:t.x,id:"x",onChange:this.change.bind(this),onKeyPress:this.onKeyPress.bind(this),onKeyDown:function(e){e.stopPropagation()},onBlur:this.blur.bind(this),onFocus:this.focus.bind(this)}),r.a.createElement("input",{style:this.state.correct?{}:{backgroundColor:"red"},className:"propertyMultField",type:"text",value:t.y,id:"y",onChange:this.change.bind(this),onKeyPress:this.onKeyPress.bind(this),onKeyDown:function(e){e.stopPropagation()},onBlur:this.blur.bind(this),onFocus:this.focus.bind(this)}),this.props.picker?r.a.createElement(ut,{active:this.props.status===te.PICK&&this.props.id===this.props.editId,onClick:function(){e.props.status!==te.PICK||e.props.id!==e.props.editId?(e.props.setPickedData(e.state.value),e.props.startPicking(e.props.id,new e.props.picker),e.props.setActivePoint(e.props.propKey)):e.props.cancel()}}):r.a.createElement(r.a.Fragment,null)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.status===te.PICK_END&&e.id===e.editId?e.pickedValue:t.value;return n.x=+n.x.toFixed(4),n.y=+n.y.toFixed(4),Object(S.a)({},e,{value:n,originValue:e.value,correct:!0})}}]),t}(r.a.Component),ft=Object(y.b)(function(e){return{pickedValue:e.screen.pickedData.data,editId:e.screen.pickedData.editId,status:e.screen.status}},function(e){return{startPicking:function(t,n){return e(m.startPicking(t,n))},setPickedData:function(t){return e(m.setPickedData(t))},cancel:function(){return e(m.cancel())}}})(vt),gt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onClick",value:function(){this.props.deleteConfirm()}},{key:"render",value:function(){return r.a.createElement("div",{className:"propEditBar"},r.a.createElement("button",{className:"deleteButton",onClick:this.onClick.bind(this)},this.props.caption))}}]),t}(r.a.Component),St=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"setProperty",value:function(e,t){this.props.setProperty({key:e,value:t})}},{key:"setActivePoint",value:function(e){this.shape.setActivePoint(e),this.props.repaint()}},{key:"render",value:function(){var e,t=this.props.screen.selectedShapes,n=[];if(1===t.length){this.shape=t[0],this.prop=t[0].getProperties();var i=this.prop.get("Title").value;e=this.props.captions.shapes[i].Title;var s=!0,a=!1,o=void 0;try{for(var c,l=this.prop.keys()[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var h=c.value;"Title"!==h&&n.push("object"===typeof this.prop.get(h).value?r.a.createElement(ft,{key:h,propKey:h,id:h,label:this.props.captions.shapes[i][h],value:this.prop.get(h).value,regexp:this.prop.get(h).regexp,picker:this.prop.get(h).picker,setProperty:this.setProperty.bind(this),setActivePoint:this.setActivePoint.bind(this)}):r.a.createElement(yt,{key:h,propKey:h,id:h,label:this.props.captions.shapes[i][h],value:this.prop.get(h).value,regexp:this.prop.get(h).regexp,picker:this.prop.get(h).picker,setProperty:this.setProperty.bind(this)}))}}catch(p){a=!0,o=p}finally{try{s||null==l.return||l.return()}finally{if(a)throw o}}}return t.length>1&&(n=t.length+this.props.captions.NShapesSelected),0===t.length&&(n=this.props.captions.noShapesSelected),r.a.createElement("div",{className:"toolBar propertiesBar noselect"},r.a.createElement("div",{className:"toolBarHeader noselect"},this.props.captions.propBar),r.a.createElement("hr",null),e||"",r.a.createElement("div",{className:"propertyGroup"},n),this.props.screen.selectedShapes.length>0?r.a.createElement(gt,{deleteConfirm:this.props.deleteConfirm.bind(null,!0),caption:this.props.captions.deleteButton}):r.a.createElement(r.a.Fragment,null))}}]),t}(r.a.Component),mt=Object(y.b)(function(e){return{screen:e.screen,captions:e.options.captions}},function(e){return{setProperty:function(t){return e(function(e){return{type:b.SET_PROPERTY,payload:e}}(t))},deleteConfirm:function(){return e(m.deleteConfirm())},repaint:function(){return e(m.repaint())}}})(St),bt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onClick",value:function(e){var t=e.params;this.props.setSelectionType(t.id)}},{key:"render",value:function(){var e=this.props.captions.modify;return r.a.createElement("div",{className:"toolBar",id:"selectionToolBar"},r.a.createElement(_e,{buttons:[{title:e.crossSelect,id:"crossSelect"},{title:e.fullSelect,id:"fullSelect"}],activeButton:this.props.activeButton,onClick:this.onClick.bind(this)}))}}]),t}(r.a.Component),Et=Object(y.b)(function(e){return{context:e.screen.context,captions:e.options.captions,activeButton:e.screen.selectionType}},function(e){return{setSelectionType:function(t){return e(m.setSelectionType(t))},setScreenStatus:function(t,n){return e(m.setScreenStatus(t,n))}}})(bt),wt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"mainContainer"},r.a.createElement("div",{className:"screenContainer"},r.a.createElement(ze,Object.assign({style:{borderWidth:"1px",borderStyle:"solid"},actions:this.props.actions,keyDownHandler:this.props.keyDownHandler},this.props.screen))),r.a.createElement(ot,null),r.a.createElement(Et,null),r.a.createElement(mt,null),r.a.createElement(ht,null))}}]),t}(r.a.Component),kt=Object(y.b)(function(e){return{screen:Object(S.a)({},e.screen,{captions:e.options.captions}),keyDownHandler:e.options.keyDownHandler}},function(e){return{actions:{addShape:function(t){return e(m.addShape(t))},cancel:function(){return e(m.cancel())},cancelSelection:function(){return e(m.cancelSelection())},centerToPoint:function(t){return e(m.centerToPoint(t))},createShape:function(t){return e((n=t,{type:b.CREATE_SHAPE,payload:n}));var n},deleteConfirm:function(){return e(m.deleteConfirm())},refreshShapeManager:function(){return e(m.refreshShapeManager())},refreshSnapMarkers:function(){return e(m.refreshSnapMarkers())},repaint:function(){return e(m.repaint())},selectAll:function(){return e(m.selectAll())},selectShapes:function(t){return e(m.selectShapes(t))},setBoundedCircle:function(){return e(m.setBoundedCircle())},setCurCoord:function(t,n){return e(m.setCurCoord(t,n))},setDimensions:function(t,n,i,r){return e(m.setDimensions(t,n,i,r))},setLanguage:function(t){return e(ce(t))},setPickedData:function(t){return e(m.setPickedData(t))},setPrevCoord:function(t){return e(m.setPrevCoord(t))},setPrevStatus:function(){return e(m.setPrevStatus())},setRatio:function(t){return e(m.setRatio(t))},setRealWidth:function(t){return e(m.setRealWidth(t))},setScale:function(t,n){return e(m.setScale(t,n))},setScreenStatus:function(t,n){return e(m.setScreenStatus(t,n))},setTopLeft:function(t){return e(m.setTopLeft(t))}}}})(wt),Ct=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("span",{ref:this.ref2,className:"noselect",style:{position:"relative",whiteSpace:"pre",fontSize:"small"}},r.a.createElement("hr",null),"".concat(this.props.cap.name,"          ").concat(this.props.cap.email),r.a.createElement("hr",null)))}}]),t}(r.a.Component),Ot=Object(y.b)(function(e){return{cap:e.options.captions.about}})(Ct),Pt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).animate=function(){e.w<e.maxw&&(e.ref.current.style.width="".concat(e.w,"px")),e.h<e.maxh&&(e.ref.current.style.height="".concat(e.h,"px")),e.w>=e.maxw&&e.h>=e.maxh&&e.setState({done:!0}),e.w+=50,e.h+=50},e.ref=r.a.createRef(),e.state={done:!1},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.t),window.KEYDOWNHANDLE=!0}},{key:"componentDidMount",value:function(){this.maxw=document.body.clientWidth/1.1,this.maxh=document.body.clientHeight/1.1,this.w=0,this.h=0,this.t=setInterval(this.animate,1),window.KEYDOWNHANDLE=!1}},{key:"render",value:function(){var e=this.props.captions.help.hotKeys.map(function(e,t){return r.a.createElement(i.Fragment,{key:t},r.a.createElement("span",{className:"helpHotKey"},e.key," ")," - ",e.desc,r.a.createElement("br",null))});return r.a.createElement("div",{className:"helpContainer  noselect",onClick:this.props.showHelp.bind(null,!1)},r.a.createElement("div",{style:{display:"inline-block",zIndex:101,position:"relative"}},r.a.createElement("div",{id:"help",ref:this.ref,className:"toolBar helpSectionShow"},r.a.createElement("div",{className:"toolBarHeader"},r.a.createElement("span",{className:"toolBarCaption"},this.props.captions.help.title)),this.state.done?r.a.createElement(Ot,null):r.a.createElement(r.a.Fragment,null),e,r.a.createElement("div",{id:"pifagor"}),r.a.createElement("div",{id:"evklid"}))))}}]),t}(r.a.Component),xt=Object(y.b)(function(e){return{captions:e.options.captions}},function(e){return{showHelp:function(t){return e(le(t))}}})(Pt),Tt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modalContainer  noselect",onClick:ue},r.a.createElement("div",{className:"toolBar",onClick:function(e){e.stopPropagation()}},r.a.createElement("div",null,this.props.captions.messages[this.props.messageKey]),r.a.createElement("div",{className:"flexCenter"},r.a.createElement("button",{onClick:function(){Ce.dispatch(e.props.onOk()),e.props.hideConfirm()}},"OK"),r.a.createElement("button",{onClick:this.props.hideConfirm},this.props.captions.buttons.cancel))))}}]),t}(r.a.Component),Rt=Object(y.b)(function(e){return{captions:e.options.captions}},function(e){return{hideConfirm:function(){return e(he(!1))}}})(Tt),Lt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modalContainer  noselect",onClick:ue},r.a.createElement("div",{className:"toolBar",onClick:function(e){e.stopPropagation()}},r.a.createElement("div",null,this.props.captions.messages[this.props.messageKey]),r.a.createElement("div",{className:"flexCenter"},r.a.createElement("button",{onClick:function(){e.props.hideAlert()}},"OK"))))}}]),t}(r.a.Component),jt=Object(y.b)(function(e){return{captions:e.options.captions}},function(e){return{hideAlert:function(){return e(pe(!1))}}})(Lt),At=function(e){function t(e){var n;return Object(o.a)(this,t),n=Object(l.a)(this,Object(h.a)(t).call(this,e)),e.setLanguage(de),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"body"},this.props.showConfirm.show?r.a.createElement(Rt,{messageKey:this.props.showConfirm.messageKey,onOk:this.props.showConfirm.okAction}):r.a.createElement(r.a.Fragment,null),this.props.showAlert.show?r.a.createElement(jt,{messageKey:this.props.showAlert.messageKey}):r.a.createElement(r.a.Fragment,null),r.a.createElement(Ae,null),this.props.showHelp?r.a.createElement(xt,null):r.a.createElement(r.a.Fragment,null),r.a.createElement("hr",null),r.a.createElement(kt,null))}}]),t}(r.a.Component),Nt=Object(y.b)(function(e){return{showHelp:e.components.showHelp,showConfirm:e.components.showConfirm,showAlert:e.components.showAlert}},function(e){return{setLanguage:function(t){return e(ce(t))}}})(At),_t=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"spinner"})}}]),t}(r.a.Component),It=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).refName=r.a.createRef(),e.refPass=r.a.createRef(),e.state={correct:!0,logging:!1,errCode:0,showPass:!1,remember:!1},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onRegClick",value:function(){this.props.history.push("/register")}},{key:"onSubmit",value:function(e){if(!this.state.logging){var t=this.refName.current.value,n=this.refPass.current.value;this.requestLogin(t,n),e.preventDefault()}}},{key:"cancel",value:function(){this.props.history.push("/")}},{key:"requestLogin",value:function(e,t){var n=this;this.setState({correct:!0,logging:!0}),fetch(ae.devUrl+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nameOrEmail:e,password:t})}).then(function(e){return e.json()}).then(function(e){n.setState({correct:e.success,logging:!1,errCode:e.errCode}),!0===e.success&&(n.props.setToken(e.token,n.state.remember),n.props.history.push("/"))}).catch(function(e){console.error(e),n.setState({correct:!1,logging:!1,errCode:3})})}},{key:"componentWillUnmount",value:function(){window.KEYDOWNHANDLE=!0}},{key:"componentDidMount",value:function(){var e=this;window.KEYDOWNHANDLE=!1,this.ref.style.overflow="hidden",this.ref.style.width="0px",this.ref.style.transition="width 200ms linear",setTimeout(function(){e.ref.style.width="200px"},10)}},{key:"render",value:function(){var e=this,t=this.props.cap,n=this.state.showPass?"text":"password";return r.a.createElement("div",{className:"modalContainer noselect",onClick:ue},r.a.createElement("div",{ref:function(t){e.ref=t},className:"toolBar",onClick:function(e){e.stopPropagation()}},r.a.createElement("div",{className:"toolBarHeader"},r.a.createElement("span",{className:"toolBarCaption"},t.loginForm.title)),r.a.createElement("form",{onSubmit:this.onSubmit.bind(this),className:"loginForm"},r.a.createElement("input",{name:"nameOrEmail",ref:this.refName,required:!0,placeholder:t.loginForm.name}),r.a.createElement("input",{name:"password",ref:this.refPass,required:!0,placeholder:t.loginForm.password,type:n}),r.a.createElement("input",{type:"submit",value:"OK"}),r.a.createElement("input",{type:"button",value:t.loginForm.regForm,onClick:this.onRegClick.bind(this)}),r.a.createElement("input",{type:"button",value:t.buttons.cancel,onClick:this.cancel.bind(this)})),r.a.createElement("div",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",id:"show",onChange:function(t){e.setState({showPass:t.target.checked})}}),r.a.createElement("label",{htmlFor:"show"},t.buttons.showPass)),r.a.createElement("div",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",id:"remember",onChange:function(t){e.setState({remember:t.target.checked})}}),r.a.createElement("label",{htmlFor:"remember"},t.loginForm.rememberMe)),!1===this.state.correct?r.a.createElement("span",{className:"errorMessage"},t.loginForm.messages[this.state.errCode]):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"flexCenter"},this.state.logging?r.a.createElement(_t,null):r.a.createElement(r.a.Fragment,null))))}}]),t}(r.a.Component),Mt=Object(y.b)(function(e){return{cap:e.options.captions}},function(e){return{setToken:function(t,n){e(function(e,t){return{type:ge.SET_TOKEN,payload:{token:e,remember:t}}}(t,n))}}})(It),Dt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).refName=r.a.createRef(),e.refEmail=r.a.createRef(),e.refPass1=r.a.createRef(),e.refPass2=r.a.createRef(),e.state={correct:!1,message:"",fetching:!1,showPass:!1},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"check",value:function(e,t,n,i){var r,s=this.props.cap.registerForm,a={correct:!0};return i!==n&&(r=3),n.length<6&&(r=2),t.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)||(r=4),e.match(/^[a-zA-Z0-9]+([a-zA-Z0-9](_)[a-zA-Z0-9])*[a-zA-Z0-9]+$/)||(r=1),e.length<4&&(r=0),void 0!==r&&(a={correct:!1,message:s.inputMessages[r]}),a}},{key:"onSubmit",value:function(e){var t=this,n=this.props.cap.registerForm,i=this.refName.current.value,r=this.refEmail.current.value,s=this.refPass1.current.value,a=this.refPass2.current.value,o=this.check(i,r,s,a);o.correct&&fetch(ae.devUrl+"/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i,email:r,password:s})}).then(function(e){return e.json()}).then(function(e){e.registered&&(t.props.showAlert("regSucceed"),t.props.history.push("/")),t.setState({correct:e.registered,fetching:!1,message:n.serverMessages[e.errCode]})}).catch(function(e){t.setState({correct:!1,fetching:!1,message:n.serverMessages[5]})}),this.setState(Object(S.a)({},o,{fetching:!0})),e.preventDefault()}},{key:"cancel",value:function(){this.props.history.push("/")}},{key:"componentWillUnmount",value:function(){window.KEYDOWNHANDLE=!0}},{key:"componentDidMount",value:function(){var e=this;window.KEYDOWNHANDLE=!1,this.ref.style.overflow="hidden",this.ref.style.width="0px",this.ref.style.transition="width 200ms linear",setTimeout(function(){e.ref.style.width="200px"},10)}},{key:"render",value:function(){var e=this,t=this.props.cap,n=this.state.showPass?"text":"password";return r.a.createElement("div",{className:"modalContainer noselect",onClick:ue},r.a.createElement("div",{ref:function(t){e.ref=t},className:"toolBar center",onClick:function(e){e.stopPropagation()}},r.a.createElement("div",{className:"toolBarHeader"},r.a.createElement("span",{className:"toolBarCaption"},t.registerForm.title)),r.a.createElement("form",{onSubmit:this.onSubmit.bind(this),className:"loginForm"},r.a.createElement("input",{required:!0,ref:this.refName,placeholder:t.registerForm.name}),r.a.createElement("input",{required:!0,ref:this.refEmail,placeholder:t.registerForm.email,type:"email"}),r.a.createElement("input",{required:!0,ref:this.refPass1,placeholder:t.registerForm.password,type:n}),r.a.createElement("input",{required:!0,ref:this.refPass2,placeholder:t.registerForm.passwordAgain,type:n}),r.a.createElement("input",{type:"submit",value:"OK"}),r.a.createElement("input",{type:"button",value:t.buttons.cancel,onClick:this.cancel.bind(this)})),r.a.createElement("div",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",id:"show",onChange:function(t){e.setState({showPass:t.target.checked})}}),r.a.createElement("label",{htmlFor:"show"},t.buttons.showPass)),r.a.createElement("div",{className:"flexCenter"},this.state.fetching?r.a.createElement(_t,null):r.a.createElement(r.a.Fragment,null)),this.state.correct?r.a.createElement(r.a.Fragment,null):r.a.createElement("span",{className:"errorMessages"},this.state.message)))}}]),t}(r.a.Component),Bt=Object(y.b)(function(e){return{cap:e.options.captions}},function(e){return{showAlert:function(t){return e(pe(!0,t))}}})(Dt),Kt=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(h.a)(t).call(this))).state={activated:!0,logging:!1,errCode:0,message:""},e}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onLoginClick",value:function(){this.props.history.push("/login")}},{key:"cancel",value:function(){this.props.history.push("/")}},{key:"activate",value:function(e){var t=this;this.setState({activated:!1,logging:!0}),fetch(ae.devUrl+"/activate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then(function(e){return e.json()}).then(function(e){t.setState({activated:e.success,logging:!1,message:t.props.cap.activation.messages[e.errCode]}),e.success}).catch(function(e){console.error(e),t.setState({activated:!1,logging:!1,errCode:5})})}},{key:"componentWillUnmount",value:function(){window.KEYDOWNHANDLE=!0}},{key:"componentDidMount",value:function(){this.activate(this.props.match.params.id),window.KEYDOWNHANDLE=!1}},{key:"render",value:function(){var e=this.props.cap,t=this.state.message;return r.a.createElement("div",{className:"modalContainer noselect"},r.a.createElement("div",{className:"toolBar"},r.a.createElement("div",{className:"toolBarHeader"},r.a.createElement("span",{className:"toolBarCaption"},e.activation.title)),this.state.logging?r.a.createElement(_t,null):r.a.createElement("div",null,r.a.createElement("div",null,t),r.a.createElement("input",{type:"button",value:e.loginForm.title,onClick:this.onLoginClick.bind(this)}),r.a.createElement("input",{type:"button",value:e.buttons.cancel,onClick:this.cancel.bind(this)}))))}}]),t}(r.a.Component),Ht=Object(y.b)(function(e){return{cap:e.options.captions}},function(e){return{}})(Kt),Ft=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,{store:Ce},r.a.createElement(u.a,null,r.a.createElement(d.a,{path:"/",component:Nt}),r.a.createElement(d.a,{exact:!0,path:"/activate",component:Ht}),r.a.createElement(d.a,{path:"/activate/:id",component:Ht}),r.a.createElement(d.a,{path:"/login",component:Mt}),r.a.createElement(d.a,{path:"/register",component:Bt})))}}]),t}(r.a.Component);a.a.render(r.a.createElement(Ft,null),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.9b34414c.chunk.js.map