{"version":3,"sources":["reducers/shapes.js","actions/ScreenActions.js","actions/ShapeActions.js","components/colors.js","components/shapes/ShapeStyle.js","utils/geometry.js","components/shapes/Shape.js","components/shapes/cursors/Cursor.js","components/shapes/cursors/SelectCursor.js","components/shapes/ShapeManager.js","components/shapes/cursors/DrawCursor.js","components/shapes/SLineShape.js","components/shapes/markers/SnapMarkersManager.js","components/shapes/SelectionManager.js","components/shapes/SelectRectShape.js","components/shapes/shapecreators/ShapeBuilder.js","components/shapes/shapecreators/SelectRectCreator.js","components/shapes/cursors/DragCursor.js","components/shapes/cursors/PickCursor.js","handlers/MouseHandler.js","handlers/StatusFreeHandler.js","handlers/StatusPanHandler.js","handlers/StatusPickHandler.js","handlers/StatusSelectHandler.js","handlers/StatusCreateHandler.js","reducers/screen.js","config.js","actions/AppActions.js","locale/eng.js","reducers/options.js","actions/ComponentActions.js","reducers/component.js","actions/UserActions.js","reducers/user.js","reducers/index.js","store/configureStore.js","components/LangToogleButton.js","components/LangToggleBar.js","components/HelpButton.js","components/User.js","components/Header.js","components/ToolButton.js","components/ToolButtonGroup.js","components/shapes/markers/SnapMarker.js","components/shapes/markers/CenterSnapMarker.js","components/shapes/markers/PointMarker.js","components/shapes/pickers/PropertyPicker.js","components/shapes/pickers/PointPicker.js","components/shapes/TriangleShape.js","components/shapes/markers/MiddleSnapMarker.js","components/shapes/RectangleShape.js","components/shapes/markers/EndSnapMarker.js","components/shapes/LineShape.js","components/shapes/TextShape.js","components/shapes/pickers/DistancePicker.js","components/shapes/CircleShape.js","components/Screen.js","components/shapes/shapecreators/StraightLineCreator.js","components/shapes/RayLineShape.js","components/shapes/shapecreators/RayLineCreator.js","components/shapes/shapecreators/LineCreator.js","components/shapes/shapecreators/CircleCRCreator.js","components/shapes/shapecreators/Circle2PCreator.js","components/shapes/shapecreators/Circle3PCreator.js","components/shapes/shapecreators/TriangleCreator.js","components/shapes/shapecreators/RectangleCreator.js","components/CreateToolBar.js","components/OptionTogglePic.js","components/SnapToggleBar.js","components/PickButton.js","components/PropertyField.js","components/PropertyMultField.js","components/PropertyEditButtonsBar.js","components/PropertyEditorBar.js","components/SelectionToolBar.js","components/MainContainer.js","components/MySelf.js","components/HelpSection.js","components/Confirm.js","components/Alert.js","Body.js","components/Spinner.js","components/Login.js","components/Register.js","components/Activation.js","GeomEditor.js","index.js"],"names":["initialState","status","ScreenActions","ADD_SHAPE","CANCEL","CANCEL_SELECTION","CENTER_TO_POINT","CREATE_SHAPE","DELETE_CONFIRM","DELETE_SELECTED_SHAPES","PAN_SCREEN","PICK","REFRESH_SHAPE_MANAGER","REFRESH_SNAP_MARKERS","REPAINT","SELECT_ALL","SELECT_SHAPE","SET_BOUNDED_CIRCLE","SET_CUR_COORD","SET_CYCLIC_FLAG","SET_DIMENSIONS","SET_GRID_SNAP","SET_GRID_VISIBLE","SET_PICKED_DATA","SET_PREV_COORD","SET_PREV_STATUS","SET_RATIO","SET_REAL_WIDTH","SET_SCALE","SET_SCREEN_CONTEXT","SET_SELECTION_TYPE","SET_SNAP","SET_STATUS","SET_TOP_LEFT","START_PICKING","START_SELECTION","addShape","shape","type","payload","cancel","cancelSelection","centerToPoint","p","createNewShape","creator","deleteConfirm","deleteSelectedShapes","refreshShapeManager","refreshSnapMarkers","repaint","selectAll","selectShapes","selectedShapes","setBoundedCircle","setCurCoord","point","screenPoint","setCyclicFlag","flag","setDimensions","width","height","realWidth","topLeft","setGridSnap","snap","setGridVisible","visible","setPickedData","data","setPrevCoord","setPrevStatus","setRatio","ratio","setRealWidth","setScale","scale","anchor","setScreenContext","context","setScreenStatus","arguments","length","undefined","Status","FREE","params","SELECT","CREATE","PAN","picker","setSelectionType","selType","setSnap","snapClass","setTopLeft","startPicking","id","ShapeActions","SET_PROPERTY","Color","BLUE","BLACK","GRAY","RED","DARK_ORANGE","GREEN","SELECTED","SELECTION_AREA","GRID","ACTIVE_POINT_MARKER","POINT_MARKER","ShapeStyle","color","stroke","SOLID","Object","classCallCheck","this","originColor","DASH","SELECTION","Coord2D","x","y","Point2D","Line","p1","p2","SLine","_this","param","createLine","a","b","c","createClass","key","value","NaN","RLine","origin","vector","Vector","directionPoint","Arc","first","second","third","chord","Math","sqrt","Rectangle","bottomRight","abs","Circle","center","radius","Triangle","points","line1","Geometry","SLinePerpOnPoint","midPoint","line2","Intersection","SLineSLine","distance","modulus","d","d1","d2","line","sline","pointOnLine","rectTopLeft","rectBottomRight","lines","Array","forEach","l","LineSLine","push","ps","RectangleSLine","SLineFromRLine","isPointOnRayLine","rectTopLeft1","rectBottomRight1","rectTopLeft2","rectBottomRight2","lines1","lines2","l1","l2","LineLine","circle","dx","dy","LineShifted","r","A","B","C","QuadEquation","res","i","CircleSLine","k","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","screenWidth","round","getYbyX","isNaN","getXbyY","sx","sy","x1","y1","x2","y2","pointOnSLineProjection","SLineFromLine","min","v1","v2","v","acos","scalar","p3","midp1","midp2","pline1","pline2","arc","mp","m","limit","arcMiddlePoint","arcToPointArray","arcByTwoPointsCenter","len","angleVectors","angle","cos","sin","screenHeight","realHeight","realRect","screenRect","Shape","style","state","selected","underCursor","pointMarkers","controlPoints","cp","marker","setActive","map","model","setColor","getColor","objectSpread","setStyle","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","show","setPoint","prop","Cursor","possibleConstructorReturn","getPrototypeOf","call","p0","realToScreen","shiftKey","_ref","altKey","SelectCursor","ctx","refresh","strokeStyle","getStyle","setLineDash","getStroke","lineWidth","getWidth","beginPath","moveTo","lineTo","strokeRect","rectSize","drawPlus","drawMinus","size","ShapeManager","shapes","allShapes","dist","s","getDistance","getState","inSelection","setState","distances","getDistanceToControlPoints","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","tl","br","isInRect","_s$isInRect","cross","full","ok","deselectShapes","filter","DrawCursor","SLineShape","rad","activePoint","Map","set","regexp","get","prototype","PointToSLineDistance","concat","SnapMarkersManager","snapSet","Set","snapMarkersActive","snapMarkersAll","activeMarker","add","refreshMarkerList","delete","markers","has","constructor","clear","pos","minDistance","getPos","SelectionManager","selectionCreator","setNextPoint","setCurrent","getShape","SelectRectShape","rectangle","rect","realToScreenLength","ShapeBuilder","boundedCircle","legal","helperShapes","setControlPoints","name","SelectRectCreator","isNext","caption","DragCursor","pts","drawArrow","rotatePoint","PI","PickCursor","MouseHandler","curScreenPoint","coord","curPoint","prevCoord","screenProps","marginLeft","marginRight","marginTop","marginBottom","_ref2","prevPoint","screenToReal","toFixed","mouseOnScreen","isOutRect","_ref3","deltaY","actions","pixelRatio","temp","gridSnap","gridStep","snapMinDist","getRealRect","getScreenRect","snapMarkersManager","getDistanceToNearestMarker","snapDist","getActiveMarker","StatusFreeHandler","_MouseHandler","apply","inherits","cursor","setAdditional","shapeManager","findShapeNearPoint","selectDist","findControlPoints","selectionManager","reset","setNext","selectControlPoints","StatusPanHandler","dragX0","dragY0","StatusPickHandler","curCoord","getPickedData","StatusSelectHandler","findShapeInRect","StatusCreateHandler","shapeCreator","isLegal","cyclicCreation","createShape","DRAWING","PICK_END","MOVETRANS","xAxeShape","yAxeShape","curShape","gridStepPixels","pickedData","editId","fix","prevStatus","selectionType","grid","statusBar","statusParams","xAxe","yAxe","getRealWidthParams","pr","rh","gsp","mouseHandler","options","devUrl","_devUrl","AppActions","SET_LANGUAGE","REQUEST_LANGUAGE","SHOW_HELP","SHOW_CONFIRM","SHOW_ALERT","setLanguage","captions","showHelp","showConfirm","messageKey","okAction","showAlert","blink","form","document","querySelector","oldColor","backgroundColor","count","int","setInterval","clearInterval","about","email","user","buttons","logout","showPass","pick","registerForm","title","password","passwordAgain","serverMessages","inputMessages","loginForm","regForm","rememberMe","messages","activation","deleteShapes","regSucceed","create","createToolBar","createCheckBox","createSLine2Points","createRayLine2Points","createSegmentLine2Points","createCircleCenter","createCircle2P","createCircle3P","createRect","createRectCenter","createTriangle","createTriangleInscribed","createTriangleDescribed","createParabola","createHyperbola","createFunction","development","modify","crossSelect","fullSelect","snapToggleBar","snapGridPoints","snapEndPoints","snapCenterPoints","snapMiddlePoints","showGrid","propBar","noShapesSelected","NShapesSelected","deleteButton","Title","Radius","Center","P1","P2","Origin","Direction","P3","pickers","PointPicker","description","steps","DistancePicker","creators","StraightLineCreator","RayLineCreator","LineCreator","CircleCRCreator","Circle2PCreator","Circle3PCreator","RectangleCreator","TriangleCreator","help","hotKeys","desc","keyDownHandler","ctrlKey","keyCode","action","ComponentActions","SET_ACTIVE_SNAP_BUTTON","CLEAR_ACTIVE_SNAP_BUTTON","SET_ACTIVE_CREATE_BUTTON","SET_ACTIVE_LANG_BUTTON","SET_ACTIVE_SELECTION_BUTTON","activeLangButton","defaultLang","activeSnapButtons","message","UserActions","SET_TOKEN","LOGOUT","token","cookie","split","jwtDecode","rootReducer","combineReducers","screen","bc","handlerOptions","curHelperShapes","creationStep","currentShape","random","viewPortWidth","viewPortHeight","prevCursor","prevMouseHandler","addSnapMarkers","getMarkers","prevScreenPoint","getProperties","setProperty","_action$payload","addSnap","removeSnap","expires","remember","components","newState","activeButtons","activeCreateButton","bind","window","store","createStore","applyMiddleware","thunk","LangToggleButton","props","pressed","requestLanguage","lang","setActiveLangButtonId","className","react_default","createElement","onClick","React","Component","LangToggleBar","LangToogleButton_LangToggleButton","connect","dispatch","fetch","method","body","JSON","stringify","headers","Content-Type","then","json","capt","catch","e","console","error","HelpButton","User","links","react_router_dom","to","cap","Fragment","Header","components_LangToggleBar","components_HelpButton","components_User","ToolButton","activeButtonId","dev","setButtonFirst","cls","onclick","ToolButtonGroup","firstButton","expanded","_this2","find","button","ToolButton_ToolButton","index","activeButton","onMouseEnter","onMouseLeave","SnapMarker","markerShape","MARKER_SIZE","SNAP_MARKER_SIZE","EndSnapMarker","CircleShape","setMarker","PointMarker","active","fillStyle","fill","PropertyPicker","getType","TriangleShape","triangle","activePointMarker","list","MiddleSnapMarker","l3","PointToLineDistance","pointInRect","every","LineRectangle","some","RectangleShape","tr","bl","top","bottom","right","left","RectangleRectangle","LineShape","TextShape","text","log","save","font","basePoint","CENTER","measureText","newPoint","translate","rotate","strokeText","restore","setAnchor","setFont","setText","sign","screenCenter","screenRadius","CenterSnapMarker","outRectX1","outRectY1","outRectX2","outRectY2","inRectX1","inRectY1","inRectX2","inRectY2","pointInRectByPoints","Screen","dragGrid","gridPointsX","gridPointsY","gridNumbersX","gridNumbersY","drag","lbut","mbut","KEYDOWNHANDLE","refCanvas","createRef","setCoord","drawShape","solidStyle","dashStyle","firstX","firstY","hor","vert","ix","iy","xGridLineNumber","yGridLineNumber","gridLinesCountX","gridLinesCountY","px","py","w","format","s0","h","drawSelf","lineJoin","fillRect","drawGrid","status_bar","getName","getCurrentStep","getHelperShapes","pickShape","pickHelperShapes","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","drawCoordinates","getMarker","getSelectionShape","drawCursor","target","getBoundingClientRect","clientX","clientY","move","ctlrKey","rdx","rdy","preventDefault","down","up","wheel","leave","click","getSelectedShapes","toggleShapeSelected","getComputedStyle","sw","Number","parseInt","sh","canvas","getContext","addEventListener","mwheelHandle","passive","paint","resize","oncontextmenu","setShapes","ref","onMouseMove","mmoveHandle","onMouseDown","mdownHandle","onMouseUp","mupHandle","mleaveHandle","menter","clickHandle","construct","toConsumableArray","RayLineShape","CircleRLine","PointToRLineDistance","RectangleRLine","radiusLine","diamLine","gray","blue","getOuterCircle","CreateToolBar","setButtonId","setActiveCreateButton","onChange","checked","htmlFor","ToolButtonGroup_ToolButtonGroup","ownProps","OptionTogglePic","clearActiveSnapButton","setActiveSnapButton","SnapToggleBar","OptionTogglePic_OptionTogglePic","PickButton","PropertyField","correct","prevValue","originValue","match","charCode","n","parseFloat","propKey","display","flexDirection","alignContent","label","change","onKeyPress","onKeyDown","stopPropagation","onBlur","blur","onFocus","components_PickButton","nextProps","prevState","pickedValue","PropertyMultField","setActivePoint","focus","PropertyEditButtonsBar","PropertyEditorBar","shapeTitle","propElements","shapeType","keys","components_PropertyMultField","components_PropertyField","components_PropertyEditButtonsBar","SelectionToolBar","MainContainer","Screen_Screen","assign","borderWidth","borderStyle","components_CreateToolBar","components_SelectionToolBar","components_PropertyEditorBar","components_SnapToggleBar","MySelf","textAlign","ref2","position","whiteSpace","fontSize","HelpSection","animate","maxw","current","maxh","t","clientWidth","clientHeight","item","react","zIndex","components_MySelf","Confirm","onOk","hideConfirm","Alert","hideAlert","Body","components_Confirm","components_Alert","Header_Header","components_HelpSection","components_MainContainer","Spinner","Login","refName","refPass","logging","errCode","history","pass","requestLogin","nameOrEmail","success","setToken","_this3","overflow","transition","setTimeout","_this4","onSubmit","required","placeholder","onRegClick","Spinner_Spinner","Register","refEmail","refPass1","refPass2","fetching","pass1","pass2","messIndex","check","registered","Activation","activated","activate","onLoginClick","GeomEditor","es","react_router","path","component","exact","ReactDOM","render","GeomEditor_GeomEditor","getElementById"],"mappings":"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","file":"static/js/main.9b34414c.chunk.js","sourcesContent":["const initialState = {\r\n    status: 'FREE',\r\n}\r\nexport function shapeReducer(state = initialState) {\r\n    return state\r\n}","import {Status} from '../reducers/screen';\r\nexport const ScreenActions={\r\n    ADD_SHAPE : 'ADD_SHAPE',\r\n    CANCEL : 'CANCEL',\r\n    CANCEL_SELECTION : 'CANCEL_SELECTION',\r\n    CENTER_TO_POINT : 'CENTER_TO_POINT',\r\n    CREATE_SHAPE : 'CREATE_SHAPE',\r\n    DELETE_CONFIRM:'DELETE_CONFIRM',\r\n    DELETE_SELECTED_SHAPES : 'DELETE_SELECTED_SHAPES',\r\n    PAN_SCREEN : 'PAN_SCREEN',\r\n    PICK : 'PICK',\r\n    REFRESH_SHAPE_MANAGER : 'REFRESH_SHAPE_MANAGER',\r\n    REFRESH_SNAP_MARKERS : 'REFRESH_SNAP_MARKERS',\r\n    REPAINT : 'REPAINT',\r\n    SELECT_ALL : 'SELECT_ALL',\r\n    SELECT_SHAPE : 'SELECT_SHAPE',\r\n    SET_BOUNDED_CIRCLE : 'SET_BOUNDED_CIRCLE',\r\n    SET_CUR_COORD : 'SET_CUR_COORD',\r\n    SET_CYCLIC_FLAG : 'SET_CYCLIC_FLAG',\r\n    SET_DIMENSIONS : 'SET_DIMENSIONS',\r\n    SET_GRID_SNAP : 'SET_GRID_SNAP',\r\n    SET_GRID_VISIBLE : 'SET_GRID_VISIBLE',\r\n    SET_PICKED_DATA : 'SET_PICKED_DATA',\r\n    SET_PREV_COORD : 'SET_PREV_COORD',\r\n    SET_PREV_STATUS : 'SET_PREV_STATUS',\r\n    SET_RATIO : 'SET_RATIO',\r\n    SET_REAL_WIDTH : 'SET_REAL_WIDTH',\r\n    SET_SCALE : 'SET_SCALE',\r\n    SET_SCREEN_CONTEXT : 'SET_SCREEN_CONTEXT',\r\n    SET_SELECTION_TYPE : 'SET_SELECTION_TYPE',\r\n    SET_SNAP : 'SET_SNAP',\r\n    SET_STATUS : 'SET_STATUS',\r\n    SET_TOP_LEFT : 'SET_TOP_LEFT',\r\n    START_PICKING : 'START_PICKING',\r\n    START_SELECTION : 'START_SELECTION',\r\n\r\n  addShape:(shape)=>{\r\n    return {\r\n        type:ScreenActions.ADD_SHAPE,\r\n        payload:shape\r\n    }\r\n},\r\n  cancel:()=>{\r\n    return{\r\n        type:ScreenActions.CANCEL\r\n    }\r\n},\r\n  cancelSelection:()=>{\r\n    return{\r\n        type:ScreenActions.CANCEL_SELECTION\r\n    }\r\n},\r\n  centerToPoint:(p)=>{\r\n    return {\r\n        type:ScreenActions.CENTER_TO_POINT,\r\n        payload:p\r\n    }\r\n},\r\n createNewShape:(creator)=>{\r\n    return {\r\n        type: ScreenActions.CREATE_SHAPE,\r\n        payload:creator,\r\n    }\r\n},\r\n deleteConfirm:()=> {\r\n    return {\r\n        type: ScreenActions.DELETE_CONFIRM,\r\n    }\r\n},\r\n deleteSelectedShapes:() =>{\r\n    return {\r\n        type: ScreenActions.DELETE_SELECTED_SHAPES,\r\n    }\r\n},\r\n refreshShapeManager:()=>{\r\n    return{\r\n        type:ScreenActions.REFRESH_SHAPE_MANAGER\r\n    }\r\n},\r\n refreshSnapMarkers:()=>{\r\n    return{\r\n        type:ScreenActions.REFRESH_SNAP_MARKERS\r\n    }\r\n},\r\n repaint:()=>{\r\n    return{\r\n        type:ScreenActions.REPAINT\r\n    }\r\n},\r\n selectAll:()=> {\r\n    return {\r\n        type: ScreenActions.SELECT_ALL\r\n    }\r\n},\r\n selectShapes:(selectedShapes) =>{\r\n    return {\r\n        type: ScreenActions.SELECT_SHAPE,\r\n        payload: selectedShapes,\r\n    }\r\n},\r\n setBoundedCircle:()=>{\r\n    return{\r\n        type:ScreenActions.SET_BOUNDED_CIRCLE\r\n    }\r\n},\r\n setCurCoord:(point,screenPoint)=> {\r\n    return {\r\n        type: ScreenActions.SET_CUR_COORD,\r\n        payload: {point,screenPoint},\r\n    }\r\n},\r\n setCyclicFlag:(flag)=> {\r\n    return {\r\n        type: ScreenActions.SET_CYCLIC_FLAG,\r\n        payload: flag,\r\n    }\r\n},\r\n setDimensions:(width,height,realWidth,topLeft)=>{\r\n    return{\r\n        type:ScreenActions.SET_DIMENSIONS,\r\n        payload:{width,height,realWidth,topLeft}\r\n    }\r\n},\r\n setGridSnap:(snap) =>{\r\n    return {\r\n        type: ScreenActions.SET_GRID_SNAP,\r\n        payload: snap,\r\n    }\r\n},\r\n setGridVisible:(visible)=>{\r\n    return {\r\n        type: ScreenActions.SET_GRID_VISIBLE,\r\n        payload: visible,\r\n    }\r\n},\r\n setPickedData:(data)=>{\r\n    return{\r\n        type:ScreenActions.SET_PICKED_DATA,\r\n        payload:data\r\n    }\r\n},\r\n setPrevCoord:(point,screenPoint) =>{\r\n    return {\r\n        type: ScreenActions.SET_PREV_COORD,\r\n        payload: {point,screenPoint},\r\n    }\r\n},\r\n setPrevStatus:()=>{\r\n    return{\r\n        type:ScreenActions.SET_PREV_STATUS,\r\n    }\r\n},\r\n setRatio:(ratio)=>{\r\n    return{\r\n        type:ScreenActions.SET_RATIO,\r\n        payload:ratio\r\n    }\r\n},\r\n setRealWidth:(width)=>{\r\n    return{\r\n        type:ScreenActions.SET_REAL_WIDTH,\r\n        payload:width\r\n    }\r\n},\r\n setScale:(scale,anchor)=>{\r\n    return{\r\n        type:ScreenActions.SET_SCALE,\r\n        payload:{scale,anchor}\r\n    }\r\n},\r\n setScreenContext:(context)=> {\r\n    return {\r\n        type: ScreenActions.SET_SCREEN_CONTEXT,\r\n        payload: context,\r\n    }\r\n},\r\nsetScreenStatus:(status=Status.FREE,params)=>{\r\n    let payload=null;\r\n    let type=null;\r\n    switch(status){\r\n        case Status.SELECT:\r\n            type=ScreenActions.START_SELECTION;\r\n            break;\r\n        case Status.CREATE:\r\n            type=ScreenActions.CREATE_SHAPE;\r\n            payload={creator:params.creator}\r\n            break;\r\n        case Status.CANCEL:\r\n            type=ScreenActions.CANCEL;\r\n            break;\r\n        case Status.PAN:\r\n            type=ScreenActions.PAN_SCREEN;\r\n        break;\r\n        case Status.PICK:\r\n            type=ScreenActions.PICK;\r\n            payload={picker:params.picker}\r\n            break;\r\n        default:\r\n    }\r\n    return {\r\n        type,\r\n        payload\r\n    }\r\n},\r\n setSelectionType:(selType)=> {\r\n    return {\r\n        type: ScreenActions.SET_SELECTION_TYPE,\r\n        payload: selType,\r\n    }\r\n},\r\nsetSnap:(snapClass,snap)=> {\r\n    const type=snapClass==='grid'?ScreenActions.SET_GRID_SNAP:ScreenActions.SET_SNAP\r\n    const payload=snapClass==='grid'?snap:{snapClass:snapClass,snap:snap}\r\n    return {\r\n        type: type,\r\n        payload: payload,\r\n    }\r\n},\r\nsetTopLeft:(p)=>{\r\n    return {\r\n        type:ScreenActions.SET_TOP_LEFT,\r\n        payload:p\r\n    }\r\n},\r\n startPicking:(id,picker)=>{\r\n    return{\r\n        type:ScreenActions.START_PICKING,\r\n        payload:{id,picker}\r\n    }\r\n}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","export const ShapeActions={\r\n    CREATE_SHAPE:'CREATE_SHAPE',\r\n    SELECT_SHAPE:'SELECT_SHAPE',\r\n    SET_PROPERTY:'SET_PROPERTY',\r\n}\r\nexport function createShape(shapeCreator) {\r\n    return {\r\n        type: ShapeActions.CREATE_SHAPE,\r\n        payload: shapeCreator,\r\n    }\r\n}\r\nexport function setProperty(prop){\r\n    return {\r\n        type:ShapeActions.SET_PROPERTY,\r\n        payload:prop,\r\n    }\r\n}\r\n\r\n","export const Color={\r\n    BLUE:\"#0000FF\",\r\n    BLACK:\"#000000\",\r\n    GRAY:\"#D0D0D0\",\r\n    RED:\"#FF0000\",\r\n    DARK_ORANGE:\"#FFB000\",\r\n    GREEN:\"#00FF00\",\r\n    SELECTED:\"#0000FF\",\r\n    SELECTION_AREA:'#000000',\r\n    GRID:\"#909090\",\r\n    ACTIVE_POINT_MARKER:\"#FF0000\",\r\n    POINT_MARKER:\"#0000FF\",\r\n}","import { Color } from \"../colors\";\r\n\r\nexport default class ShapeStyle {\r\n    static DASH=[1,3];\r\n    static SOLID=[0];\r\n    static SELECTION=[1,1];\r\n    constructor(color=Color.BLACK,stroke=ShapeStyle.SOLID,width=1){\r\n        this.color=color;\r\n        this.originColor=this.color;\r\n        this.width=width;\r\n        this.type=stroke;\r\n        switch(stroke){\r\n            case ShapeStyle.DASH:\r\n                this.stroke=[1,3];\r\n                break;\r\n            case ShapeStyle.SOLID:\r\n                this.stroke=[0];\r\n                break;\r\n            case ShapeStyle.SELECTION:\r\n                this.stroke=[1,1];\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getColor() {\r\n        return this.color;\r\n    }\r\n\r\n    setColor(color) {\r\n        this.color = color;\r\n    }\r\n    getType(){return this.type;}\r\n    getStroke() {\r\n        return this.stroke;\r\n    }\r\n\r\n    setStroke(stroke) {\r\n        this.stroke = stroke;\r\n    }\r\n    getWidth(){\r\n        return this.width;\r\n    }\r\n    setWidth(width){\r\n        this.width=width;\r\n    }\r\n\r\n}","\r\nexport class Coord2D{\r\n    constructor(x=0,y=0){\r\n        this.x=x;\r\n        this.y=y;\r\n    }\r\n}\r\nexport class Point2D {\r\n    constructor(x=0,y=0){\r\n    this.x=x;\r\n    this.y=y;\r\n}\r\n}\r\n\r\nexport class Line{\r\n    constructor(p1,p2){\r\n        if(arguments.length===2){\r\n        this.p1=p1;\r\n        this.p2=p2;\r\n        }\r\n        if(arguments.length===4){\r\n            this.p1={x:arguments[0],y:arguments[1]}\r\n            this.p2={x:arguments[2],y:arguments[3]}\r\n        }\r\n    }\r\n\r\n}\r\nexport class SLine{\r\n    constructor(){\r\n        let param=arguments;\r\n        let createLine=(p1,p2)=>{\r\n            this.a=p1.y-p2.y;\r\n            this.b=p2.x-p1.x;\r\n            this.c=p1.x*p2.y-p1.y*p2.x;\r\n        };\r\n        switch (param.length) {\r\n            case(0):createLine(new Coord2D(),new Coord2D());break;\r\n            case(1):createLine(param[0].p1,param[0].p2);break;\r\n            case(2):createLine(param[0],param[1]);break;\r\n            case(3):this.a=param[0];this.b=param[1];this.c=param[2];break;\r\n            default:\r\n        }\r\n    }\r\n    getYbyX(x){\r\n        if(this.b!==0)return -(this.a*x+this.c)/this.b;else return NaN;\r\n    }\r\n    getXbyY(y){\r\n        if(this.a!==0)return -(this.b*y+this.c)/this.a;else return NaN;\r\n    }\r\n\r\n}\r\n\r\nexport class RLine {\r\n\r\n    constructor(p1=new Coord2D(), p2=new Coord2D()){\r\n    this.origin=p1;\r\n    this.vector=new Vector();\r\n    this.vector.x=p2.x-p1.x;\r\n    this.vector.y=p2.y-p1.y;\r\n    this.directionPoint={x:this.origin.x+this.vector.x,y:this.origin.y+this.vector.y}\r\n    }\r\n\r\n    getYbyX(x){\r\n    if(this.b!==0){\r\n        let y=-(this.a*x+this.c)/this.b;\r\n        if(((x-this.origin.x)*this.vector.x)>=0&&((y-this.origin.y)*this.vector.y)>=0)return y;\r\n        return NaN;\r\n        }\r\n    else return NaN;\r\n    }\r\n\r\n    getXbyY(y){\r\n    if(this.a!==0){\r\n        let x=-(this.b*y+this.c)/this.a;\r\n        if(((x-this.origin.x)*this.vector.x)>=0&&((y-this.origin.y)*this.vector.y)>=0)return y;\r\n        return NaN;\r\n    }else return NaN;\r\n    }\r\n\r\n}\r\n\r\nexport class Arc {\r\n    constructor(first, second, third){\r\n    this.first=first;\r\n    this.second=second;\r\n    this.third=third;\r\n    this.chord=Math.sqrt((second.x-first.x)*(second.x-first.x)+(second.y-first.y)*(second.y-first.y));\r\n}\r\n\r\n\r\n}\r\n\r\n\r\nexport class Rectangle {\r\n    constructor(topLeft=new Coord2D(),bottomRight=new Coord2D()){\r\n        this.topLeft={};\r\n        this.bottomRight={};\r\n        this.topLeft.x=topLeft.x>bottomRight.x?bottomRight.x:topLeft.x;\r\n        this.topLeft.y=topLeft.y<bottomRight.y?bottomRight.y:topLeft.y;\r\n        this.width=Math.abs(bottomRight.x-topLeft.x);\r\n        this.height=Math.abs(bottomRight.y-topLeft.y);\r\n        this.bottomRight.x=this.topLeft.x+this.width;\r\n        this.bottomRight.y=this.topLeft.y-this.height;\r\n    }\r\n    \r\n}\r\n\r\nexport class Circle {\r\n    constructor(center=new Coord2D(),radius=0){\r\n        this.center=center;\r\n        this.radius=radius;\r\n    }\r\n    \r\n}\r\n\r\nexport class Triangle {\r\n    constructor(points=[new Coord2D(),new Coord2D(),new Coord2D()]){\r\n        this.points=points;\r\n    }\r\n    getOuterCircle(){\r\n        let line1=Geometry.SLinePerpOnPoint(new SLine(this.points[0],this.points[1]),Geometry.midPoint(this.points[0],this.points[1]));\r\n        let line2=Geometry.SLinePerpOnPoint(new SLine(this.points[0],this.points[2]),Geometry.midPoint(this.points[0],this.points[2]));\r\n        let p=Intersection.SLineSLine(line1,line2);\r\n        if(p===null) p=Geometry.midPoint(this.points[0],this.points[1]);\r\n        let circle=new Circle(p,Geometry.distance(p,this.points[0]));\r\n        return circle;\r\n    }\r\n\r\n}\r\n\r\nexport class Vector {\r\n    constructor(p1=new Coord2D(),p2=new Coord2D()){\r\n    this.x=p2.x-p1.x;\r\n    this.y=p2.y-p1.y;\r\n    this.modulus=Math.sqrt(this.x*this.x+this.y*this.y);\r\n    }\r\n}\r\nexport class Intersection{\r\n    static SLineSLine(line1, line2) {\r\n        let d = line1.a * line2.b - line1.b * line2.a;\r\n        if (d === 0) return null;\r\n        let d1 = -line1.c * line2.b - (-line2.c * line1.b);\r\n        let d2 = -line2.c * line1.a - (-line1.c * line2.a);\r\n        return new Coord2D(d1 / d, d2 / d);\r\n    }\r\n    static LineSLine(line, sline) {\r\n        let p = Intersection.SLineSLine(sline, new SLine(line));\r\n        if (p === null) return null;\r\n        if (!Geometry.pointOnLine(p, line.p1, line.p2)) return null;\r\n        return p;\r\n    }\r\n    static RectangleSLine(rectTopLeft, rectBottomRight,line) {\r\n        let lines = new Array(4);\r\n        let points = [];\r\n        lines[0] = new Line(rectTopLeft.x, rectTopLeft.y, rectBottomRight.x, rectTopLeft.y);\r\n        lines[1] = new Line(rectTopLeft.x, rectBottomRight.y, rectBottomRight.x, rectBottomRight.y);\r\n        lines[2] = new Line(rectTopLeft.x, rectTopLeft.y, rectTopLeft.x, rectBottomRight.y);\r\n        lines[3] = new Line(rectBottomRight.x, rectTopLeft.y, rectBottomRight.x, rectBottomRight.y);\r\n        lines.forEach(l=> {\r\n            const p=Intersection.LineSLine(l, line)\r\n            if(p&&points.length<2) points.push(p);\r\n            });\r\n        return points;\r\n    }\r\n    static RectangleRLine(rectTopLeft, rectBottomRight,line) {\r\n        const ps=Intersection.RectangleSLine(rectTopLeft, rectBottomRight,Geometry.SLineFromRLine(line));\r\n        const points=[];\r\n        ps.forEach(p=>{if(Geometry.isPointOnRayLine(line,p)) points.push(p)});\r\n        return points;\r\n    }\r\n    static RectangleRectangle(rectTopLeft1,rectBottomRight1,rectTopLeft2,rectBottomRight2){\r\n        const lines1=[new Line(rectTopLeft1.x,rectTopLeft1.y,rectBottomRight1.x,rectTopLeft1.y),\r\n                      new Line(rectBottomRight1.x,rectTopLeft1.y,rectBottomRight1.x,rectBottomRight1.y),\r\n                      new Line(rectTopLeft1.x,rectBottomRight1.y,rectBottomRight1.x,rectBottomRight1.y),\r\n                      new Line(rectTopLeft1.x,rectTopLeft1.y,rectTopLeft1.x,rectBottomRight1.y)];\r\n        const lines2=[new Line(rectTopLeft2.x,rectTopLeft2.y,rectBottomRight2.x,rectTopLeft2.y),\r\n                      new Line(rectBottomRight2.x,rectTopLeft2.y,rectBottomRight2.x,rectBottomRight2.y),\r\n                      new Line(rectTopLeft2.x,rectBottomRight2.y,rectBottomRight2.x,rectBottomRight2.y),\r\n                      new Line(rectTopLeft2.x,rectTopLeft2.y,rectTopLeft2.x,rectBottomRight2.y)];\r\n        const ps=[];\r\n        lines1.forEach(l1=>{lines2.forEach((l2)=>{\r\n                const p=Intersection.LineLine(l1,l2);\r\n                if(p) ps.push(p);\r\n        })})   \r\n        return ps; \r\n    }\r\n    static LineRectangle(line, rectTopLeft, rectBottomRight) {\r\n        let lines = new Array(4);\r\n        let points = [];\r\n        lines[0] = new Line(rectTopLeft.x, rectTopLeft.y, rectBottomRight.x, rectTopLeft.y);\r\n        lines[1] = new Line(rectTopLeft.x, rectBottomRight.y, rectBottomRight.x, rectBottomRight.y);\r\n        lines[2] = new Line(rectTopLeft.x, rectTopLeft.y, rectTopLeft.x, rectBottomRight.y);\r\n        lines[3] = new Line(rectBottomRight.x, rectTopLeft.y, rectBottomRight.x, rectBottomRight.y);\r\n        lines.forEach(l=> {\r\n            const p=Intersection.LineLine(line, l)\r\n            if(p&&points.length<2) points.push(p);\r\n            });\r\n        return points;\r\n    }\r\n    static LineLine(l1,l2){\r\n        const p=Intersection.SLineSLine(new SLine(l1),new SLine(l2));\r\n        if(p){\r\n            if(Geometry.pointOnLine(p, l1.p1, l1.p2)&&Geometry.pointOnLine(p, l2.p1, l2.p2)) return p;\r\n        }\r\n        return null;\r\n    }\r\n    static CircleSLine(circle,line) {\r\n        let dx = -circle.center.x;\r\n        let dy = -circle.center.y;\r\n        let sline = Geometry.LineShifted(line, dx, dy);\r\n        let a = sline.a;\r\n        let b = sline.b;\r\n        let c = sline.c;\r\n        let r = circle.radius;\r\n        if (b === 0) {\r\n            a = sline.b;\r\n            b = sline.a;\r\n        }\r\n        let A = a * a + b * b;\r\n        let B = 2 * a * c;\r\n        let C = c * c - r * r * b * b;\r\n        let x = Geometry.QuadEquation(A, B, C);\r\n        if (x === null) return null;\r\n        let res = new Array(x.length);\r\n        for (let i = 0; i < x.length; i++) {\r\n            res[i] = new Coord2D();\r\n            if (sline.b === 0) {\r\n                res[i].y = x[i];\r\n                res[i].x = -(a * x[i] + c) / b;\r\n            } else {\r\n                res[i].x = x[i];\r\n                res[i].y = -(a * x[i] + c) / b;\r\n            }\r\n            res[i].x = res[i].x - dx;\r\n            res[i].y = res[i].y - dy;\r\n        }\r\n        return res;\r\n    }\r\n    static CircleRLine(circle,line) {\r\n        let points = Intersection.CircleSLine(circle, new SLine(line.origin, new Coord2D(line.origin.x+line.vector.x,line.origin.y+line.vector.y)));\r\n        if (points === null) return null;\r\n        let k = 0;\r\n        let i = 0;\r\n        for (let p of points) {\r\n\r\n            if (Geometry.isPointOnRayLine(line, p)) k++; else points[i] = null;\r\n            i++;\r\n        }\r\n        if (k === 0) return null;\r\n        let res = new Array(k);\r\n        k = 0;\r\n        for (let p of points) if (p != null) {\r\n            res[k++] = p;\r\n        }\r\n        return res;\r\n    }\r\n}\r\nexport default class Geometry {\r\n\r\n    static realToScreenLength(value, realWidth, screenWidth){\r\n        return Math.round(value/(realWidth/screenWidth));\r\n    }\r\n    static SLineFromRLine(line){\r\n        return new SLine(line.origin,new Coord2D(line.origin.x+line.vector.x,line.origin.y+line.vector.y));\r\n    }\r\n    static SLineFromLine(line){\r\n        return new SLine(line.p1,line.p2);\r\n    }\r\n    static SLineByTwoPoints(p1, p2) {\r\n        return new SLine(p1, p2);\r\n    }\r\n\r\n    static SLinePerpOnPoint(line, p) {\r\n        return new SLine(-line.b, line.a, -line.a * p.y + line.b * p.x);\r\n    }\r\n\r\n    static LineShifted(line, dx, dy) {\r\n        let p = new Array(2);\r\n        for (let i = 0; i < 2; i++) {\r\n            let x = i;\r\n            let y = line.getYbyX(x);\r\n            if (isNaN(y)) {\r\n                y = i;\r\n                x = line.getXbyY(y);\r\n            }\r\n            x = x + dx;\r\n            y = y + dy;\r\n            p[i] = new Coord2D(x, y);\r\n        }\r\n        return new SLine(p[0], p[1]);\r\n    }\r\n\r\n\r\n    static pointInRect(p, rectTopLeft, rectBottomRight) {\r\n        let sx = (p.x - rectBottomRight.x) * (p.x - rectTopLeft.x);\r\n        let sy = (p.y - rectBottomRight.y) * (p.y - rectTopLeft.y);\r\n        return (sx <= 0 && sy <= 0);\r\n    }\r\n    static pointInRectByPoints(x,y, x1,y1,x2,y2) {\r\n        if((x>=x1&&x<=x2)&&(y<=y1&&y>=y2)) return true;\r\n        return false;\r\n    }\r\n    static pointOnLine(p, p1, p2) {\r\n        if(!p||!p1||!p2)return false; \r\n        let sx = Math.round((p.x - p1.x) * (p.x - p2.x)*100000)/100000;\r\n        let sy = Math.round((p.y - p1.y) * (p.y - p2.y)*100000)/100000;\r\n        return (sx <= 0 && sy <= 0);\r\n    }\r\n\r\n    static pointOnSLineProjection(p, line){\r\n        return Intersection.SLineSLine(line,Geometry.SLinePerpOnPoint(line,p));\r\n    }\r\n    static  PointToSLineDistance(p, line){\r\n        let res=Geometry.distance(p,Geometry.pointOnSLineProjection(p, line));\r\n        return res;\r\n    }\r\n\r\n    static PointToRLineDistance(p, line){\r\n        let point=Geometry.pointOnSLineProjection(p, Geometry.SLineFromRLine(line));\r\n        let res;\r\n        if(Geometry.isPointOnRayLine(line,point)) res=Geometry.distance(p,point);else res=Geometry.distance(p,line.origin);\r\n        return res;\r\n    }\r\n    static PointToLineDistance(p, line){\r\n        let point=Geometry.pointOnSLineProjection(p, Geometry.SLineFromLine(line));\r\n        let res;\r\n        if(Geometry.pointOnLine(point,line.p1,line.p2)) res=Geometry.distance(p,point);\r\n        else res=Math.min(Geometry.distance(p,line.p1),Geometry.distance(p,line.p2));\r\n        return res;\r\n    }\r\n    static midPoint(p1, p2) {\r\n        return new Coord2D((p2.x + p1.x) / 2, (p2.y + p1.y) / 2);\r\n    }\r\n\r\n    static scalar(v1, v2) {\r\n        return v1.x * v2.x + v1.y * v2.y;\r\n    }\r\n\r\n    static modulus(v) {\r\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\r\n    }\r\n\r\n    static angleVectors(v1, v2) {\r\n        return Math.acos(this.scalar(v1, v2) / (v1.modulus * v2.modulus));\r\n    }\r\n\r\n    static arcCenterPoint(p1, p2, p3) {\r\n        let line1 = new SLine(p1, p2);\r\n        let line2 = new SLine(p2, p3);\r\n        let midp1 = Geometry.midPoint(p1, p2);\r\n        let midp2 = Geometry.midPoint(p2, p3);\r\n        let pline1 = Geometry.SLinePerpOnPoint(line1, midp1);\r\n        let pline2 = Geometry.SLinePerpOnPoint(line2, midp2);\r\n        return Intersection.SLineSLine(pline1, pline2);\r\n    }\r\n\r\n    static isPointOnRayLine(line, point) {\r\n        return (((point.x - line.origin.x) * line.vector.x) >= 0 && ((point.y - line.origin.y) * line.vector.y) >= 0);\r\n    }\r\n\r\n    static arcMiddlePoint(arc) {\r\n        let mp = Geometry.midPoint(arc.first, arc.third);\r\n        let m = Math.sqrt((mp.x - arc.center.x) * (mp.x - arc.center.x) + (mp.y - arc.center.y) * (mp.y - arc.center.y));\r\n        return new Coord2D(arc.radius / m + arc.center.x, arc.radius / m + arc.center.y);\r\n    }\r\n\r\n    static arcToPointArray(arc, limit) {\r\n        if (arc.chord <= limit) {\r\n            let res = new Array(2);\r\n            res[0] = arc.first;\r\n            res[1] = arc.third;\r\n            return res;\r\n        }\r\n        let mp = Geometry.arcMiddlePoint(arc);\r\n        let first = Geometry.arcToPointArray(Geometry.arcByTwoPointsCenter(arc.first, mp, arc.center), limit);\r\n        let second = Geometry.arcToPointArray(Geometry.arcByTwoPointsCenter(mp, arc.third, arc.center), limit);\r\n        let len = first.length - 1 + second.length;\r\n        let res = new Array(len);\r\n        for (let i = 0; i <= len; i++) {\r\n            if (i < first.length - 1) res[i] = first[i];\r\n            else res[i] = second[i];\r\n        }\r\n        return res;\r\n    }\r\n\r\n    static arcByTwoPointsCenter(p1, p2, c) {\r\n        let mp = Geometry.midPoint(p1, p2);\r\n        let m = Math.sqrt((mp.x - c.x) * (mp.x - c.x) + (mp.y - c.y) * (mp.y - c.y));\r\n        let r = Math.sqrt((p1.x - c.x) * (p1.x - c.x) + (p1.y - c.y) * (p1.y - c.y));\r\n        return new Arc(p1, new Coord2D(r / m + c.x, r / m + c.y), p2);\r\n    }\r\n\r\n    static arcLength(arc) {\r\n        let v1 = new Vector(arc.center, arc.first);\r\n        let v2 = new Vector(arc.center, arc.third);\r\n        let a = Geometry.angleVectors(v1, v2);\r\n        return a * arc.radius;\r\n    }\r\n\r\n    static QuadEquation(a, b, c) {\r\n        if (a === 0) return null;\r\n        let d = b * b - 4 * a * c;\r\n        if (d < 0) return null;\r\n        let res = [];\r\n        if (d === 0) {\r\n            res = [];\r\n            res[0] = -b / (2 * a);\r\n            return res;\r\n        }\r\n        res = [];\r\n        res[0] = (-b + Math.sqrt(d)) / (2 * a);\r\n        res[1] = (-b - Math.sqrt(d)) / (2 * a);\r\n        return res;\r\n    }\r\n    static distance(p1,p2) {\r\n        return Math.sqrt((p2.x-p1.x) * (p2.x-p1.x) + (p2.y-p1.y) * (p2.y-p1.y));\r\n    }\r\n    static rotatePoint(point, angle, center){\r\n        let p=new Coord2D(point.x-center.x,point.y-center.y);\r\n        let res=new Coord2D();\r\n        res.x=p.x*Math.cos(angle)-p.y*Math.sin(angle)+center.x;\r\n        res.y=p.x*Math.sin(angle)+p.y*Math.cos(angle)+center.y;\r\n        return res;\r\n    }\r\n    static screenToReal(x,y,screenWidth,screenHeight,topLeft,bottomRight){\r\n        let realWidth=bottomRight.x-topLeft.x;\r\n        let realHeight=topLeft.y-bottomRight.y;\r\n        let rx=x/screenWidth*realWidth+topLeft.x;\r\n        let ry=topLeft.y-y/screenHeight*realHeight;\r\n        return {x:rx,y:ry};\r\n    }\r\n    static realToScreen(point,realRect, screenRect){\r\n        let ratio = realRect.width / screenRect.width;\r\n        let x = Math.round((point.x - realRect.topLeft.x) / ratio);\r\n        let y = -Math.round((point.y - realRect.topLeft.y) / ratio);\r\n        return {x,y};\r\n    }\r\n}\r\n\r\n\r\n","import {Color} from '../colors';\r\nimport ShapeStyle from './ShapeStyle';\r\nimport Geometry from '../../utils/geometry';\r\nexport default class Shape {\r\n    constructor(){\r\n        this.style=new ShapeStyle(Color.BLACK,ShapeStyle.SOLID);\r\n        this.state={selected:false,underCursor:false};\r\n        this.pointMarkers=[];\r\n        this.controlPoints=[];\r\n    }\r\n    setActivePoint(){\r\n        for(const cp of this.controlPoints) {cp.selected=false;cp.marker.setActive(false)}\r\n    }\r\n    getDistanceToControlPoints(point){\r\n        return this.controlPoints.map(cp=>Geometry.distance(point,cp.point))\r\n    }\r\n    getModel(){\r\n        return this.model;\r\n    }\r\n    setColor(color){\r\n        this.style.setColor(color);\r\n    }\r\n    getColor(){\r\n        return this.style.getColor();\r\n    }\r\n    getStyle() {\r\n        return this.style;\r\n    }\r\n\r\n    setStyle(style) {\r\n        this.style = style;\r\n    }\r\n    setState(state){\r\n        this.state={...this.state,...state};\r\n        if(this.state.selected===true) {\r\n            this.setStyle(new ShapeStyle(Color.SELECTED,ShapeStyle.SOLID,2));\r\n            for(let cp of this.controlPoints){\r\n                cp.show=true\r\n                cp.marker.setPoint(cp.point)\r\n                cp.marker.setActive(cp.selected||cp.underCursor)\r\n            }\r\n            return;\r\n        }else {\r\n            this.setStyle(new ShapeStyle(Color.BLACK,ShapeStyle.SOLID,1));\r\n            for(let cp of this.controlPoints){\r\n                cp.show=false;\r\n                cp.selected=false;\r\n                cp.underCursor=false;\r\n            }\r\n            this.pointMarkers=null;\r\n            //this.activePointMarker=null;\r\n        }\r\n        if(this.state.underCursor===true) this.setStyle(new ShapeStyle(Color.BLACK,ShapeStyle.SOLID,2));\r\n    }\r\n    getState(){\r\n        return this.state;\r\n    }\r\n    setProperty(prop){\r\n        if(prop.key==='Color') this.setColor(prop.value);\r\n    }\r\n}","import Shape from \"../Shape\";\r\nimport Geometry from \"../../../utils/geometry\";\r\n\r\nexport default class Cursor extends Shape{\r\n    constructor(point){\r\n        super();\r\n        this.p=point;\r\n    }\r\n\r\n    refresh( realRect,  screenRect){\r\n        this.p0 = Geometry.realToScreen(this.p,realRect,screenRect);\r\n    }\r\n    setCoord( point) {\r\n        this.p=point;\r\n    }\r\n    setAdditional({shiftKey,altKey}){\r\n        this.shiftKey=shiftKey;\r\n        this.altKey=altKey;\r\n    }\r\n}\r\n","import Cursor from \"./Cursor\";\r\n\r\nexport default class SelectCursor extends Cursor{\r\n\r\n    drawSelf(ctx, realRect,  screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        let size=15;\r\n        let rectSize=6;\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x-size,this.p0.y);\r\n        ctx.lineTo(this.p0.x+size,this.p0.y);\r\n        ctx.moveTo(this.p0.x,this.p0.y-size);\r\n        ctx.lineTo(this.p0.x,this.p0.y+size);\r\n        ctx.strokeRect(this.p0.x-rectSize/2,this.p0.y-rectSize/2,rectSize,rectSize);\r\n        ctx.stroke();\r\n        if(this.shiftKey&&!this.altKey) this.drawPlus(ctx,size);\r\n        if(this.altKey) this.drawMinus(ctx,size);\r\n    }\r\n    drawPlus(ctx,size){\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x+size/4,this.p0.y-size/2);\r\n        ctx.lineTo(this.p0.x+size/4+size/2,this.p0.y-size/2);\r\n        ctx.moveTo(this.p0.x+size/2,this.p0.y-size/4);\r\n        ctx.lineTo(this.p0.x+size/2,this.p0.y-size/4-size/2);\r\n        ctx.stroke();\r\n    }\r\n    drawMinus(ctx, size){\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x+size/4,this.p0.y-size/2);\r\n        ctx.lineTo(this.p0.x+size/4+size/2,this.p0.y-size/2);\r\n        ctx.stroke();\r\n    }\r\n\r\n}\r\n","export default class ShapeManager {\r\n    constructor(shapes){\r\n        this.allShapes=shapes;\r\n    }\r\n    setShapes(shapes,selType){\r\n        this.allShapes=shapes;\r\n        this.selType=selType;\r\n    }\r\n    findShapeNearPoint(p, dist){\r\n        let shape=null;\r\n        this.allShapes.forEach(s=>{\r\n            let d=s.getDistance(p);\r\n            if(d!==null&&d<=dist) {shape=s;}\r\n            if(!s.getState().inSelection)s.setState({underCursor:false});\r\n        });\r\n        if(shape!==null){\r\n            shape.setState({underCursor:true});\r\n\r\n        }\r\n    }\r\n    findControlPoints(p, dist){\r\n        for(const shape of this.allShapes){\r\n            if(shape.getState().selected){\r\n                const distances=shape.getDistanceToControlPoints?shape.getDistanceToControlPoints(p):[];\r\n                let i=0;\r\n                for(const d of distances){\r\n                    if(d!==null&&d<=dist) {shape.controlPoints[i].underCursor=true}\r\n                        else {shape.controlPoints[i].underCursor=false}\r\n                    i++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    selectControlPoints(p, dist){\r\n        for(const shape of this.allShapes){\r\n            if(shape.getState().selected){\r\n                const distances=shape.getDistanceToControlPoints?shape.getDistanceToControlPoints(p):[];\r\n                let i=0;\r\n                for(const d of distances){\r\n                    if(d!==null&&d<=dist) {shape.controlPoints[i].selected=true}\r\n                    i++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    findShapeInRect(p1,p2){\r\n        let tl={...p1};\r\n        let br={...p2};\r\n        if(p1.x>p2.x) {tl.x=p2.x;br.x=p1.x}\r\n        if(p1.y<p2.y) {tl.y=p2.y;br.y=p1.y}\r\n        let shape=[];\r\n        this.allShapes.forEach(s=>{\r\n            if(!s.isInRect)return;//if method isInRect isn't implemented\r\n            const {cross,full}=s.isInRect(tl,br);\r\n            let ok=false;\r\n            if(this.selType==='fullSelect'&&full===true) ok=true;\r\n            if(this.selType==='crossSelect'&&cross===true) ok=true;\r\n            if(this.selType==='crossSelect'&&full===true) ok=true;\r\n            if(ok) {shape.push(s);}\r\n            s.setState({underCursor:false});\r\n        });\r\n        if(shape.length!==0)shape.forEach(s=>{s.setState({underCursor:true,inSelection:true})});\r\n    }\r\n    selectShapes({shiftKey,altKey}){\r\n        if(!shiftKey&&!altKey)this.deselectShapes();\r\n        this.allShapes.forEach(shape => {\r\n            if(shape.getState().underCursor) {\r\n               shape.setState({selected:true});\r\n                if(altKey)shape.setState({selected:false});\r\n            }\r\n        }); \r\n    }\r\n    deselectShapes(){\r\n        this.allShapes.forEach(shape => shape.setState({selected:false}));\r\n    }\r\n    getSelectedShapes(){\r\n        return this.allShapes.filter((shape)=>shape.getState().selected===true);\r\n    }\r\n}","import Cursor from \"./Cursor\";\r\n\r\nexport default class DrawCursor extends Cursor{\r\n\r\n    drawSelf(ctx, realRect,  screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        let size=10;\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x-size,this.p0.y);\r\n        ctx.lineTo(this.p0.x+size,this.p0.y);\r\n        ctx.moveTo(this.p0.x,this.p0.y-size);\r\n        ctx.lineTo(this.p0.x,this.p0.y+size);\r\n        ctx.stroke();\r\n    }\r\n}\r\n","import Geometry,{Circle,Coord2D, Intersection} from \"../../utils/geometry\";\r\nimport Shape from \"./Shape\";\r\n\r\nexport default class SLineShape extends Shape{\r\n    constructor(line){\r\n        super();\r\n        this.line=line;\r\n        this.model=line;\r\n    }\r\n    drawSelf(ctx,realRect, screenRect){\r\n        this.refresh(realRect, screenRect);\r\n        if(this.p0===null||this.p1===null)return;\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x,this.p0.y);\r\n        ctx.lineTo(this.p1.x,this.p1.y);\r\n        ctx.stroke();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        let br=new Coord2D(realRect.topLeft.x+realRect.width,realRect.topLeft.y-realRect.height);\r\n        let c=Geometry.midPoint(realRect.topLeft,br);\r\n        let rad=Geometry.distance(realRect.topLeft,br)/2;\r\n        let circle=new Circle(c,rad);\r\n        let p=Intersection.CircleSLine(circle,this.line);\r\n        if(p!==null){\r\n            if(p.length===1){\r\n                let r=this.p[0];\r\n                p=new Array(2);\r\n                p[0]=r;\r\n                p[1]=p[0];\r\n                }\r\n            this.p0=Geometry.realToScreen(p[0],realRect,screenRect);\r\n            this.p1=Geometry.realToScreen(p[1],realRect,screenRect);\r\n        }else{\r\n            this.p0=null;\r\n            this.p1=null;\r\n        }\r\n    }\r\n    setActivePoint(){\r\n        this.activePoint=null;\r\n    }\r\n    getMarkers(){\r\n        return null;\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'SLine',regexp:/\\s*/});\r\n        prop.set('A',{value:this.line.a,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('B',{value:this.line.b,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('C',{value:this.line.c,regexp:/^-?\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'A':\r\n                if(!(this.line.b===0&&prop.value===0)) this.line.a=prop.value;\r\n                break;\r\n            case 'B':\r\n                if(!(this.line.a===0&&prop.value===0)) this.line.b=prop.value;\r\n                break;\r\n            case 'C':\r\n                this.line.c=prop.value;\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        return Geometry.PointToSLineDistance(point,this.line);\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        const full=false;\r\n        const cross=Intersection.RectangleSLine(topLeft,bottomRight,this.line).length>0;\r\n        return {cross,full};    \r\n    }\r\n    toString(){\r\n        return `Line ${this.line.a}X+${this.line.b}Y+${this.line.c}=0`;\r\n    }\r\n}","import Geometry from '../../../utils/geometry';\r\nexport default class SnapMarkersManager {\r\n    constructor(){\r\n        this.snapSet=new Set();\r\n        this.snapMarkersActive = new Set();\r\n        this.snapMarkersAll = new Set();\r\n        this.activeMarker=null;\r\n    }\r\n    addSnap(snapClass){\r\n        this.snapSet.add(snapClass);\r\n        this.refreshMarkerList();\r\n    }\r\n    removeSnap(snapClass){\r\n        this.snapSet.delete(snapClass);\r\n        this.refreshMarkerList();\r\n    }\r\n    addSnapMarkers(markers){\r\n        if(markers===null) return;\r\n        for(let m of markers){\r\n            this.snapMarkersAll.add(m);\r\n            if(this.snapSet.has(m.constructor)) this.snapMarkersActive.add(m);\r\n        }\r\n    }\r\n    refreshMarkerList(){\r\n        for(let m of this.snapMarkersAll)\r\n            if(this.snapSet.has(m.constructor)) this.snapMarkersActive.add(m);\r\n        for(let m of this.snapMarkersActive)\r\n            if(!this.snapSet.has(m.constructor)) this.snapMarkersActive.delete(m);\r\n    }\r\n    clear(){\r\n        this.snapMarkersAll.clear();\r\n        this.snapMarkersActive.clear();\r\n    }\r\n    getDistanceToNearestMarker(pos,minDistance){\r\n        let marker=null;\r\n        let min=minDistance;\r\n        for(let m of this.snapMarkersActive){\r\n            let d=Geometry.distance(m.getPos(),pos);\r\n            if(d<=minDistance) {\r\n                if(d<=min) {\r\n                    marker=m;\r\n                    min=d;\r\n                }\r\n            }\r\n        }\r\n        this.activeMarker=marker;\r\n        if(marker!=null)return min;else return -1;\r\n    }\r\n    getActiveMarker(){\r\n        return this.activeMarker;\r\n    }\r\n}\r\n","export default class SelectionManager {\r\n    constructor(creator){\r\n        this.creator=creator;\r\n        this.selectionCreator=new creator();\r\n    }\r\n    setNext(point){\r\n        this.selectionCreator.setNextPoint(point);\r\n    }\r\n    setCurrent(point){\r\n        this.selectionCreator.setCurrent(point);\r\n        \r\n    }\r\n    getSelectionShape(){\r\n        return this.selectionCreator.getShape();\r\n    }\r\n    reset(){\r\n        this.selectionCreator=new this.creator();\r\n    }\r\n}","import Geometry,{Rectangle} from '../../utils/geometry';\r\nimport {Color} from '../colors';\r\nimport Shape from \"./Shape\";\r\nimport ShapeStyle from './ShapeStyle';\r\n\r\nexport default class SelectRectShape extends Shape{\r\n    constructor(rectangle){\r\n        super();\r\n        this.rectangle=rectangle;\r\n        this.rect=new Rectangle()\r\n        this.setStyle(new ShapeStyle(Color.SELECTION_AREA,ShapeStyle.SELECTION));\r\n    }\r\n\r\n    drawSelf(ctx, realRect, screenRect) {\r\n        this.refresh(realRect, screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.strokeRect(this.rect.topLeft.x,this.rect.topLeft.y,this.rect.width,this.rect.height);\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.rect.topLeft=Geometry.realToScreen(this.rectangle.topLeft,realRect,screenRect);\r\n        this.rect.width=Geometry.realToScreenLength(this.rectangle.width,realRect.width,screenRect.width);\r\n        this.rect.height=Geometry.realToScreenLength(this.rectangle.height,realRect.height,screenRect.height);\r\n    }\r\n    getModel(){\r\n        return this.rectangle;\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        return list;\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n    }\r\n    toString(){\r\n        return \"RectSelection\";\r\n    }\r\n}","export default class ShapeBuilder {\r\n     constructor(boundedCircle){\r\n        this.i=0;\r\n        this.boundedCircle=boundedCircle;\r\n        this.legal=true;\r\n    }\r\n\r\n    getShape(){\r\n        return this.shape;\r\n    }\r\n    getHelperShapes(){\r\n        return this.helperShapes;\r\n    }\r\n    isNext(){\r\n        return (this.i<this.points.length);\r\n    }\r\n    setNextPoint(p){\r\n        this.setCurrent(p);\r\n        this.i++;\r\n    }\r\n\r\n    isLegal(){return this.legal}\r\n    refresh(boundedCircle){\r\n        this.boundedCircle=boundedCircle;\r\n        if(this.points[this.i]!=null) this.setControlPoints();\r\n    }\r\n    setStyle(style){\r\n        this.style=style;\r\n    }\r\n    getCurrentStep(){\r\n        return this.i;\r\n    }\r\n    getName(){\r\n        return this.name;\r\n    }\r\n}","import {Rectangle} from '../../../utils/geometry';\r\nimport SelectRectShape from '../SelectRectShape';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class SelectRectCreator extends ShapeBuilder{\r\n    static caption=\"RectSelection\";\r\n    rectangle=new Rectangle();\r\n    points=new Array(2);\r\n    constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"SelectRectCreator\"\r\n        this.shape=new SelectRectShape(this.rectangle);\r\n        this.helperShapes = [];\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0)this.rectangle=new Rectangle(this.points[0], this.points[1]);\r\n        this.shape=new SelectRectShape(this.rectangle);\r\n    }\r\n    setControlPoints(){\r\n        \r\n    }\r\n    reset(){return new SelectRectCreator();}\r\n}","import Geometry from \"../../../utils/geometry\";\r\nimport Cursor from \"./Cursor\";\r\n\r\nexport default class DragCursor extends Cursor{\r\n\r\n    drawArrow(ctx,pts){\r\n        ctx.beginPath();\r\n        ctx.moveTo(pts[0].x,pts[0].y);\r\n        ctx.lineTo(pts[1].x,pts[1].y);\r\n        ctx.moveTo(pts[2].x,pts[2].y);\r\n        ctx.lineTo(pts[1].x,pts[1].y);\r\n        ctx.moveTo(pts[1].x,pts[1].y);\r\n        ctx.lineTo(pts[3].x,pts[3].y);\r\n        ctx.stroke();\r\n    }\r\n    drawSelf(ctx, realRect,  screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=2;\r\n        let size=10;\r\n        let pts=new Array(4);\r\n        pts[0]=this.p0;\r\n        pts[1]={x:pts[0].x,y:pts[0].y-size};\r\n        pts[2]={x:pts[0].x-size/3,y:pts[0].y-size*2/3};\r\n        pts[3]={x:pts[0].x+size/3,y:pts[0].y-size*2/3};\r\n        this.drawArrow(ctx,pts);\r\n        this.drawArrow(ctx,pts.map(p=>Geometry.rotatePoint(p,Math.PI/2,this.p0)));\r\n        this.drawArrow(ctx,pts.map(p=>Geometry.rotatePoint(p,Math.PI,this.p0)));\r\n        this.drawArrow(ctx,pts.map(p=>Geometry.rotatePoint(p,Math.PI*3/2,this.p0)));\r\n\r\n    }\r\n\r\n}\r\n","import Cursor from \"./Cursor\";\r\n\r\nexport default class PickCursor extends Cursor{\r\n\r\n    drawSelf(ctx, realRect,  screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        let size=10;\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x,this.p0.y-size);\r\n        ctx.lineTo(this.p0.x,this.p0.y+size);\r\n        ctx.moveTo(this.p0.x-size,this.p0.y);\r\n        ctx.lineTo(this.p0.x+size,this.p0.y);\r\n        ctx.arc(this.p0.x,this.p0.y,10,0,2*Math.PI);\r\n        ctx.stroke();\r\n    }\r\n\r\n}\r\n","import { Status } from \"../reducers/screen\";\r\nimport Geometry, { Rectangle } from \"../utils/geometry\";\r\n\r\nexport class MouseHandler {\r\n    constructor({point,curScreenPoint}){\r\n        this.coord=point\r\n        this.curPoint=curScreenPoint;\r\n        this.prevCoord=point\r\n    }\r\n    isOutRect(p,screenProps){\r\n        return p.x<screenProps.marginLeft||p.x>screenProps.screenWidth-screenProps.marginRight\r\n         ||p.y<screenProps.marginTop||p.y>screenProps.screenHeight-screenProps.marginBottom;\r\n     }\r\n     move({curPoint,screenProps}){\r\n        this.prevPoint={...this.curPoint}\r\n        this.curPoint={...curPoint}\r\n\r\n        this.coord=Geometry.screenToReal(this.curPoint.x,this.curPoint.y,screenProps.screenWidth,screenProps.screenHeight,screenProps.topLeft,screenProps.bottomRight);\r\n        this.coord.x=+this.coord.x.toFixed(4);\r\n        this.coord.y=+this.coord.y.toFixed(4);\r\n\r\n        //this.coord={x:this.options.curCoord.x,y:this.options.curCoord.y};\r\n        this.mouseOnScreen=!this.isOutRect(this.curPoint,screenProps);\r\n        if(!this.mouseOnScreen){\r\n            this.curPoint.x=this.prevPoint.x;\r\n            this.curPoint.y=this.prevPoint.y;\r\n        }\r\n\r\n     }\r\n     mouseOnScreen(screenProps){\r\n         return !this.isOutRect(this.curPoint,screenProps);\r\n     }\r\n     down(){}\r\n     up(){}\r\n     leave(){\r\n         this.mouseOnScreen=false;\r\n     }\r\n     wheel({deltaY,point,screenProps}){\r\n        if(deltaY>0)\r\n        {\r\n            if(screenProps.realWidth<=1000) screenProps.actions.setScale(1.2,point);\r\n        }else{\r\n            if(screenProps.pixelRatio>=0.001) screenProps.actions.setScale(1/1.2,point);\r\n        }\r\n     }\r\n     snap(screenProps){\r\n        let temp={x:this.coord.x,y:this.coord.y};\r\n        if(screenProps.gridSnap){\r\n            let x=Math.round(temp.x/screenProps.gridStep)*screenProps.gridStep;\r\n            let y=Math.round(temp.y/screenProps.gridStep)*screenProps.gridStep;\r\n            let dx=x-temp.x;\r\n            let dy=y-temp.y;\r\n            if((Math.sqrt(dx*dx+dy*dy)<=screenProps.snapMinDist*screenProps.pixelRatio)){\r\n                if(!this.isOutRect(Geometry.realToScreen({x,y},this.getRealRect(screenProps),this.getScreenRect(screenProps)),screenProps)) {\r\n                    temp.x = x;\r\n                    temp.y = y;\r\n                    this.curPoint = Geometry.realToScreen(temp,this.getRealRect(screenProps),this.getScreenRect(screenProps));\r\n                }\r\n                }\r\n        }\r\n        if(screenProps.status!==Status.FREE){\r\n            let d = screenProps.snapMarkersManager.getDistanceToNearestMarker(temp,screenProps.snapDist*screenProps.pixelRatio);\r\n            if(d>=0&&d<=screenProps.snapMinDist*screenProps.pixelRatio){\r\n                temp=screenProps.snapMarkersManager.getActiveMarker().getPos();\r\n                this.curPoint = Geometry.realToScreen(temp,this.getRealRect(screenProps),this.getScreenRect(screenProps));\r\n            }\r\n        }\r\n        this.coord=temp;\r\n     }\r\n\r\n     getRealRect(screenProps){\r\n        let realRect = new Rectangle();\r\n        realRect.topLeft = screenProps.topLeft;\r\n        realRect.bottomRight=screenProps.bottomRight;\r\n        realRect.width = screenProps.bottomRight.x-screenProps.topLeft.x;\r\n        realRect.height=screenProps.topLeft.y-screenProps.bottomRight.y;\r\n        return realRect;\r\n    }\r\n    getScreenRect(screenProps){\r\n        let screenRect = new Rectangle();\r\n        screenRect.topLeft.x = 0;\r\n        screenRect.topLeft.y = 0;\r\n        screenRect.width = screenProps.screenWidth;\r\n        screenRect.height = screenProps.screenHeight;\r\n        return screenRect;\r\n    }\r\n\r\n}","import { MouseHandler } from \"./MouseHandler\";\r\nimport Geometry from \"../utils/geometry\";\r\nimport { Status } from \"../reducers/screen\";\r\n\r\nexport class StatusFreeHandler extends MouseHandler {\r\n    move({curPoint,screenProps,shiftKey,altKey}){\r\n        super.move({curPoint,screenProps});\r\n        screenProps.cursor.setAdditional({shiftKey,altKey});\r\n        screenProps.shapeManager.findShapeNearPoint(this.coord,screenProps.selectDist*screenProps.pixelRatio);\r\n        screenProps.shapeManager.findControlPoints(this.coord,screenProps.selectDist*screenProps.pixelRatio);\r\n        screenProps.actions.setCurCoord(this.coord,this.curPoint);\r\n    }\r\n    down({curPoint,screenProps}){\r\n        this.curPoint={...curPoint};\r\n        this.prevCoord=Geometry.screenToReal(this.curPoint.x,this.curPoint.y,screenProps.screenWidth,screenProps.screenHeight,screenProps.topLeft,screenProps.bottomRight);\r\n        screenProps.selectionManager.reset();\r\n        screenProps.selectionManager.setNext(Geometry.screenToReal(this.curPoint.x,this.curPoint.y,screenProps.screenWidth,screenProps.screenHeight,screenProps.topLeft,screenProps.bottomRight));\r\n        screenProps.actions.setScreenStatus(Status.SELECT);\r\n        screenProps.actions.setPrevCoord(this.prevCoord,this.curPoint);\r\n    }\r\n    click({screenProps,shiftKey,altKey}){\r\n        screenProps.shapeManager.selectShapes({shiftKey,altKey});\r\n        screenProps.shapeManager.selectControlPoints(this.coord,screenProps.selectDist*screenProps.pixelRatio,shiftKey);\r\n    }\r\n}","import { MouseHandler } from \"./MouseHandler\";\r\n\r\nexport class StatusPanHandler extends MouseHandler {\r\n    constructor({point,curScreenPoint}){\r\n        super({point,curScreenPoint});\r\n        this.dragX0=point.x;\r\n        this.dragY0=point.y;\r\n    }\r\n    move({curPoint,screenProps}){\r\n        //let coord=Geometry.screenToReal(curPoint.x,curPoint.y,screenProps.screenWidth,screenProps.screenHeight,screenProps.topLeft,screenProps.bottomRight);\r\n        super.move({curPoint,screenProps});\r\n        let dx=this.coord.x-this.dragX0;\r\n        let dy=this.coord.y-this.dragY0;\r\n        screenProps.actions.setTopLeft({x:screenProps.topLeft.x-dx,y:screenProps.topLeft.y-dy});\r\n        screenProps.actions.setBoundedCircle();\r\n    }\r\n    wheel(){}\r\n    leave({screenProps}){\r\n        super.leave();\r\n        screenProps.actions.setPrevStatus();\r\n    }\r\n}","import { MouseHandler } from \"./MouseHandler\";\r\n\r\nexport class StatusPickHandler extends MouseHandler {\r\n    move({curPoint,screenProps}){\r\n        super.move({curPoint,screenProps});\r\n        this.snap(screenProps);\r\n        screenProps.picker.setCurrent(this.coord);\r\n        screenProps.actions.setCurCoord(this.coord,this.curPoint);\r\n    }\r\n    click({screenProps}){\r\n        screenProps.picker.setNextPoint(screenProps.curCoord);\r\n                    if(!screenProps.picker.isNext())\r\n                    {\r\n                        screenProps.actions.setPickedData(screenProps.picker.getPickedData());\r\n                        screenProps.actions.refreshSnapMarkers();\r\n                        screenProps.actions.refreshShapeManager();\r\n                    }\r\n    }\r\n}","import { MouseHandler } from \"./MouseHandler\";\r\n\r\nexport class StatusSelectHandler extends MouseHandler {\r\n    move({curPoint,screenProps}){\r\n        super.move({curPoint,screenProps});\r\n        this.snap(screenProps);\r\n        screenProps.selectionManager.setCurrent(screenProps.curCoord);\r\n        screenProps.shapeManager.findShapeInRect(this.prevCoord,this.coord);\r\n        screenProps.shapeManager.findShapeNearPoint(this.coord,screenProps.selectDist*screenProps.pixelRatio);\r\n        screenProps.actions.setCurCoord(this.coord,this.curPoint);\r\n    }\r\n    up({screenProps}){\r\n        screenProps.actions.cancel();\r\n    }\r\n    click(){}\r\n}","import { MouseHandler } from \"./MouseHandler\";\r\n\r\nexport class StatusCreateHandler extends MouseHandler {\r\n    move({curPoint,screenProps}){\r\n        super.move({curPoint,screenProps});\r\n        this.snap(screenProps);\r\n        screenProps.shapeCreator.setCurrent(this.coord);\r\n        screenProps.actions.setCurCoord(this.coord,this.curPoint);\r\n    }\r\n    click({screenProps}){\r\n        screenProps.shapeCreator.setCurrent(screenProps.curCoord);\r\n        if(screenProps.shapeCreator.isLegal()) screenProps.shapeCreator.setNextPoint(screenProps.curCoord);\r\n        if(!screenProps.shapeCreator.isNext())\r\n        {\r\n            //screenProps.shapes.push(screenProps.shapeCreator.getShape());\r\n            screenProps.actions.addShape(screenProps.shapeCreator.getShape());\r\n            screenProps.actions.refreshSnapMarkers();\r\n            screenProps.actions.refreshShapeManager();\r\n            if(screenProps.cyclicCreation){\r\n                screenProps.actions.createShape(screenProps.shapeCreator.reset(screenProps.boundedCircle));\r\n            }else {\r\n                screenProps.actions.cancel();\r\n            }\r\n        }\r\n    }\r\n}","import {ScreenActions} from \"../actions/ScreenActions\";\r\nimport {ShapeActions}  from '../actions/ShapeActions';\r\nimport SelectCursor from \"../components/shapes/cursors/SelectCursor\";\r\nimport Geometry, { Circle, Coord2D, SLine } from \"../utils/geometry\";\r\nimport ShapeManager from \"../components/shapes/ShapeManager\";\r\nimport DrawCursor from \"../components/shapes/cursors/DrawCursor\";\r\nimport SLineShape from \"../components/shapes/SLineShape\";\r\nimport ShapeStyle from \"../components/shapes/ShapeStyle\";\r\nimport SnapMarkersManager from \"../components/shapes/markers/SnapMarkersManager\";\r\nimport SelectionManager from \"../components/shapes/SelectionManager\";\r\nimport SelectRectCreator from \"../components/shapes/shapecreators/SelectRectCreator\";\r\nimport DragCursor from \"../components/shapes/cursors/DragCursor\";\r\nimport PickCursor from \"../components/shapes/cursors/PickCursor\";\r\nimport { Color } from \"../components/colors\";\r\nimport { StatusFreeHandler } from \"../handlers/StatusFreeHandler\";\r\nimport { StatusPanHandler } from \"../handlers/StatusPanHandler\";\r\nimport { StatusPickHandler } from \"../handlers/StatusPickHandler\";\r\nimport { StatusSelectHandler } from \"../handlers/StatusSelectHandler\";\r\nimport { StatusCreateHandler } from \"../handlers/StatusCreateHandler\";\r\n\r\nexport const Status={\r\n    FREE:'FREE',\r\n    SELECT:'SELECT',\r\n    CREATE:'CREATE',\r\n    DRAWING:'DRAWING',\r\n    CANCEL:'CANCEL',\r\n    PAN:'PAN',\r\n    PICK:'PICK',\r\n    PICK_END:'PICK_END', \r\n    MOVETRANS:'MOVETRANS',\r\n}\r\nconst xAxeShape=new SLineShape(new SLine(0,1,0),new Circle(new Coord2D(0,0),8));\r\nconst yAxeShape=new SLineShape(new SLine(1,0,0),new Circle(new Coord2D(0,0),8));\r\nxAxeShape.setStyle(new ShapeStyle(Color.RED,ShapeStyle.SOLID));\r\nyAxeShape.setStyle(new ShapeStyle(Color.RED,ShapeStyle.SOLID));\r\n\r\nconst initialState = {\r\n    bottomRight:{x:10,y:-10},\r\n    boundedCircle:new Circle({x:0,y:0},20),\r\n    curCoord:{x:0,y:0},\r\n    curScreenPoint:{x:225,y:225},\r\n    cursor:new SelectCursor({x:0,y:0}),\r\n    curShape:null,\r\n    cyclicCreation:false,\r\n    gridSnap:false,\r\n    gridStep:1,\r\n    gridStepPixels:1,\r\n    marginTop:15,marginLeft:40,marginBottom:15,marginRight:10,\r\n    pickedData:{data:null,editId:0,fix:false},\r\n    picker:null,\r\n    prevStatus:Status.FREE,\r\n    ratio:1,pixelRatio:1,\r\n    realWidth:20,realHeight:20,\r\n    repaint:0,//random number is used to rerender all components when it's changed\r\n    screenHeight:550,\r\n    screenWidth:550,\r\n    selectedShapes:[],\r\n    selectDist:2,\r\n    selectionManager:new SelectionManager(SelectRectCreator),\r\n    selectionType:'crossSelect',\r\n    shapes:[],\r\n    shapeCreator:null,\r\n    shapeManager:new ShapeManager(),\r\n    show:{grid:true},\r\n    snap:{snapClass:null,snap:false},\r\n    snapDist:20,snapMinDist:10,\r\n    snapMarkersManager:new SnapMarkersManager(),\r\n    status:Status.FREE,\r\n    statusBar:5,\r\n    statusParams:{creator:null,picker:null},\r\n    topLeft:{x:-10,y:10},\r\n    xAxe:xAxeShape,\r\n    yAxe:yAxeShape,\r\n};\r\n//initialState.mouseHandler=new StatusFreeHandler({selectDist:initialState.selectDist,pixelRatio:initialState.pixelRatio});\r\ninitialState.mouseHandler=new StatusFreeHandler({point:initialState.curCoord,screenPoint:initialState.curScreenPoint});\r\nexport function screenReducer(state = initialState,action) {\r\n    var tl,c,br,bc,params,rh,r;\r\n    let handlerOptions={point:state.curCoord,screenPoint:state.curScreenPoint}\r\n    //delete(handlerOptions.mouseHandler);\r\n    switch (action.type) {\r\n        case ScreenActions.ADD_SHAPE:\r\n            state.shapes.push(action.payload);\r\n            return{...state};\r\n        case ScreenActions.CANCEL:\r\n            return {...state,\r\n                status:Status.FREE,\r\n                curShape:null,\r\n                curHelperShapes:null,\r\n                shapeCreator:null,\r\n                picker:null,\r\n                creationStep:\"\",\r\n                currentShape:\"\",\r\n                cursor:new SelectCursor(state.curCoord),\r\n                mouseHandler:new StatusFreeHandler(handlerOptions),\r\n                repaint:Math.random()}\r\n        case ScreenActions.CANCEL_SELECTION:\r\n            state.shapes.forEach(s=>s.setState({selected:false}))\r\n            return {...state,\r\n                status:Status.FREE,\r\n                selectedShapes:[],\r\n                curShape:null,\r\n                curHelperShapes:null,\r\n                shapeCreator:null,\r\n                picker:null,\r\n                creationStep:\"\",\r\n                currentShape:\"\",\r\n                cursor:new SelectCursor(state.curCoord),\r\n                repaint:Math.random()}\r\n        case ScreenActions.CENTER_TO_POINT:\r\n            var point=action.payload;\r\n            let viewPortWidth=state.realWidth-(state.marginLeft+state.marginRight)*state.pixelRatio;\r\n            let viewPortHeight=state.realHeight-(state.marginTop+state.marginBottom)*state.pixelRatio;\r\n            //new topLeft\r\n            tl={x:point.x-viewPortWidth/2-state.marginLeft*state.pixelRatio,y:point.y+viewPortHeight/2+state.marginTop*state.pixelRatio}\r\n            br={}\r\n            br.x=tl.x+state.realWidth;\r\n            br.y=tl.y-state.realHeight;        \r\n            //new boundedCircle\r\n            c=Geometry.screenToReal(state.screenWidth/2,state.screenHeight/2,state.screenWidth,state.screenHeight,tl,br);\r\n            r=Math.sqrt(state.realWidth*state.realWidth+state.realHeight*state.realHeight)/2;\r\n            bc=new Circle(c,r);\r\n            if(state.shapeCreator!=null) state.shapeCreator.refresh(bc);\r\n            return{...state,topLeft:tl,bottomRight:br};\r\n        case ScreenActions.CREATE_SHAPE:\r\n            return{...state,\r\n                status:Status.CREATE,\r\n                shapeCreator:action.payload,\r\n                curShape:null,\r\n                curHelperShapes:null,\r\n                cursor:new DrawCursor(state.curCoord),\r\n                mouseHandler:new StatusCreateHandler(handlerOptions)\r\n            };\r\n        case ScreenActions.DELETE_SELECTED_SHAPES:\r\n            return{...state,\r\n                shapes:state.shapes.filter((s)=>!s.getState().selected),\r\n                selectedShapes:[],\r\n                mouseHandler:new StatusFreeHandler(handlerOptions),\r\n                cursor: new SelectCursor()\r\n            };\r\n        case ScreenActions.PAN_SCREEN:\r\n            return {\r\n                ...state,\r\n                status:Status.PAN,\r\n                prevStatus:state.status,\r\n                prevCursor:state.cursor,\r\n                prevMouseHandler:state.mouseHandler,\r\n                cursor:new DragCursor(state.curCoord),\r\n                mouseHandler:new StatusPanHandler(handlerOptions)\r\n            }\r\n        case ScreenActions.REFRESH_SNAP_MARKERS:\r\n            state.snapMarkersManager.clear();\r\n            for(let s of state.shapes){\r\n                state.snapMarkersManager.addSnapMarkers(s.getMarkers());\r\n            }\r\n            return {...state}\r\n        case ScreenActions.REFRESH_SHAPE_MANAGER:\r\n                state.shapeManager=new ShapeManager(state.shapes);\r\n                return {...state}\r\n        case ScreenActions.REPAINT:\r\n            return {...state,repaint:Math.random()}\r\n        case ScreenActions.SELECT_ALL:\r\n            var selectedShapes=[];\r\n            state.shapes.forEach((s,i)=>{\r\n                            if(i>1){\r\n                                   s.setState({selected:true});\r\n                                   selectedShapes.push(s);\r\n                                }});\r\n            return{...state,selectedShapes};\r\n        case ScreenActions.SELECT_SHAPE:\r\n            return{...state,selectedShapes:action.payload};\r\n        case ScreenActions.SET_BOUNDED_CIRCLE:\r\n            c=Geometry.screenToReal(state.screenWidth/2,state.screenHeight/2,state.screenWidth,state.screenHeight,state.topLeft,state.bottomRight);\r\n            r=Math.sqrt(state.realWidth*state.realWidth+state.realHeight*state.realHeight)/2;\r\n            bc=new Circle(c,r);\r\n            if(state.shapeCreator!=null) state.shapeCreator.refresh(bc);\r\n            return{...state,boundedCircle:bc}\r\n        case ScreenActions.SET_DIMENSIONS:\r\n            params=action.payload;\r\n            rh=params.height*params.realWidth/params.width\r\n            return {...state,\r\n                screenWidth:params.width,\r\n                screenHeight:params.height,\r\n                realWidth:params.realWidth,\r\n                ratio:params.width/params.height,\r\n                pixelRatio:params.realWidth/state.screenWidth,\r\n                realHeight:rh,\r\n                bottomRight:{x:state.topLeft.x+params.realWidth,y:state.topLeft.y-rh}\r\n            }\r\n        case ScreenActions.SET_CUR_COORD:\r\n            return {...state,curCoord:{...action.payload.point},curScreenPoint:{...action.payload.screenPoint}}\r\n        case ScreenActions.SET_CYCLIC_FLAG:\r\n            return {...state,cyclicCreation:action.payload}\r\n        case ScreenActions.SET_GRID_SNAP:\r\n            return{...state,gridSnap:action.payload};\r\n        case ScreenActions.SET_GRID_VISIBLE:\r\n            return{...state,show:{grid:action.payload}};\r\n        case ScreenActions.START_PICKING:\r\n            return {...state,\r\n                status:Status.PICK,\r\n                pickedData:{data:state.pickedData.data,editId:action.payload.id},\r\n                picker:action.payload.picker,\r\n                cursor:new PickCursor(state.curCoord),\r\n                mouseHandler:new StatusPickHandler(handlerOptions)\r\n            }\r\n        case ScreenActions.START_SELECTION:\r\n            return {...state,\r\n                status:Status.SELECT,\r\n                mouseHandler:new StatusSelectHandler(handlerOptions)\r\n            }\r\n        case ScreenActions.SET_PICKED_DATA:\r\n            return {...state,status:Status.PICK_END,pickedData:{data:action.payload,editId:state.pickedData.editId}}\r\n        case ScreenActions.SET_PREV_COORD:\r\n            return {...state,prevCoord:{...action.payload.point},prevScreenPoint:{...action.payload.screenPoint}}\r\n        case ScreenActions.SET_PREV_STATUS:\r\n            return {...state,\r\n                status:state.prevStatus,\r\n                cursor:state.prevCursor,\r\n                mouseHandler:state.prevMouseHandler\r\n            }\r\n        case ShapeActions.SET_PROPERTY:\r\n            for(let shape of state.selectedShapes){\r\n               if(shape.getProperties().has(action.payload.key)) shape.setProperty({key:action.payload.key,value:action.payload.value});\r\n            }\r\n            return{...state}\r\n        case ScreenActions.SET_RATIO:\r\n            return {...state,ratio:action.payload}\r\n        case ScreenActions.SET_REAL_WIDTH:\r\n            var width=action.payload;\r\n            params=getRealWidthParams(width,state.screenWidth,state.screenHeight,state.topLeft,state.gridStep)\r\n            params.gridStepPixels=Math.round(params.gridStep/params.pixelRatio);\r\n            return {...state,...params}\r\n        case ScreenActions.SET_SCALE:\r\n            const {scale,anchor}=action.payload;\r\n            tl=state.topLeft;\r\n            let dx=anchor.x-tl.x;\r\n            let dy=anchor.y-tl.y;\r\n            //getting new realHeight,pixelRatio,gridStepPixels,bottomRight\r\n            params=getRealWidthParams(state.realWidth*scale,state.screenWidth,state.screenHeight,tl,state.gridStep)\r\n            dx=dx*scale;\r\n            dy=dy*scale;\r\n            //new topLeft\r\n            tl={x:anchor.x-dx,y:anchor.y-dy}\r\n            br={}\r\n            br.x=tl.x+params.realWidth;\r\n            br.y=tl.y-params.realHeight;\r\n            //new boundedCircle\r\n            c=Geometry.screenToReal(state.screenWidth/2,state.screenHeight/2,state.screenWidth,state.screenHeight,tl,br);\r\n            r=Math.sqrt(params.realWidth*params.realWidth+params.realHeight*params.realHeight)/2;\r\n            bc=new Circle(c,r);\r\n            if(state.shapeCreator!=null) state.shapeCreator.refresh(bc);\r\n            //new gridStep\r\n            if(params.gridStep/params.pixelRatio<10){\r\n                if (params.gridStep<1000000) params.gridStep=params.gridStep*10;\r\n                }\r\n                else if(params.gridStep/params.pixelRatio>100)\r\n                    if(params.gridStep>0.001) params.gridStep=params.gridStep/10;\r\n                            params.gridStepPixels=Math.round(params.gridStep/params.pixelRatio);\r\n            var pr=params.realWidth/state.screenWidth;\r\n            return {...state,...params,topLeft:tl,bottomRight:br,boundedCircle:bc,pixelRatio:pr}\r\n        case ScreenActions.SET_SCREEN_CONTEXT:\r\n            return{...state,context:action.payload};\r\n        case ScreenActions.SET_SELECTION_TYPE:\r\n            return {...state,selectionType:action.payload}\r\n        case ScreenActions.SET_SNAP:\r\n                if(action.payload.snap===true)state.snapMarkersManager.addSnap(action.payload.snapClass)\r\n                 else state.snapMarkersManager.removeSnap(action.payload.snapClass)\r\n            return{...state};\r\n        case ScreenActions.SET_STATUS:\r\n            return{...state,\r\n                status:action.payload.status,\r\n                prevStatus:action.payload.status,\r\n                statusParams:action.payload.params};\r\n        case ScreenActions.SET_TOP_LEFT:\r\n            var topLeft=action.payload;\r\n            var bottomRight={};\r\n            bottomRight.x=topLeft.x+state.realWidth;\r\n            bottomRight.y=topLeft.y-state.realHeight;\r\n            //boundedCircle\r\n            c=Geometry.midPoint(topLeft,bottomRight);\r\n            r=Geometry.distance(topLeft,c);\r\n            bc=new Circle(c,r);\r\n            if(state.shapeCreator!=null) state.shapeCreator.refresh(bc);\r\n            return {...state,topLeft,bottomRight,boundedCircle:bc}\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nfunction getRealWidthParams(realWidth,screenWidth,screenHeight,topLeft,gridStep){\r\n    const pr=realWidth/screenWidth;\r\n    const rh=screenHeight*pr;\r\n    const gsp=Math.round(gridStep/pr);\r\n    const br={};\r\n    br.x=topLeft.x+realWidth;\r\n    br.y=topLeft.y-rh;\r\n    return {\r\n        realWidth:realWidth,\r\n        realHeight:rh,\r\n        pixelRatio:pr,\r\n        gridStepPixels:gsp,\r\n        bottomRight:br,\r\n        gridStep\r\n    }\r\n}","const options={\r\n    devUrl:'',\r\n    _devUrl:'',\r\n}\r\nexport default options","import options from '../config'\r\nexport const AppActions={\r\n    SET_LANGUAGE:'SET_LANGUAGE',\r\n    REQUEST_LANGUAGE:'REQUEST_LANGUAGE',\r\n    SHOW_HELP:'SHOW_HELP',\r\n    SHOW_CONFIRM:'SHOW_CONFIRM',\r\n    SHOW_ALERT:'SHOW_ALERT',\r\n}\r\n\r\nexport function setLanguage(captions) {\r\n    return {\r\n        type: AppActions.SET_LANGUAGE,\r\n        payload: captions,\r\n    }\r\n}\r\nexport function requestLanguage(lang) {\r\n    return dispatch=> {\r\n        fetch(options.devUrl+'/lang',{method:'POST',\r\n                       body:JSON.stringify({lang:lang}),\r\n                       headers: {'Content-Type': 'application/json'}\r\n                        })\r\n            .then(res => res.json())\r\n            .then(capt => dispatch(setLanguage(capt)))\r\n            .catch(e => {\r\n                console.error(e)\r\n            });\r\n    }\r\n\r\n}\r\nexport function showHelp(show){\r\n    return {\r\n        type:AppActions.SHOW_HELP,\r\n        payload:show\r\n    }\r\n}\r\nexport function showConfirm(show,messageKey,okAction){\r\n    return {\r\n        type:AppActions.SHOW_CONFIRM,\r\n        payload:{show,messageKey,okAction}\r\n    }\r\n}\r\nexport function showAlert(show,messageKey){\r\n    return {\r\n        type:AppActions.SHOW_ALERT,\r\n        payload:{show,messageKey}\r\n    }\r\n}\r\nexport function blink(){\r\n    const form=document.querySelector('.modalContainer > .toolBar')\r\n    const oldColor=form.style.backgroundColor\r\n    var count=0\r\n    const int=setInterval(()=>{\r\n        if(form.style.backgroundColor===oldColor)form.style.backgroundColor='red'; \r\n            else form.style.backgroundColor=oldColor\r\n        if(++count>3) {clearInterval(int);form.style.backgroundColor=oldColor}\r\n    },40)\r\n}\r\n\r\n","export const captions={\r\n  about:{\r\n    name:\"© Takhmazov Borys, 2018-2019\",\r\n    email:\"E-Mail: tboris1983@gmail.com\",\r\n  },\r\n  user:{\r\n    name:\"\"\r\n  },\r\n  buttons:{\r\n    cancel:\"Cancel\",\r\n    logout:\"Log out\",\r\n    showPass:\"Show password\",\r\n    pick:\"Pick\"\r\n  },\r\n  registerForm:{\r\n    title:\"Sign up\",\r\n    name:\"Nickname\",\r\n    email:\"E-Mail\",\r\n    password:\"Password\",\r\n    passwordAgain:\"Password again\",\r\n    serverMessages:[\"\",\"User already exists\",\"E-Mail already exists\",\"\",\"\",\"Internal server error\"],\r\n    inputMessages:[\"Name length too short (4 char at least)\",\"Name can contain only letters, digits and _\",\r\n                    \"Password too short (6 char at least)\",\"Passwords aren't equal\",\"E-mail format incorrect\"]\r\n  },\r\n  loginForm:{\r\n    title:\"Sign in\",\r\n    name:\"Name or E-Mail\",\r\n    password:\"Password\",\r\n    regForm:\"Sign up\",\r\n    rememberMe:\"Remember me on this device\",\r\n    messages:[\"\",\"User data incorrect\",\"User isn't activated yet\",\"\",\"\",\"Internal server error. Please try again\"]\r\n  },\r\n  activation:{\r\n    title:\"Activation\",\r\n    messages:[\"Activation succeeded. You can now sign in with your login and password.\",\r\n              \"Activation code is incorrect or expired\",\"\",\"\",\"\",\"Server internal error\"]\r\n  },\r\n  title:\"Geometry editor\",\r\n  messages:{\r\n    deleteShapes:\"Delete selected shapes?\",\r\n    logout:\"Do you want to log out?\",\r\n    regSucceed:\"Registration succeeded. Please check you mailbox to activate account\"\r\n  },\r\n  create:{\r\n    createToolBar:\"Create\",\r\n    createCheckBox:\"Cyclic\",\r\n    createSLine2Points:\"Straight line\",\r\n    createRayLine2Points:\"Ray line\",\r\n    createSegmentLine2Points:\"Segment line\",\r\n    createCircleCenter:\"Circle by center\",\r\n    createCircle2P:\"Circle by 2 points\",\r\n    createCircle3P:\"Circle by 3 points\",\r\n    createRect:\"Rectangle by 2 points\",\r\n    createRectCenter:\"Rectangle by center\",\r\n    createTriangle:\"Triangle\",\r\n    createTriangleInscribed:\"Triangle inscribed in circle\",\r\n    createTriangleDescribed:\"Triangle described about circle\",\r\n    createParabola:\"Parabola\",\r\n    createHyperbola:\"Hyperbola\",\r\n    createFunction:\"User defined function\",\r\n    development:\"(in development)\"\r\n  },\r\n  modify:{\r\n    crossSelect:\"Partial selection\",\r\n    fullSelect:\"Full selection\"\r\n  },\r\n  snap:{snapToggleBar:\"Snap\",\r\n    snapGridPoints:\"Snap to grid points\",\r\n    snapEndPoints: \"Snap to end points\",\r\n    snapCenterPoints: \"Snap to center points\",\r\n    snapMiddlePoints: \"Snap to middle points\"\r\n  },\r\n  showGrid:\"Show grid\",\r\n  propBar:\"Properties\",\r\n  noShapesSelected:\"No shapes selected\",\r\n  NShapesSelected:\" shapes selected\",\r\n  deleteButton:\"Delete\",\r\n  shapes:{\r\n    Circle:{\r\n      Title:\"Circle\",\r\n      Radius:\"Radius\",\r\n      Center:\"Center\",\r\n    },\r\n    Rectangle:{\r\n      Title:\"Rectangle\",\r\n      P1:\"P1\",\r\n      P2:\"P2\",\r\n    },\r\n    Line:{\r\n      Title:\"Line\",\r\n      P1:\"P1\",\r\n      P2:\"P2\",\r\n    },\r\n    SLine:{\r\n      Title:\"Straight Line AX+BY+C=0\",\r\n      A:\"A\",\r\n      B:\"B\",\r\n      C:\"C\"\r\n    },\r\n    RLine:{\r\n      Title:\"Ray Line\",\r\n      Origin:\"Origin\",\r\n      Direction:\"Direction\",\r\n    },\r\n    Triangle:{\r\n      Title:\"Triangle\",\r\n      P1:\"P1\",\r\n      P2:\"P2\",\r\n      P3:\"P3\",\r\n    }\r\n  },\r\n  pickers:{\r\n    PointPicker:{\r\n      description:\"\",\r\n      steps:[\"Select point\"]\r\n    },\r\n    DistancePicker:{\r\n      description:\"\",\r\n      steps:[\"Select 1st point\",\"Select 2nd point\"]\r\n    },\r\n  },\r\n  creators:{\r\n    StraightLineCreator:{\r\n      description:\"Straight Line\",\r\n      steps:[\"Select 1st point\",\"Select 2nd point\"]\r\n    },\r\n    RayLineCreator:{\r\n      description:\"Ray Line\",\r\n      steps:[\"Select origin point\",\"Select direction point\"]\r\n    },\r\n    LineCreator:{\r\n      description:\"Segment Line\",\r\n      steps:[\"Select first point\",\"Select second point\"]\r\n    },\r\n    CircleCRCreator:{\r\n      description:\"Circle\",\r\n      steps:[\"Select center point\",\"Select radius point\"]\r\n    },\r\n    Circle2PCreator:{\r\n      description:\"Circle\",\r\n      steps:[\"Select first point\",\"Select second point\"]\r\n    },\r\n    Circle3PCreator:{\r\n      description:\"Circle\",\r\n      steps:[\"Select first point\",\"Select second point\",\"Select third point\"]\r\n    },\r\n    RectangleCreator:{\r\n      description:\"Rectangle\",\r\n      steps:[\"Select first point\",\"Select second point\"]\r\n    },\r\n    TriangleCreator:{\r\n      description:\"Triangle\",\r\n      steps:[\"Select first point\",\"Select second point\",\"Select third\"]\r\n    },\r\n    SelectRectCreator:{\r\n      description:\"\",\r\n      steps:[\"\",\"Specify second selection point\"]\r\n    },\r\n  },\r\n  help:{\r\n    title:'Reference',\r\n    hotKeys:[\r\n    {key:\"ESC\",desc:'Cancel'},\r\n    {key:\"Ctrl-A\",desc:'Select all'},\r\n    {key:\"Del\",desc:'Delete selected'},\r\n    {key:\"C\",desc:'View to origin'},\r\n    {key:\"Mouse wheel\",desc:'Zoom +/-'},\r\n    {key:\"Mouse middle button\",desc:'Move screen'}\r\n    ]\r\n  }\r\n}\r\n","import {AppActions} from \"../actions/AppActions\";\r\n\r\nimport {captions} from '../locale/eng';\r\nconst keys=[\r\n    {ctrlKey:true,shiftKey:false,altKey:false,keyCode:65,action:\"selectAll\",param:null},\r\n    {ctrlKey:false,shiftKey:false,altKey:false,keyCode:46,action:\"deleteConfirm\",param:null},\r\n    {ctrlKey:false,shiftKey:false,altKey:false,keyCode:67,action:\"centerToPoint\",param:{x:0,y:0}},\r\n    {ctrlKey:false,shiftKey:false,altKey:false,keyCode:27,action:\"cancelSelection\",param:null},\r\n]\r\nconst initialState={captions:captions,keyDownHandler:keys}\r\nexport function optionsReducer(state=initialState,action) {\r\n    switch (action.type) {\r\n        case AppActions.SET_LANGUAGE:\r\n            document.title=action.payload.title;\r\n            return{...state,captions:action.payload};\r\n        default:\r\n            return state\r\n    }\r\n}","export const ComponentActions={\r\n    SET_ACTIVE_SNAP_BUTTON:'SET_ACTIVE_SNAP_BUTTON',\r\n    CLEAR_ACTIVE_SNAP_BUTTON:'CLEAR_ACTIVE_SNAP_BUTTON',\r\n    SET_ACTIVE_CREATE_BUTTON:'SET_ACTIVE_CREATE_BUTTON',\r\n    SET_ACTIVE_LANG_BUTTON:'SET_ACTIVE_LANG_BUTTON',\r\n    SET_ACTIVE_SELECTION_BUTTON:'SET_ACTIVE_SELECTION_BUTTON',\r\n}\r\nexport function setActiveSnapButton(id) {\r\n    return {\r\n        type: ComponentActions.SET_ACTIVE_SNAP_BUTTON,\r\n        payload: id,\r\n    }\r\n}\r\nexport function clearActiveSnapButton(id) {\r\n    return {\r\n        type: ComponentActions.CLEAR_ACTIVE_SNAP_BUTTON,\r\n        payload: id,\r\n    }\r\n}\r\nexport function setActiveCreateButton(id) {\r\n    return {\r\n        type: ComponentActions.SET_ACTIVE_CREATE_BUTTON,\r\n        payload: id,\r\n    }\r\n}\r\nexport function setActiveSelectionButton(id) {\r\n    return {\r\n        type: ComponentActions.SET_ACTIVE_SELECTION_BUTTON,\r\n        payload: id,\r\n    }\r\n}\r\nexport function setActiveLangButton(id) {\r\n    return {\r\n        type: ComponentActions.SET_ACTIVE_LANG_BUTTON,\r\n        payload: id,\r\n    }\r\n}","\r\nimport {ComponentActions} from \"../actions/ComponentActions\";\r\nimport {ScreenActions} from \"../actions/ScreenActions\";\r\nimport {AppActions} from '../actions/AppActions';\r\nimport { Status } from \"./screen\";\r\nconst initialState={\r\n    activeLangButton:\"en\",\r\n    defaultLang:\"en\",\r\n    activeSnapButtons:new Set(),\r\n    showHelp:false,\r\n    showConfirm:{show:false,message:\"\"},\r\n    showAlert:{show:false,message:\"\"}\r\n}\r\nexport function componentReducer(state=initialState,action) {\r\n    let newState={...state};\r\n    const data=action.payload;\r\n    if(!newState.activeButtons) newState.activeButtons=new Set();\r\n    switch (action.type) {\r\n        case ScreenActions.CANCEL:\r\n            return {...newState,activeCreateButton:null}\r\n        case ComponentActions.SET_ACTIVE_CREATE_BUTTON:\r\n            newState.activeCreateButton=data;\r\n            return newState;\r\n        case ComponentActions.SET_ACTIVE_LANG_BUTTON:\r\n            newState.activeLangButton=data;\r\n            return newState;\r\n        case ComponentActions.SET_ACTIVE_SNAP_BUTTON:\r\n            newState.activeSnapButtons.add(data);\r\n            return newState;    \r\n        case ComponentActions.CLEAR_ACTIVE_SNAP_BUTTON:\r\n            newState.activeSnapButtons.delete(data);\r\n            return newState;\r\n        case ScreenActions.SET_STATUS:\r\n            if(data.status===Status.FREE) return{...state,activeCreateButton:''}\r\n            return{...state} \r\n        case AppActions.SHOW_HELP:\r\n            return {...state,showHelp:data};  \r\n        case AppActions.SHOW_CONFIRM:\r\n            return {...state,showConfirm:data};  \r\n        case AppActions.SHOW_ALERT:\r\n            return {...state,showAlert:data}; \r\n        case ScreenActions.DELETE_CONFIRM:\r\n           return{...state,showConfirm:{show:true,messageKey:\"deleteShapes\",okAction:ScreenActions.deleteSelectedShapes.bind(null,false)}}    \r\n        default:\r\n            return newState;\r\n    }\r\n}","export const UserActions={\r\n    SET_TOKEN:'SET_TOKEN',\r\n    LOGOUT:'LOGOUT',\r\n}\r\n\r\nexport function setToken(token,remember) {\r\n    return {\r\n        type: UserActions.SET_TOKEN,\r\n        payload: {token,remember},\r\n    }\r\n}\r\nexport function logout() {\r\n    return {\r\n        type: UserActions.LOGOUT,\r\n    }\r\n}\r\n\r\n","import {UserActions} from \"../actions/UserActions\";\r\nimport {captions} from '../locale/eng';\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nvar user={}\r\n//var token=localStorage.getItem('token');\r\n//if(!token) token=sessionStorage.getItem('token');\r\nvar token=document.cookie.split('=')[1];\r\nif(token) user={name:jwtDecode(token).name,token}; else user.name=captions.user.name;\r\nexport function userReducer(state=user,action) {\r\n    switch (action.type) {\r\n        case UserActions.SET_TOKEN:\r\n            if(action.payload.token) {\r\n                let expires;\r\n                if(action.payload.remember===true) expires=`;expires=Tue, 19 Jan 2099 00:00:00 GMT`;\r\n                    else expires=''\r\n                document.cookie=`token=${action.payload.token}${expires}`\r\n                user={name:jwtDecode(action.payload.token).name,token:action.payload.token}\r\n            }\r\n            else{\r\n                user.name=captions.user.name;\r\n            }\r\n            return user;\r\n        case UserActions.LOGOUT:\r\n            document.cookie='token='\r\n            return {}\r\n        default:\r\n            return state\r\n    }\r\n}","import {combineReducers} from \"redux\";\r\nimport {shapeReducer} from \"./shapes\";\r\nimport {screenReducer} from \"./screen\";\r\nimport {optionsReducer} from \"./options\";\r\nimport {componentReducer} from \"./component\";\r\nimport { userReducer } from \"./user\";\r\n\r\nexport const rootReducer=combineReducers({\r\n    shapes:shapeReducer,\r\n    screen:screenReducer,\r\n    options:optionsReducer,\r\n    user:userReducer,\r\n    components:componentReducer,\r\n});","import {createStore,applyMiddleware} from \"redux\";\r\nimport thunk from 'redux-thunk';\r\nimport { rootReducer } from '../reducers'\r\nwindow.actions=[]\r\nconst actionList=(store)=>(next)=>(action)=>{window.actions.push(action.type);return next(action)}\r\n\r\nexport const store = createStore(rootReducer,applyMiddleware(thunk,actionList));","import React from 'react';\r\nimport '../Graph.css';\r\n\r\nexport default class LangToggleButton extends React.Component{\r\n    onClick(){\r\n        if(!this.props.pressed){\r\n            this.props.requestLanguage(this.props.lang);\r\n            this.props.setActiveLangButtonId(this.props.lang);\r\n        }\r\n    }\r\n    render(){\r\n        let className=this.props.pressed?\"langToggleButtonDown\":\"langToggleButtonUp\";\r\n        return <div\r\n                id={this.props.lang}\r\n                className={className+\" noselect\"}\r\n                title={this.props.title}\r\n                onClick={this.onClick.bind(this)}\r\n                >\r\n        </div>\r\n    }\r\n}","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport '../Graph.css';\r\nimport LangToggleButton from './LangToogleButton';\r\nimport {setActiveLangButton} from '../actions/ComponentActions';\r\nimport {requestLanguage} from '../actions/AppActions';\r\n\r\nclass LangToggleBar extends React.Component{\r\n    render(){\r\n        return <div className={\"langToggleBar\"}>\r\n            <LangToggleButton \r\n                lang=\"ru\"\r\n                pressed={this.props.pressed===\"ru\"}\r\n                setActiveLangButtonId={this.props.setActiveLangButtonId}\r\n                requestLanguage={this.props.requestLanguage}\r\n                title=\"Русский\"\r\n                />\r\n            <LangToggleButton\r\n                lang=\"en\"\r\n                pressed={this.props.pressed===\"en\"}\r\n                setActiveLangButtonId={this.props.setActiveLangButtonId}\r\n                requestLanguage={this.props.requestLanguage}\r\n                title=\"English\"\r\n                />\r\n            <LangToggleButton\r\n                lang=\"fr\"\r\n                pressed={this.props.pressed===\"fr\"}\r\n                setActiveLangButtonId={this.props.setActiveLangButtonId}\r\n                requestLanguage={this.props.requestLanguage}\r\n                title=\"Français\"\r\n                />\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = store=>{\r\n    return{\r\n        pressed:store.components.activeLangButton,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch=>{\r\n    return {\r\n        setActiveLangButtonId:lang=>dispatch(setActiveLangButton(lang)),\r\n        requestLanguage:lang=>dispatch(requestLanguage(lang)),\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(LangToggleBar);","import React from 'react';\r\nimport '../Graph.css';\r\nimport {connect} from 'react-redux';\r\nimport {showHelp} from '../actions/AppActions';\r\n\r\nclass HelpButton extends React.Component{\r\n    onClick(){\r\n        this.props.showHelp(true);\r\n    }\r\n    render(){\r\n        return <button \r\n                className={\"helpButton noselect\"}\r\n                onClick={this.onClick.bind(this)}\r\n                >\r\n            ?\r\n        </button>\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        showHelp:show=>{dispatch(showHelp(show))}\r\n    }\r\n}\r\nexport default connect(null,mapDispatchToProps)(HelpButton);","import React from 'react';\r\nimport {connect} from 'react-redux'\r\nimport {NavLink} from 'react-router-dom'\r\nimport \"../Graph.css\";\r\nimport { showConfirm } from '../actions/AppActions';\r\nimport { logout } from '../actions/UserActions';\r\n\r\nclass User extends React.Component{\r\n    logout(){\r\n        this.props.showConfirm();\r\n    }\r\n    render(){\r\n        const links=!this.props.user.token?<>\r\n            <NavLink to=\"/login\"><span className=\"link\">{this.props.cap.loginForm.title}</span></NavLink>\r\n            <NavLink to=\"/register\"><span className=\"link\">{this.props.cap.registerForm.title}</span></NavLink>\r\n            </>\r\n            :<NavLink to='/' onClick={this.logout.bind(this)}><span className=\"link\">{this.props.cap.buttons.logout}</span></NavLink>\r\n        return <div className=\"user noselect\">\r\n            {this.props.user.name?this.props.user.name:''}\r\n            \r\n            {links}\r\n        </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        user:store.user,\r\n        cap:store.options.captions,\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        showConfirm:()=>dispatch(showConfirm(true,'logout',logout))\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(User)","import React from 'react';\r\nimport \"../Graph.css\";\r\nimport LangToggleBar from './LangToggleBar';\r\nimport HelpButton from './HelpButton';\r\nimport User from './User';\r\n\r\nexport default class Header extends React.Component{\r\n    render(){\r\n        return <div className={\"header\"}>\r\n            <LangToggleBar/> \r\n            <HelpButton/>\r\n            <User/>\r\n        </div>\r\n    }\r\n}","import React from \"react\";\r\nimport '../Buttons.css';\r\n\r\nexport default class ToolButton extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={pressed:props.activeButtonId===props.id}\r\n    }\r\n    onclick(){\r\n        if(this.props.params&&this.props.params.dev) return;\r\n        const pressed=this.props.activeButtonId===this.props.id;\r\n        const params=!this.props.params?{id:this.props.id}:{...this.props.params,id:this.props.id};\r\n        if(this.props.onClick)this.props.onClick({pressed,params});\r\n        if(this.props.setButtonFirst)this.props.setButtonFirst(this.props.id);\r\n    }\r\n\r\n    render(){\r\n        const pressed=this.props.activeButtonId===this.props.id;\r\n        let title=this.props.title;\r\n        if(this.props.params&&this.props.params.dev) title=`${title} ${this.props.params.dev}`\r\n        let cls=!pressed?\"toolButtonUp\":\"toolButtonDown\";\r\n        cls=cls+\" toolButton\";\r\n        return <div id={this.props.id}\r\n                    className={cls}\r\n                    onClick={this.onclick.bind(this)}\r\n                    title={title}\r\n                    \r\n                    >\r\n\r\n        </div>\r\n    }\r\n}\r\n","import React from 'react';\r\nimport '../Graph.css';\r\nimport ToolButton from \"./ToolButton\";\r\n\r\nexport default class ToolButtonGroup extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={buttons:props.buttons,firstButton:props.buttons[0].id,expanded:false};\r\n    }\r\n    onMouseEnter(){\r\n        this.setState({expanded:true});\r\n    }\r\n    onMouseLeave(){\r\n        this.setState({expanded:false});\r\n    }\r\n    setButtonFirst(id){\r\n            this.setState({firstButton:id,expanded:false});\r\n    }\r\n    render(){\r\n        let buttons=[];\r\n        const first=this.props.buttons.find((button)=>button.id===this.state.firstButton);\r\n        buttons.push(<ToolButton \r\n                            title={first.title}\r\n                            id={first.id}\r\n                            params={first.params}\r\n                            key={0}\r\n                            index={0}\r\n                            onClick={this.props.onClick}\r\n                            activeButtonId={this.props.activeButton}\r\n                            setButtonFirst={this.setButtonFirst.bind(this)}\r\n                        />);\r\n        let index=1;\r\n        this.props.buttons.forEach((button)=>{\r\n                        if(button.id!==this.state.firstButton)\r\n                            buttons.push(<ToolButton \r\n                                    title={button.title}\r\n                                    id={button.id}\r\n                                    params={button.params}\r\n                                    key={index}\r\n                                    index={index++}\r\n                                    onClick={this.props.onClick}\r\n                                    activeButtonId={this.props.activeButton}\r\n                                    setButtonFirst={this.setButtonFirst.bind(this)}\r\n                                />);\r\n                    })\r\n        let cls=\"toolButtonGroup\";\r\n        if(this.state.expanded) cls=cls+\" toolButtonGroupExpanded\"; \r\n                else cls=cls+\" toolButtonGroupCollapsed\";\r\n        return <div className={cls}\r\n                onMouseEnter={this.onMouseEnter.bind(this)}\r\n                onMouseLeave={this.onMouseLeave.bind(this)}\r\n                >\r\n             {buttons}\r\n        </div>\r\n    }\r\n}\r\n","export default class SnapMarker {\r\n    static MARKER_SIZE=5;\r\n    static SNAP_MARKER_SIZE=5; \r\n    constructor(pos){\r\n        this.pos=pos;\r\n\r\n    }\r\n    getMarker(){\r\n        return this.markerShape;\r\n    }\r\n    getPos(){\r\n        return this.pos;\r\n    }\r\n    setMarker(pos, markerShape){\r\n    this.pos=pos;\r\n    this.markerShape=markerShape;\r\n    }\r\n    refresh(realRect, screenRect){\r\n    this.markerShape.refresh(realRect,screenRect);\r\n    }\r\n}","import {Circle} from '../../../utils/geometry';\r\nimport CircleShape from '../CircleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {Color} from '../../colors';\r\nimport SnapMarker from './SnapMarker';\r\n\r\nexport default class EndSnapMarker extends SnapMarker {\r\n    static caption = \"center points\";\r\n    constructor(pos){\r\n        super(pos);\r\n        this.circle=new Circle();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.circle.center=this.getPos();\r\n        this.circle.radius=realRect.width/screenRect.width*SnapMarker.SNAP_MARKER_SIZE;\r\n        let markerShape=new CircleShape(this.circle);\r\n        markerShape.setStyle(new ShapeStyle(Color.GREEN,ShapeStyle.SOLID));\r\n        this.setMarker(this.circle.center,markerShape);\r\n        super.refresh(realRect,screenRect);\r\n    }\r\n}","import Geometry from '../../../utils/geometry';\r\nimport Shape from '../Shape';\r\nimport {Color} from '../../colors';\r\nimport SnapMarker from './SnapMarker';\r\n\r\nexport default class PointMarker extends Shape {\r\n    static caption = \"center points\";\r\n    constructor(point,active){\r\n        super();\r\n        this.point=point;\r\n        this.setActive(active);\r\n    }\r\n    setPoint(p){\r\n        this.point=p\r\n    }\r\n    setActive(active){\r\n        this.active=active\r\n        this.setColor(active?Color.ACTIVE_POINT_MARKER:Color.POINT_MARKER);\r\n    }\r\n    drawSelf(ctx, realRect, screenRect){\r\n        this.refresh(realRect, screenRect);\r\n        ctx.fillStyle=this.getStyle().getColor();\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.arc(this.center.x,this.center.y,this.radius,0,2*Math.PI);\r\n        ctx.fill();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.center=Geometry.realToScreen(this.point,realRect,screenRect);\r\n        this.radius=SnapMarker.MARKER_SIZE/2;\r\n    }\r\n}","export default class PropertyPicker {\r\n     constructor(){\r\n        this.i=0;\r\n    }\r\n\r\n    getShape(){\r\n        return this.shape;\r\n    }\r\n    getHelperShapes(){\r\n        return this.helperShapes;\r\n    }\r\n    getPickedData(){\r\n        return this.data;\r\n    }\r\n    isNext(){\r\n        return (this.i<this.points.length);\r\n    }\r\n    setNextPoint(p){\r\n        this.setCurrent(p);\r\n        this.i++;\r\n    }\r\n\r\n    refresh(boundedCircle){\r\n        this.boundedCircle=boundedCircle;\r\n        if(this.points[this.i]!=null) this.setControlPoints();\r\n    }\r\n    setStyle(style){\r\n        this.style=style;\r\n    }\r\n    getCurrentStep(){\r\n        return this.i;\r\n    }\r\n    getName(){\r\n        return this.name;\r\n    }\r\n}","import ShapeStyle from '../ShapeStyle';\r\nimport {Coord2D} from \"../../../utils/geometry\";\r\nimport PropertyPicker from './PropertyPicker';\r\nexport default class PointPicker extends PropertyPicker{\r\n    static caption=\"\";\r\n    constructor(){\r\n        super()\r\n        this.name=\"PointPicker\"\r\n        this.points=[new Coord2D()];\r\n        this.helperShapes=[];\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        this.data=point;\r\n    }\r\n    reset(){return new PointPicker(new ShapeStyle(this.style.getColor(),this.style.getType()));}\r\n}\r\n","import Geometry, {Coord2D,Line,Intersection} from '../../utils/geometry';\r\nimport EndSnapMarker from './markers/EndSnapMarker';\r\nimport MiddleSnapMarker from './markers/MiddleSnapMarker';\r\nimport Shape from \"./Shape\";\r\nimport PointMarker from './markers/PointMarker';\r\nimport PointPicker from './pickers/PointPicker';\r\n\r\nexport default class TriangleShape extends Shape{\r\n    constructor(triangle){\r\n        super();\r\n        this.p=[new Coord2D(),new Coord2D(),new Coord2D()];\r\n        this.triangle=triangle;\r\n        this.model=triangle;\r\n        this.controlPoints=[\r\n            {point:this.triangle.points[0],show:false,selected:false},\r\n            {point:this.triangle.points[1],show:false,selected:false},\r\n            {point:this.triangle.points[2],show:false,selected:false}]\r\n        for(let cp of this.controlPoints)\r\n          cp.marker=new PointMarker(cp.point,false)\r\n    }\r\n    drawSelf(ctx,realRect, screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p[0].x,this.p[0].y);\r\n        ctx.lineTo(this.p[1].x,this.p[1].y);\r\n        ctx.lineTo(this.p[2].x,this.p[2].y);\r\n        ctx.lineTo(this.p[0].x,this.p[0].y);\r\n        ctx.stroke();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        for (let i=0;i<3;i++) this.p[i]=Geometry.realToScreen(this.triangle.points[i],realRect,screenRect);\r\n        if(this.activePoint) \r\n            this.activePointMarker=new PointMarker(this.activePoint)\r\n    }\r\n    setActivePoint(key){\r\n        super.setActivePoint();\r\n        if(key==='P1') {this.controlPoints[0].selected=true;this.controlPoints[0].marker.setActive(true)}\r\n        if(key==='P2') {this.controlPoints[1].selected=true;this.controlPoints[1].marker.setActive(true)}\r\n        if(key==='P3') {this.controlPoints[2].selected=true;this.controlPoints[2].marker.setActive(true)}\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        list.push(new EndSnapMarker(this.triangle.points[0]));\r\n        list.push(new EndSnapMarker(this.triangle.points[1]));\r\n        list.push(new EndSnapMarker(this.triangle.points[2]));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(this.triangle.points[0],this.triangle.points[1])));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(this.triangle.points[1],this.triangle.points[2])));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(this.triangle.points[2],this.triangle.points[0])));\r\n        return list;\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'Triangle',regexp:/\\s*/});\r\n        prop.set('P1',{value:{x:this.triangle.points[0].x,y:this.triangle.points[0].y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('P2',{value:{x:this.triangle.points[1].x,y:this.triangle.points[1].y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('P3',{value:{x:this.triangle.points[2].x,y:this.triangle.points[2].y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'P1':\r\n                this.triangle.points[0].x=prop.value.x;\r\n                this.triangle.points[0].y=prop.value.y;\r\n                this.controlPoints[0].point=this.triangle.points[0];\r\n                break;\r\n            case 'P2':\r\n                this.triangle.points[1].x=prop.value.x;\r\n                this.triangle.points[1].y=prop.value.y;\r\n                this.controlPoints[1].point=this.triangle.points[1];\r\n                break;\r\n            case 'P3':\r\n                this.triangle.points[2].x=prop.value.x;\r\n                this.triangle.points[2].y=prop.value.y;\r\n                this.controlPoints[2].point=this.triangle.points[2];\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        let l1=new Line(this.triangle.points[0],this.triangle.points[1]);\r\n        let l2=new Line(this.triangle.points[1],this.triangle.points[2]);\r\n        let l3=new Line(this.triangle.points[2],this.triangle.points[0]);\r\n        return Math.min(Geometry.PointToLineDistance(point,l1),\r\n        Geometry.PointToLineDistance(point,l2),\r\n        Geometry.PointToLineDistance(point,l3));\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        const inRect=[Geometry.pointInRect(this.triangle.points[0],topLeft,bottomRight),\r\n                        Geometry.pointInRect(this.triangle.points[1],topLeft,bottomRight),\r\n                        Geometry.pointInRect(this.triangle.points[2],topLeft,bottomRight)];\r\n        const full=inRect.every(i=>i===true);\r\n        const ps=[Intersection.LineRectangle(new Line(this.triangle.points[0],this.triangle.points[1]),topLeft,bottomRight),\r\n                    Intersection.LineRectangle(new Line(this.triangle.points[1],this.triangle.points[2]),topLeft,bottomRight),\r\n                    Intersection.LineRectangle(new Line(this.triangle.points[2],this.triangle.points[0]),topLeft,bottomRight)];\r\n        const cross=ps.some(p=>p.length>0);\r\n        return {cross,full};    \r\n    }\r\n    toString(){\r\n        return \"Triangle\";\r\n    }\r\n}","import Geometry,{Triangle,Coord2D} from '../../../utils/geometry';\r\nimport TriangleShape from '../TriangleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {Color} from '../../colors';\r\nimport SnapMarker from './SnapMarker';\r\n\r\nexport default class MiddleSnapMarker extends SnapMarker {\r\n    static caption = \"middle points\";\r\n    constructor(pos){\r\n    super(pos);\r\n    this.triangle=new Triangle();\r\n}\r\n    refresh(realRect, screenRect){\r\n        let pos=this.getPos();\r\n        let r=realRect.width/screenRect.width*SnapMarker.SNAP_MARKER_SIZE;\r\n        let p=new Array(3);\r\n        p[0]=new Coord2D(pos.x,pos.y+r);\r\n        p[1]=Geometry.rotatePoint(p[0],Math.PI*2/3,pos);\r\n        p[2]=Geometry.rotatePoint(p[1],Math.PI*2/3,pos);\r\n        this.triangle=new Triangle(p);\r\n        let markerShape=new TriangleShape(this.triangle);\r\n        markerShape.setStyle(new ShapeStyle(Color.GREEN,ShapeStyle.SOLID));\r\n        this.setMarker(pos,markerShape);\r\n        super.refresh(realRect,screenRect);\r\n    }\r\n}","import Geometry,{Rectangle,Coord2D,Line, Intersection} from '../../utils/geometry';\r\nimport EndSnapMarker from './markers/EndSnapMarker';\r\nimport MiddleSnapMarker from './markers/MiddleSnapMarker';\r\nimport Shape from \"./Shape\";\r\nimport PointMarker from './markers/PointMarker';\r\nimport PointPicker from './pickers/PointPicker';\r\n\r\nexport default class RectangleShape extends Shape{\r\n    constructor(rectangle){\r\n        super();\r\n        this.rectangle=rectangle;\r\n        this.model=rectangle;\r\n        this.rect=new Rectangle()\r\n        this.controlPoints=[\r\n            {point:this.rectangle.topLeft,show:false,selected:false},\r\n            {point:this.rectangle.bottomRight,show:false,selected:false}]\r\n        for(let cp of this.controlPoints)\r\n          cp.marker=new PointMarker(cp.point,false)\r\n    }\r\n\r\n    drawSelf(ctx, realRect, screenRect) {\r\n        this.refresh(realRect, screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.strokeRect(this.rect.topLeft.x,this.rect.topLeft.y,this.rect.width,this.rect.height);\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.rect.topLeft=Geometry.realToScreen(this.rectangle.topLeft,realRect,screenRect);\r\n        this.rect.width=Geometry.realToScreenLength(this.rectangle.width,realRect.width,screenRect.width);\r\n        this.rect.height=Geometry.realToScreenLength(this.rectangle.height,realRect.height,screenRect.height);\r\n        if(this.activePoint) \r\n            this.activePointMarker=new PointMarker(this.activePoint)\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        list.push(new EndSnapMarker(this.rectangle.topLeft));\r\n        list.push(new EndSnapMarker(new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y)));\r\n        list.push(new EndSnapMarker(new Coord2D(this.rectangle.topLeft.x,this.rectangle.topLeft.y-this.rectangle.height)));\r\n        list.push(new EndSnapMarker(new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y-this.rectangle.height)));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(this.rectangle.topLeft,new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y))));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y),new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y-this.rectangle.height))));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y-this.rectangle.height),new Coord2D(this.rectangle.topLeft.x,this.rectangle.topLeft.y-this.rectangle.height))));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(new Coord2D(this.rectangle.topLeft.x,this.rectangle.topLeft.y-this.rectangle.height),this.rectangle.topLeft)));\r\n        return list;\r\n    }\r\n    setActivePoint(key){\r\n        super.setActivePoint()\r\n        if(key==='P1') {this.controlPoints[0].selected=true;this.controlPoints[0].marker.setActive(true)}\r\n        if(key==='P2') {this.controlPoints[1].selected=true;this.controlPoints[1].marker.setActive(true)}\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'Rectangle',regexp:/\\s*/});\r\n        prop.set('P1',{value:{x:this.rectangle.topLeft.x,y:this.rectangle.topLeft.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('P2',{value:{x:this.rectangle.bottomRight.x,y:this.rectangle.bottomRight.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'P1':\r\n                this.rectangle.topLeft.x=prop.value.x;\r\n                this.rectangle.topLeft.y=prop.value.y;\r\n                this.controlPoints[0].point=this.rectangle.topLeft;\r\n                break;\r\n            case 'P2':\r\n                this.rectangle.bottomRight.x=prop.value.x;\r\n                this.rectangle.bottomRight.y=prop.value.y;\r\n                this.controlPoints[1].point=this.rectangle.bottomRight;\r\n                break;\r\n            default:\r\n        }\r\n        this.rectangle.width=this.rectangle.bottomRight.x-this.rectangle.topLeft.x;\r\n        this.rectangle.height=this.rectangle.topLeft.y-this.rectangle.bottomRight.y;\r\n    }\r\n    getDistance(point) {\r\n        let tl=this.rectangle.topLeft;\r\n        let tr=new Coord2D(tl.x+this.rectangle.width,tl.y);\r\n        let bl=new Coord2D(tl.x,tl.y-this.rectangle.height);\r\n        let br=new Coord2D(tl.x+this.rectangle.width,tl.y-this.rectangle.height);\r\n        let top=new Line(tl,tr);\r\n        let bottom=new Line(bl,br);\r\n        let right=new Line(tr,br);\r\n        let left=new Line(tl,bl);\r\n        return Math.min(Geometry.PointToLineDistance(point,top),\r\n        Geometry.PointToLineDistance(point,left),\r\n        Geometry.PointToLineDistance(point,bottom),\r\n        Geometry.PointToLineDistance(point,right));\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        const inRect=[Geometry.pointInRect(this.rectangle.topLeft,topLeft,bottomRight),\r\n                        Geometry.pointInRect(this.rectangle.bottomRight,topLeft,bottomRight)];\r\n        const full=inRect.every(i=>i===true);\r\n        const cross=Intersection.RectangleRectangle(topLeft,bottomRight,this.rectangle.topLeft,this.rectangle.bottomRight).length>0;\r\n        return {cross,full};    \r\n    }\r\n    toString(){\r\n        return \"Rectangle\";\r\n    }\r\n}","import {Rectangle} from '../../../utils/geometry';\r\nimport RectangleShape from '../RectangleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {Color} from '../../colors';\r\nimport SnapMarker from './SnapMarker';\r\nexport default class EndSnapMarker extends SnapMarker {\r\n    static caption = \"end points\";\r\n    constructor(pos){\r\n        super(pos);\r\n        this.rect=new Rectangle();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        let pos=this.getPos();\r\n        this.rect.width=realRect.width/screenRect.width*SnapMarker.SNAP_MARKER_SIZE;\r\n        this.rect.height=this.rect.width;\r\n        this.rect.topLeft.x=pos.x-this.rect.width/2;\r\n        this.rect.topLeft.y=pos.y+this.rect.height/2;\r\n        let markerShape=new RectangleShape(this.rect);\r\n        markerShape.setStyle(new ShapeStyle(Color.DARK_ORANGE,ShapeStyle.SOLID,3));\r\n        this.setMarker(pos,markerShape);\r\n        super.refresh(realRect,screenRect);\r\n    }\r\n}","import Geometry, { Intersection} from '../../utils/geometry';\r\nimport EndSnapMarker from './markers/EndSnapMarker';\r\nimport MiddleSnapMarker from './markers/MiddleSnapMarker';\r\nimport Shape from \"./Shape\";\r\nimport PointPicker from './pickers/PointPicker';\r\nimport PointMarker from './markers/PointMarker';\r\n\r\nexport default class LineShape extends Shape{\r\n    constructor(line){\r\n        super();\r\n        this.p=[];\r\n        this.p[0]=line.p1;\r\n        this.p[1]=line.p2;\r\n        this.line=line;\r\n        this.model=line;\r\n        this.controlPoints=[\r\n            {point:this.p[0],show:false,selected:false},\r\n            {point:this.p[1],show:false,selected:false}]\r\n        for(let cp of this.controlPoints)\r\n          cp.marker=new PointMarker(cp.point,false)\r\n    }\r\n    drawSelf(ctx,realRect, screenRect){\r\n        this.refresh(realRect, screenRect);\r\n        \r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x,this.p0.y);\r\n        ctx.lineTo(this.p1.x,this.p1.y);\r\n        ctx.stroke();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.p0 = Geometry.realToScreen(this.line.p1,realRect,screenRect);\r\n        this.p1 = Geometry.realToScreen(this.line.p2, realRect, screenRect);\r\n\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        list.push(new EndSnapMarker(this.line.p1));\r\n        list.push(new EndSnapMarker(this.line.p2));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(this.line.p1,this.line.p2)))\r\n        return list;\r\n    }\r\n    setActivePoint(key){\r\n        super.setActivePoint();\r\n        if(key==='P1') {this.controlPoints[0].selected=true;this.controlPoints[0].marker.setActive(true)}\r\n        if(key==='P2') {this.controlPoints[1].selected=true;this.controlPoints[1].marker.setActive(true)}\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'Line',regexp:/\\s*/});\r\n        prop.set('P1',{value:{x:this.line.p1.x,y:this.line.p1.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('P2',{value:{x:this.line.p2.x,y:this.line.p2.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'P1':\r\n                this.line.p1.x=prop.value.x;\r\n                this.line.p1.y=prop.value.y;\r\n                this.controlPoints[0].point=this.line.p1;\r\n                break;\r\n            case 'P2':\r\n                this.line.p2.x=prop.value.x;\r\n                this.line.p2.y=prop.value.y;\r\n                this.controlPoints[1].point=this.line.p2;\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        return Geometry.PointToLineDistance(point,this.line);\r\n    }\r\n\r\n    isInRect(topLeft,bottomRight){\r\n        const inRect=[Geometry.pointInRect(this.line.p1,topLeft,bottomRight),\r\n                        Geometry.pointInRect(this.line.p2,topLeft,bottomRight)];\r\n        const full=inRect.every(i=>i===true);\r\n        const cross=Intersection.LineRectangle(this.line,topLeft,bottomRight).length>0;\r\n        return {cross,full};    \r\n    }\r\n    toString(){\r\n            return `Line P1(${this.line.p1.x},${this.line.p1.y}) P2(${this.line.p2.x},${this.line.p2.y})`;\r\n    }\r\n\r\n}","import Geometry from '../../utils/geometry';\r\nimport Shape from \"./Shape\";\r\n\r\nexport default class TextShape extends Shape{\r\n    static CENTER=1;\r\n    constructor(text=\"\",point={x:0,y:0}){\r\n        super();\r\n        this.p=point;\r\n        this.text=text;\r\n    }\r\n    drawSelf(ctx,realRect, screenRect){\r\n        this.refresh(realRect, screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        console.log(ctx.lineWidth)\r\n        ctx.save();\r\n        ctx.font=this.font;\r\n        let basePoint={...this.p0}\r\n        if(this.anchor===TextShape.CENTER){\r\n            const width=ctx.measureText(this.text).width/2;\r\n            basePoint.x=this.p0.x-width*Math.cos(this.angle);\r\n            basePoint.y=this.p0.y-width*Math.sin(this.angle);\r\n        }\r\n        const newPoint=Geometry.rotatePoint(basePoint,this.angle,{x:0,y:0})\r\n        ctx.translate(basePoint.x-newPoint.x,basePoint.y-newPoint.y);\r\n        ctx.rotate(this.angle);\r\n        ctx.strokeText(this.text,basePoint.x,basePoint.y);\r\n        ctx.restore();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.p0 = Geometry.realToScreen(this.p,realRect,screenRect);\r\n    }\r\n    rotate(angle){\r\n        this.angle=angle;\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        return list;\r\n    }\r\n    setText(text){\r\n        this.text=text;\r\n    }\r\n    setFont(font){\r\n        this.font=font;\r\n    }\r\n    setPoint(point){\r\n        this.p=point;\r\n    }\r\n    setAnchor(anchor){\r\n        this.anchor=anchor;\r\n    }\r\n    setActivePoint(key){\r\n        this.activePoint=null;\r\n        if(key==='P1') this.activePoint=this.p;\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'P1':\r\n                this.line.p1.x=prop.value.x;\r\n                this.line.p1.y=prop.value.y;\r\n                break;\r\n            case 'P2':\r\n                this.line.p2.x=prop.value.x;\r\n                this.line.p2.y=prop.value.y;\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        return null\r\n        //return Geometry.PointToLineDistance(point,this.line);\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        return {cross:false,full:false}\r\n        // const inRect=[Geometry.pointInRect(this.p,topLeft,bottomRight),\r\n        //                 Geometry.pointInRect(this.line.p2,topLeft,bottomRight)];\r\n        // const full=inRect.every(i=>i===true);\r\n        // const cross=Intersection.LineRectangle(this.line,topLeft,bottomRight).length>0;\r\n        // return {cross,full};    \r\n    }\r\n    toString(){\r\n            return `Line P1(${this.line.p1.x},${this.line.p1.y}) P2(${this.line.p2.x},${this.line.p2.y})`;\r\n    }\r\n\r\n}","import LineShape from '../LineShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport Geometry, {Line,Coord2D,Circle, Vector} from \"../../../utils/geometry\";\r\nimport {Color} from '../../colors';\r\nimport PropertyPicker from './PropertyPicker';\r\nimport TextShape from '../TextShape';\r\nexport default class DistancePicker extends PropertyPicker{\r\n    static caption=\"\";\r\n    constructor(style=new ShapeStyle(Color.BLACK,ShapeStyle.DASH)){\r\n        super()\r\n        this.name=\"DistancePicker\"\r\n        this.line=new Line(new Coord2D(),new Coord2D());\r\n        this.boundedCircle=new Circle(new Coord2D(),0);\r\n        this.points=[new Coord2D(),new Coord2D()];\r\n        this.shape=new LineShape(this.line);\r\n        this.text=new TextShape();\r\n        this.text.setAnchor(TextShape.CENTER)\r\n        this.text.setFont('10px sans-serif')\r\n        this.style=style;\r\n        this.shape.setStyle(style);\r\n        this.helperShapes=[this.text];\r\n        this.xAxe=new Vector({x:1,y:0},{x:0,y:0})\r\n        //this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        //this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0)this.line=new Line(this.points[0],this.points[1]);\r\n        this.data=Geometry.distance(this.points[0],this.points[1]);\r\n        this.shape=new LineShape(this.line);\r\n        this.shape.setStyle(this.style);\r\n        this.text.setText(this.data.toFixed(4))\r\n        this.text.setPoint(Geometry.midPoint(this.points[0],this.points[1]))\r\n        let angle=Geometry.angleVectors(new Vector(this.points[1],this.points[0]),this.xAxe);\r\n        if(angle<Math.PI/2)angle=angle*Math.sign(this.points[0].y-this.points[1].y);\r\n            else angle=(Math.PI-angle)*Math.sign(this.points[1].y-this.points[0].y);\r\n        this.text.rotate(angle);\r\n\r\n        this.setControlPoints();\r\n    }\r\n    setControlPoints(){\r\n        //this.helperShapes[0]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        //this.helperShapes[1]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        //this.helperShapes[0].setColor(Color.BLUE);\r\n        //this.helperShapes[1].setColor(Color.BLUE);\r\n    }\r\n    reset(){return new DistancePicker(new ShapeStyle(this.style.getColor(),this.style.getType()));}\r\n}\r\n","import {Coord2D} from \"../../utils/geometry\";\r\nimport Geometry from \"../../utils/geometry\";\r\nimport CenterSnapMarker from './markers/CenterSnapMarker';\r\nimport Shape from \"./Shape\";\r\nimport PointMarker from \"./markers/PointMarker\";\r\nimport PointPicker from './pickers/PointPicker'\r\nimport DistancePicker from './pickers/DistancePicker'\r\nimport ShapeStyle from \"./ShapeStyle\";\r\nexport default class CircleShape extends Shape{\r\n    constructor(circle){\r\n        super();\r\n        this.p=new Coord2D();\r\n        this.circle=circle;\r\n        this.model=circle;\r\n        this.setStyle(new ShapeStyle())\r\n        this.controlPoints=[{point:circle.center,show:false,selected:false}];\r\n        for(let cp of this.controlPoints)\r\n                cp.marker=new PointMarker(cp.point,false)\r\n    }\r\n\r\n    drawSelf(ctx, realRect, screenRect){\r\n        this.refresh(realRect, screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.arc(this.screenCenter.x,this.screenCenter.y,this.screenRadius,0,2*Math.PI);\r\n        ctx.stroke();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.screenCenter=Geometry.realToScreen(this.circle.center,realRect,screenRect);\r\n        this.screenRadius=Geometry.realToScreenLength(this.circle.radius,realRect.width,screenRect.width);\r\n        if(this.activePoint) \r\n            this.activePointMarker=new PointMarker(this.activePoint)\r\n\r\n    }\r\n    setActivePoint(key){\r\n        super.setActivePoint();\r\n        if(key==='Center') {this.controlPoints[0].selected=true;this.controlPoints[0].marker.setActive(true);}\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        list.push(new CenterSnapMarker(this.circle.center));\r\n        return list;\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'Circle',regexp:/\\s*/});\r\n        prop.set('Center',{value:{x:this.circle.center.x,y:this.circle.center.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('Radius',{value:this.circle.radius,picker:DistancePicker,regexp:/^\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'Center':\r\n                this.circle.center.x=prop.value.x;\r\n                this.circle.center.y=prop.value.y;\r\n                this.controlPoints[0].point=this.circle.center;\r\n                break;\r\n            case 'Radius':\r\n                this.circle.radius=prop.value;\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        return Math.abs(Geometry.distance(point,this.circle.center)-this.circle.radius);\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        const outRectX1=topLeft.x-this.circle.radius;\r\n        const outRectY1=topLeft.y+this.circle.radius;\r\n        const outRectX2=bottomRight.x+this.circle.radius;\r\n        const outRectY2=bottomRight.y-this.circle.radius;\r\n        const inRectX1=topLeft.x+this.circle.radius;\r\n        const inRectY1=topLeft.y-this.circle.radius;\r\n        const inRectX2=bottomRight.x-this.circle.radius;\r\n        const inRectY2=bottomRight.y+this.circle.radius;\r\n        const c=this.circle.center;\r\n        let cross=false;\r\n        const signs=[Math.sign(Geometry.distance(c,{x:topLeft.x,y:topLeft.y})-this.circle.radius),\r\n                     Math.sign(Geometry.distance(c,{x:bottomRight.x,y:topLeft.y})-this.circle.radius),\r\n                     Math.sign(Geometry.distance(c,{x:bottomRight.x,y:bottomRight.y})-this.circle.radius),\r\n                     Math.sign(Geometry.distance(c,{x:topLeft.x,y:bottomRight.y})-this.circle.radius)];\r\n        if(signs.every(x=>x<0)) return {cross:false,full:false};\r\n        let full=Geometry.pointInRectByPoints(c.x,c.y,inRectX1,inRectY1,inRectX2,inRectY2);\r\n        if(full===true) return {cross:false,full:true}\r\n        if(Geometry.pointInRectByPoints(c.x,c.y,outRectX1,outRectY1,outRectX2,outRectY2)){\r\n                cross=true;\r\n                if(Geometry.pointInRectByPoints(c.x,c.y,outRectX1,outRectY1,topLeft.x,topLeft.y)){\r\n                    if(Geometry.distance(c,{x:topLeft.x,y:topLeft.y})>this.circle.radius) cross=false;\r\n                }\r\n                if(Geometry.pointInRectByPoints(c.x,c.y,bottomRight.x,outRectY1,outRectX2,topLeft.y)){\r\n                    if(Geometry.distance(c,{x:bottomRight.x,y:topLeft.y})>this.circle.radius) cross=false;\r\n                }\r\n                if(Geometry.pointInRectByPoints(c.x,c.y,bottomRight.x,bottomRight.y,outRectX2,outRectY2)){\r\n                    if(Geometry.distance(c,{x:bottomRight.x,y:bottomRight.y})>this.circle.radius) cross=false;\r\n                }\r\n                if(Geometry.pointInRectByPoints(c.x,c.y,outRectX1,bottomRight.y,topLeft.x,outRectY2)){\r\n                    if(Geometry.distance(c,{x:topLeft.x,y:bottomRight.y})>this.circle.radius) cross=false;\r\n                }\r\n            }\r\n        return {cross:cross,full:false}\r\n    }\r\n    toString(){\r\n        return \"Center(\"+this.circle.center.x+\",\"+this.circle.center.y+\") radius(\"+this.circle.radius+\")\";\r\n    }\r\n\r\n}","import React from 'react';\r\nimport '../Graph.css';\r\nimport Geometry, {Coord2D, Point2D,Rectangle} from '../utils/geometry.js';\r\nimport ShapeStyle from './shapes/ShapeStyle';\r\nimport {Color} from './colors';\r\nimport { Status } from '../reducers/screen';\r\nimport TextShape from './shapes/TextShape';\r\nexport default class Screen extends React.Component {\r\n    static MARKER_SIZE=0.005;\r\n    static SNAP_MARKER_SIZE=5;\r\n    curPoint=new Point2D();\r\n    prevPoint=new Point2D();\r\n    gridStep=1;gridStepPixels=1;dragGrid=false;\r\n    gridPointsX=[];gridPointsY=[];\r\n    gridNumbersX=[];gridNumbersY=[];\r\n    dragX0=0;dragY0=0;\r\n    drag=false;lbut=0o00;mbut=0o01;\r\n    constructor(props){\r\n        super(props);\r\n        window.KEYDOWNHANDLE=true\r\n        this.refCanvas=React.createRef()\r\n    }\r\n\r\n    getRealRect(){\r\n        let realRect = new Rectangle();\r\n        realRect.topLeft = this.props.topLeft;\r\n        realRect.bottomRight=this.props.bottomRight;\r\n        realRect.width = this.props.bottomRight.x-this.props.topLeft.x;\r\n        realRect.height=this.props.topLeft.y-this.props.bottomRight.y;\r\n        return realRect;\r\n    }\r\n    getScreenRect(){\r\n        let screenRect = new Rectangle();\r\n        screenRect.topLeft.x = 0;\r\n        screenRect.topLeft.y = 0;\r\n        screenRect.width = this.props.screenWidth;\r\n        screenRect.height = this.props.screenHeight;\r\n        return screenRect;\r\n    }\r\n\r\n    test(){\r\n        const text=new TextShape('Text',{x:0,y:0})\r\n        text.setStyle(new ShapeStyle(Color.BLACK,ShapeStyle.SOLID))\r\n        text.rotate(45*Math.PI/180)\r\n        this.props.shapes.push(text);\r\n    }\r\n\r\n    drawCursor(ctx){\r\n      this.props.cursor.setCoord(this.props.curCoord);\r\n      this.drawShape(this.props.cursor,ctx);\r\n    }\r\n    drawGrid(ctx){\r\n        ctx.strokeStyle=Color.GRID;\r\n        let solidStyle=new ShapeStyle(Color.GRAY,ShapeStyle.SOLID);\r\n        let dashStyle=new ShapeStyle(Color.GRAY,ShapeStyle.DASH);\r\n        let firstX=Math.round(this.props.topLeft.x/this.props.gridStep)*this.props.gridStep;\r\n        let firstY=Math.round(this.props.topLeft.y/this.props.gridStep)*this.props.gridStep;\r\n        let hor=false;\r\n        let vert=false;\r\n        let ix=0;\r\n        let iy=0;\r\n        let xGridLineNumber=Math.round(firstX/this.props.gridStep);\r\n        let yGridLineNumber=Math.round(firstY/this.props.gridStep);\r\n        let gridLinesCountX=Math.round(this.props.realWidth/this.props.gridStep);\r\n        let gridLinesCountY=Math.round(this.props.realHeight/this.props.gridStep);\r\n        this.gridPointsX=new Array(gridLinesCountX);\r\n        this.gridPointsY=new Array(gridLinesCountY);\r\n        this.gridNumbersX=new Array(gridLinesCountX);\r\n        this.gridNumbersY=new Array(gridLinesCountY);\r\n        while(!hor||!vert){\r\n            if(!hor){\r\n                let x=firstX+this.props.gridStep*ix;\r\n                let px=Geometry.realToScreen(new Coord2D(x,this.props.topLeft.y),this.getRealRect(),this.getScreenRect());\r\n                if(xGridLineNumber%10===0) ctx.setLineDash(solidStyle.getStroke());else ctx.setLineDash(dashStyle.getStroke());\r\n\r\n                if(this.props.show.grid) {\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(px.x, 0);\r\n                    ctx.lineTo(px.x, this.props.screenHeight);\r\n                    ctx.stroke();\r\n                }\r\n                this.gridPointsX[ix]=px.x;\r\n                this.gridNumbersX[ix]=x;\r\n                ix++;\r\n                xGridLineNumber++;\r\n                if(x>(this.props.topLeft.x+this.props.realWidth))hor=true;\r\n            }\r\n            if(!vert){\r\n                let y=firstY-this.props.gridStep*iy;\r\n                let py=Geometry.realToScreen(new Coord2D(this.props.topLeft.x,y),this.getRealRect(),this.getScreenRect());\r\n                if(yGridLineNumber%10===0) ctx.setLineDash(solidStyle.getStroke());else ctx.setLineDash(dashStyle.getStroke());\r\n                yGridLineNumber--;\r\n                if(this.props.show.grid) {\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(0, py.y);\r\n                    ctx.lineTo(this.props.screenWidth, py.y);\r\n                    ctx.stroke();\r\n                }\r\n                this.gridPointsY[iy]=py.y;\r\n                this.gridNumbersY[iy]=y;\r\n                iy++;\r\n                if(y<(this.props.topLeft.y-this.props.realHeight))vert=true;\r\n            }\r\n\r\n        }\r\n        ctx.setLineDash(solidStyle.getStroke());\r\n    }\r\n    drawCoordinates(ctx){\r\n        ctx.font=\"10px sans-serif\";\r\n        ctx.strokeStyle=\"black\";\r\n        let i=0;\r\n        let format=0;\r\n        let w;\r\n        if(this.props.gridStep>=0.001){format=3;}\r\n        if(this.props.gridStep>=0.01){format=2;}\r\n        if(this.props.gridStep>=0.1){format=1;}\r\n        if(this.props.gridStep>=1){format=0;}\r\n        let l=0;\r\n        let s0=\"\";//Finding out the number with maximum length\r\n        for(let x of this.gridNumbersX){\r\n            if(x===null) continue;\r\n             let s=x.toFixed(format);\r\n            if(l<s.length){s0=s;l=s.length;}\r\n            }\r\n        w=ctx.measureText(s0).width;\r\n        for(let x of this.gridPointsX){\r\n            if(x===null) continue;\r\n            if(x>this.props.marginLeft&&x<this.props.screenWidth-this.props.marginRight) {\r\n                 let s=this.gridNumbersX[i].toFixed(format);\r\n                 let d=1;\r\n                 let r=w/this.props.gridStepPixels;\r\n                 if(r>=1)d=2;\r\n                 if(r>=1.5)d=5;\r\n                 if(Math.round(this.gridNumbersX[i]/this.props.gridStep)%d===0)\r\n                    ctx.strokeText(s,x-ctx.measureText(s).width/2,this.props.marginTop - 5);\r\n            }\r\n            i++;\r\n        }\r\n        i=0;\r\n        for(let y of this.gridPointsY){\r\n            if(y===null) continue;\r\n            if(y>this.props.marginTop&&y<this.props.screenHeight-this.props.marginBottom){\r\n                let s=this.gridNumbersY[i].toFixed(format);\r\n                w=ctx.measureText(s).width;\r\n                let h=ctx.measureText(\"12\").width;\r\n                let d=1;\r\n                let r=h/this.props.gridStepPixels;\r\n                if(r>0.8&&r<1.5)d=2;\r\n                if(r>=1.5)d=5;\r\n                if(Math.round(this.gridNumbersY[i]/this.props.gridStep)%d===0)\r\n                    ctx.strokeText(s,this.props.marginLeft-w,y+h/3);\r\n                }\r\n             i++;\r\n        }\r\n    }\r\n    drawShape(s, ctx){\r\n        s.drawSelf(ctx,this.getRealRect(), this.getScreenRect());\r\n    }\r\n    paint(ctx){\r\n        ctx.fillStyle=\"white\";\r\n        ctx.lineWidth=1;\r\n        ctx.lineJoin='round';\r\n        ctx.fillRect(0, 0, this.props.screenWidth, this.props.screenHeight);\r\n        this.drawGrid(ctx);\r\n        this.drawShape(this.props.xAxe,ctx)\r\n        this.drawShape(this.props.yAxe,ctx)\r\n        let status_bar=`X=${this.props.curCoord.x.toFixed(3)} Y=${this.props.curCoord.y.toFixed(3)} `;\r\n        let currentShape='';\r\n        if(this.props.shapeCreator) currentShape=this.props.captions.creators[this.props.shapeCreator.getName()].description;\r\n        let creationStep='';\r\n        if(this.props.status===Status.CREATE) \r\n            {\r\n            creationStep=this.props.captions.creators[this.props.shapeCreator.getName()].steps[this.props.shapeCreator.getCurrentStep()];\r\n            status_bar=status_bar+`${currentShape}: ${creationStep}`;\r\n            }\r\n        if(this.props.shapeCreator){\r\n            let curHelperShapes=null;\r\n            curHelperShapes=this.props.shapeCreator.getHelperShapes();\r\n            if(curHelperShapes!=null)\r\n            for(let shape of curHelperShapes)\r\n                this.drawShape(shape, ctx);\r\n            let curShape=null;\r\n            curShape=this.props.shapeCreator.getShape();\r\n            if(curShape!=null) this.drawShape(curShape, ctx);\r\n        }\r\n        if(this.props.status===Status.PICK) {\r\n            creationStep=this.props.captions.pickers[this.props.picker.getName()].steps[this.props.picker.getCurrentStep()];\r\n            status_bar=status_bar+`${creationStep}`;\r\n\r\n             }\r\n        if(this.props.picker){\r\n            const pickShape=this.props.picker.getShape();\r\n            if(pickShape!=null) this.drawShape(pickShape, ctx);   \r\n            const pickHelperShapes=this.props.picker.getHelperShapes();\r\n            if(pickHelperShapes!=null)\r\n            for(let shape of pickHelperShapes)\r\n                this.drawShape(shape, ctx);\r\n        }\r\n        for(let shape of this.props.shapes){\r\n                this.drawShape(shape,ctx);\r\n                for(let cp of shape.controlPoints)\r\n                        if(cp.show)this.drawShape(cp.marker,ctx);\r\n            }\r\n         \r\n        ctx.lineWidth=1;\r\n        ctx.setLineDash(ShapeStyle.SOLID);\r\n        ctx.fillStyle=\"white\";\r\n        //fill margin\r\n        ctx.fillRect(0, 0, this.props.screenWidth-this.props.marginRight,this.props.marginTop);\r\n        ctx.fillRect(0,0, this.props.marginLeft,this.props.screenHeight);\r\n        ctx.fillRect(this.props.screenWidth-this.props.marginRight, 0, this.props.screenWidth,this.props.screenHeight);\r\n        ctx.fillRect(this.props.marginLeft, this.props.screenHeight-this.props.marginBottom, this.props.screenWidth-this.props.marginRight,this.props.screenHeight-this.props.marginTop);\r\n        ctx.strokeStyle=\"black\";\r\n        ctx.strokeRect(this.props.marginLeft, this.props.marginTop, this.props.screenWidth-this.props.marginRight-this.props.marginLeft,this.props.screenHeight-this.props.marginBottom-this.props.marginTop);\r\n        this.drawCoordinates(ctx);\r\n        ctx.font=\"12px sans-serif\";\r\n        ctx.strokeText(status_bar,this.props.marginLeft,this.props.screenHeight-this.props.statusBar);\r\n        if(this.props.status!==Status.FREE){\r\n            let marker=this.props.snapMarkersManager.getActiveMarker();\r\n            if(marker!=null) {\r\n                marker.refresh(this.getRealRect(), this.getScreenRect());\r\n                this.drawShape(marker.getMarker(), ctx);\r\n            }\r\n        }\r\n        ctx.lineWidth=1;\r\n        if(this.props.status===Status.SELECT){\r\n            this.drawShape(this.props.selectionManager.getSelectionShape(),ctx);\r\n        }\r\n        if(this.props.mouseHandler.mouseOnScreen)this.drawCursor(ctx);\r\n    }\r\n\r\n    isOutRect(p){\r\n       return p.x<this.props.marginLeft||p.x>this.props.screenWidth-this.props.marginRight\r\n        ||p.y<this.props.marginTop||p.y>this.props.screenHeight-this.props.marginBottom;\r\n    }\r\n    mmoveHandle(e){\r\n        let rect=e.target.getBoundingClientRect();\r\n        let curPoint={x:e.clientX-rect.left,y:e.clientY-rect.top};\r\n        this.props.mouseHandler.move({curPoint,screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey})\r\n    }\r\n    mmove(e){\r\n        let rect=e.target.getBoundingClientRect();\r\n        let curPoint={x:e.clientX-rect.left,y:e.clientY-rect.top};\r\n        this.mouseOnScreen=!this.isOutRect(curPoint);\r\n        let coord={x:this.props.curCoord.x,y:this.props.curCoord.y};\r\n\r\n        if(this.props.status===Status.PAN){\r\n            coord=Geometry.screenToReal(curPoint.x,curPoint.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight);\r\n            let dx=curPoint.x-this.dragX0;\r\n            let dy=curPoint.y-this.dragY0;\r\n            this.dragX0=curPoint.x\r\n            this.dragY0=curPoint.y\r\n            const rdx=this.props.realWidth*dx/this.props.screenWidth;\r\n            const rdy=this.props.realHeight*dy/this.props.screenHeight;\r\n            this.props.actions.setTopLeft({x:this.props.topLeft.x-rdx,y:this.props.topLeft.y+rdy});\r\n            this.props.actions.setBoundedCircle();\r\n            return;\r\n        }\r\n        if(this.isOutRect(curPoint)){\r\n            curPoint.x=this.prevPoint.x;\r\n            curPoint.y=this.prevPoint.y;\r\n        }\r\n        coord=Geometry.screenToReal(curPoint.x,curPoint.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight);\r\n        coord.x=+coord.x.toFixed(4);\r\n        coord.y=+coord.y.toFixed(4);\r\n        this.prevPoint.x=curPoint.x;\r\n        this.prevPoint.y=curPoint.y;\r\n        let temp={x:coord.x,y:coord.y};\r\n        if(this.props.gridSnap&&this.props.status!==Status.FREE){\r\n            let x=Math.round(temp.x/this.props.gridStep)*this.props.gridStep;\r\n            let y=Math.round(temp.y/this.props.gridStep)*this.props.gridStep;\r\n            let dx=x-temp.x;\r\n            let dy=y-temp.y;\r\n            if((Math.sqrt(dx*dx+dy*dy)<=this.props.snapMinDist*this.props.pixelRatio)){\r\n                if(!this.isOutRect(Geometry.realToScreen({x,y},this.getRealRect(),this.getScreenRect()))) {\r\n                    temp.x = x;\r\n                    temp.y = y;\r\n                    curPoint = Geometry.realToScreen(temp,this.getRealRect(),this.getScreenRect());\r\n                }\r\n                }\r\n        }\r\n        if(this.props.status!==Status.FREE){\r\n            let d = this.props.snapMarkersManager.getDistanceToNearestMarker(temp,this.props.snapDist*this.props.pixelRatio);\r\n            if(d>=0&&d<=this.props.snapMinDist*this.props.pixelRatio){\r\n                temp=this.props.snapMarkersManager.getActiveMarker().getPos();\r\n                curPoint = Geometry.realToScreen(temp,this.getRealRect(),this.getScreenRect());\r\n            }\r\n        }\r\n        coord=temp;\r\n        if(this.props.status===Status.FREE){\r\n            this.props.shapeManager.findShapeNearPoint(coord,this.props.selectDist*this.props.pixelRatio);\r\n        }\r\n        if(this.props.status===Status.SELECT){\r\n            this.props.selectionManager.setCurrent(coord);\r\n            this.props.shapeManager.findShapeInRect(this.prevCoord,coord);\r\n        }\r\n        if(this.props.status===Status.CREATE){\r\n            this.props.shapeCreator.setCurrent(coord);\r\n        }\r\n        if(this.props.status===Status.PICK){\r\n            this.props.picker.setCurrent(coord);\r\n        }\r\n        this.props.actions.setCurCoord(coord);\r\n        \r\n    }\r\n    mdownHandle(e){\r\n        if(e.button===1){\r\n            let rect=e.target.getBoundingClientRect();\r\n            const curPoint={x:e.clientX-rect.left,y:e.clientY-rect.top};\r\n            this.dragX0=curPoint.x\r\n            this.dragY0=curPoint.y\r\n            this.props.actions.setScreenStatus(Status.PAN);\r\n            e.preventDefault();\r\n        }\r\n        if(e.button===0){\r\n            let rect=e.target.getBoundingClientRect();\r\n            this.curPoint.x=e.clientX-rect.left;\r\n            this.curPoint.y=e.clientY-rect.top;\r\n            this.props.mouseHandler.down({curPoint:this.curPoint,screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey});\r\n            this.props.actions.repaint();\r\n            e.preventDefault();\r\n        }\r\n    }\r\n    mdown(e){\r\n        if(e.button===1){\r\n            let rect=e.target.getBoundingClientRect();\r\n            const curPoint={x:e.clientX-rect.left,y:e.clientY-rect.top};\r\n            this.dragX0=curPoint.x\r\n            this.dragY0=curPoint.y\r\n            this.props.actions.setScreenStatus(Status.PAN);\r\n            e.preventDefault();\r\n        }\r\n        if(e.button===0){\r\n            let rect=e.target.getBoundingClientRect();\r\n            this.curPoint.x=e.clientX-rect.left;\r\n            this.curPoint.y=e.clientY-rect.top;\r\n            if(this.props.status===Status.FREE){\r\n                this.prevCoord=Geometry.screenToReal(this.curPoint.x,this.curPoint.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight);\r\n                this.props.selectionManager.reset();\r\n                this.props.selectionManager.setNext(Geometry.screenToReal(this.curPoint.x,this.curPoint.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight));\r\n                this.props.actions.setScreenStatus(Status.SELECT);\r\n            }\r\n            this.props.actions.repaint();\r\n            e.preventDefault();\r\n        }\r\n    }\r\n    mupHandle(e){\r\n        if(e.button===1){\r\n            this.props.actions.setPrevStatus();\r\n        }\r\n        if(e.button===0){\r\n            this.props.mouseHandler.up({screenProps:this.props});\r\n        }\r\n    }\r\n    mup(e){\r\n        if(e.button===1){\r\n            this.props.actions.setPrevStatus();\r\n        }\r\n        if(e.button===0){\r\n            if(this.props.status===Status.SELECT){\r\n                this.props.actions.cancel();\r\n            }\r\n        }\r\n    }\r\n    mwheelHandle(e){\r\n        if(this.props.status===Status.PAN)return;\r\n        let rect=e.target.getBoundingClientRect();\r\n        let point=Geometry.screenToReal(e.clientX-rect.left,e.clientY-rect.top,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight);\r\n        this.props.mouseHandler.wheel({deltaY:e.deltaY,point,screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey})\r\n       e.preventDefault();\r\n    }\r\n    mleaveHandle(){\r\n        this.props.mouseHandler.leave({screenProps:this.props});\r\n        this.props.actions.repaint();\r\n    }\r\n    mleave(){\r\n        if(this.props.status===Status.PAN){\r\n            this.props.actions.setPrevStatus();\r\n        }\r\n        this.mouseOnScreen=false;\r\n        this.props.actions.repaint();\r\n    }\r\n    menter(){\r\n    }\r\n    clickHandle(e){\r\n        if(e.button===0){\r\n            this.props.mouseHandler.click({screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey});\r\n        }\r\n        this.props.actions.selectShapes(this.props.shapeManager.getSelectedShapes());\r\n        e.preventDefault();\r\n    }\r\n    onclick(e){\r\n        if(e.button===0){\r\n            if(this.props.status===Status.CREATE){\r\n                this.props.shapeCreator.setCurrent(this.props.curCoord);\r\n                if(this.props.shapeCreator.isLegal()) this.props.shapeCreator.setNextPoint(this.props.curCoord);\r\n                if(!this.props.shapeCreator.isNext())\r\n                {\r\n                    this.props.shapes.push(this.props.shapeCreator.getShape());\r\n                    this.props.actions.refreshSnapMarkers();\r\n                    this.props.actions.refreshShapeManager();\r\n                    if(this.props.cyclicCreation){\r\n                        this.props.actions.createShape(this.props.shapeCreator.reset(this.props.boundedCircle));\r\n                    }else {\r\n                        this.props.actions.cancel();\r\n                    }\r\n                }\r\n            }\r\n            if(this.props.status===Status.FREE){\r\n                    this.props.shapeManager.toggleShapeSelected();\r\n                }\r\n            if(this.props.status===Status.PICK){\r\n                    this.props.picker.setNextPoint(this.props.curCoord);\r\n                    if(!this.props.picker.isNext())\r\n                    {\r\n                        this.props.actions.setPickedData(this.props.picker.getPickedData());\r\n                        this.props.actions.refreshSnapMarkers();\r\n                        this.props.actions.refreshShapeManager();\r\n                    }\r\n                }\r\n        }\r\n        this.props.actions.selectShapes(this.props.shapeManager.getSelectedShapes());\r\n        e.preventDefault();\r\n    }\r\n\r\n    resize(){\r\n        const style=window.getComputedStyle(document.querySelector('.screenContainer'));\r\n        const sw=Number.parseInt(style.width);\r\n        const sh=Number.parseInt(style.height);\r\n        this.props.actions.setDimensions(sw,sh,this.props.realWidth,this.props.topLeft);\r\n        this.canvas.width=sw;\r\n        this.canvas.height=sh;\r\n        this.props.actions.setBoundedCircle();\r\n    }\r\n    componentDidMount() {\r\n        this.canvas=document.querySelector(\"#canvas\");\r\n        this.ctx=this.canvas.getContext(\"2d\");\r\n        this.canvas.addEventListener(\"mousewheel\",this.mwheelHandle.bind(this),{passive:false})\r\n        //this.test();\r\n        this.paint(this.ctx);\r\n        window.addEventListener('load',()=>{\r\n            this.resize();\r\n            this.props.actions.centerToPoint(new Coord2D(0,0));\r\n            this.props.actions.repaint();\r\n            document.body.oncontextmenu=()=>false\r\n        });\r\n        window.addEventListener('resize',()=>{\r\n            this.resize();\r\n        })\r\n        window.addEventListener('keyup',(e)=>{\r\n            this.props.cursor.setAdditional({shiftKey:e.shiftKey,altKey:e.altKey});\r\n            this.props.actions.repaint();\r\n        });\r\n        window.addEventListener('keydown',(e)=>{\r\n            if(window.KEYDOWNHANDLE===false) return;\r\n            this.props.cursor.setAdditional({shiftKey:e.shiftKey,altKey:e.altKey});\r\n            this.props.keyDownHandler.forEach(key=>{\r\n                if(e.ctrlKey===key.ctrlKey&&e.shiftKey===key.shiftKey&&e.altKey===key.altKey&&e.keyCode===key.keyCode){\r\n                    if(this.props.actions[key.action]) this.props.actions[key.action](key.param);\r\n                    e.preventDefault();\r\n                }\r\n            })\r\n            this.props.actions.repaint();\r\n        })\r\n        \r\n    }\r\n\r\n    componentDidUpdate(){\r\n        this.props.shapeManager.setShapes(this.props.shapes,this.props.selectionType);\r\n        this.canvas.style.cursor='none'\r\n        this.paint(this.ctx);\r\n    }\r\n\r\n    render(){\r\n        return <canvas ref={this.refCanvas} id=\"canvas\" width={this.props.screenWidth} height={this.props.screenHeight}\r\n                onMouseMove={this.mmoveHandle.bind(this)}\r\n                onMouseDown={this.mdownHandle.bind(this)}\r\n                onMouseUp={this.mupHandle.bind(this)}\r\n                onMouseLeave={this.mleaveHandle.bind(this)}\r\n                onMouseEnter={this.menter.bind(this)}\r\n                onClick={this.clickHandle.bind(this)}\r\n            >\r\n            </canvas>\r\n    }\r\n}\r\n","import SLineShape from '../SLineShape';\r\nimport CircleShape from '../CircleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {SLine,Coord2D, Circle} from \"../../../utils/geometry\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class StraightLineCreator extends ShapeBuilder{\r\n    static caption=\"Straight line\";\r\n    constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"StraightLineCreator\"\r\n        this.points=new Array(2);\r\n        this.points[0]=new Coord2D();\r\n        this.points[1]=new Coord2D();\r\n        this.line=new SLine(0,0,0);\r\n        //this.boundedCircle=new Circle(new Coord2D(),0);\r\n        this.shape=new SLineShape(this.line);\r\n        this.style=style||new ShapeStyle(Color.BLACK,ShapeStyle.SOLID);\r\n        this.shape.setStyle(style);\r\n        this.helperShapes=[];\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new CircleShape(new Circle(this.points[0], this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[1], this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setColor(Color.POINT_MARKER);\r\n        this.helperShapes[1].setColor(Color.POINT_MARKER);\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0) {this.line=new SLine(...this.points);if(this.line.a===0&&this.line.b===0)this.legal=false;else this.legal=true;}\r\n        this.shape=new SLineShape(this.line);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    reset(){return new StraightLineCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}","import Geometry,{Coord2D,Circle, Intersection} from \"../../utils/geometry\";\r\nimport EndSnapMarker from './markers/EndSnapMarker';\r\nimport Shape from \"./Shape\";\r\nimport PointMarker from \"./markers/PointMarker\";\r\nimport PointPicker from \"./pickers/PointPicker\";\r\n\r\nexport default class RayLineShape extends Shape{\r\n    constructor(line){\r\n        super();\r\n        this.line=line;\r\n        this.model=line;\r\n        this.controlPoints=[\r\n            {point:this.line.origin,show:false,selected:false},\r\n            {point:this.line.directionPoint,show:false,selected:false}]\r\n        for(let cp of this.controlPoints)\r\n          cp.marker=new PointMarker(cp.point,false)\r\n    }\r\n    drawSelf(ctx,realRect, screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        if(this.p0===null||this.p1===null) return;\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x,this.p0.y);\r\n        ctx.lineTo(this.p1.x,this.p1.y);\r\n        ctx.stroke();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        let br=new Coord2D(realRect.topLeft.x+realRect.width,realRect.topLeft.y-realRect.height);\r\n        let c=Geometry.midPoint(realRect.topLeft,br);\r\n        let rad=Geometry.distance(realRect.topLeft,br)/2;\r\n        let circle=new Circle(c,rad);\r\n        let p=Intersection.CircleRLine(circle,this.line);\r\n        if(p!=null){\r\n            if(p.length===1){\r\n                let r=p[0];\r\n                p=new Array(2);\r\n                p[0]=this.line.origin;\r\n                p[1]=r;\r\n            }\r\n            this.p0=Geometry.realToScreen(p[0],realRect,screenRect);\r\n            this.p1=Geometry.realToScreen(p[1],realRect,screenRect);\r\n        }else{\r\n            this.p0=null;\r\n            this.p1=null;\r\n        }\r\n        if(this.activePoint) \r\n            this.activePointMarker=new PointMarker(this.activePoint)\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        list.push(new EndSnapMarker(this.line.origin));\r\n        return list;\r\n    }\r\n    setActivePoint(key){\r\n        super.setActivePoint();\r\n        if(key==='Origin') {this.controlPoints[0].selected=true;this.controlPoints[0].marker.setActive(true)}\r\n        if(key==='Direction') {this.controlPoints[1].selected=true;this.controlPoints[1].marker.setActive(true)}\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'RLine',regexp:/\\s*/});\r\n        prop.set('Origin',{value:{x:this.line.origin.x,y:this.line.origin.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('Direction',{value:{x:this.line.origin.x+this.line.vector.x,y:this.line.origin.y+this.line.vector.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'Origin':\r\n                this.line.origin.x=prop.value.x;\r\n                this.line.origin.y=prop.value.y;\r\n                this.line.directionPoint.x=this.line.origin.x+this.line.vector.x;\r\n                this.line.directionPoint.y=this.line.origin.y+this.line.vector.y;\r\n                this.controlPoints[0].point=this.line.origin;\r\n                this.controlPoints[1].point=this.line.directionPoint;\r\n                break;\r\n            case 'Direction':\r\n                this.line.vector.x=prop.value.x-this.line.origin.x;\r\n                this.line.vector.y=prop.value.y-this.line.origin.y;\r\n                this.line.directionPoint.x=this.line.origin.x+this.line.vector.x;\r\n                this.line.directionPoint.y=this.line.origin.y+this.line.vector.y;\r\n                this.controlPoints[1].point=this.line.directionPoint;\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        return Geometry.PointToRLineDistance(point,this.line);\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        const full=false;\r\n        const cross=Intersection.RectangleRLine(topLeft,bottomRight,this.line).length>0;\r\n        return {cross,full};    \r\n    }\r\n    toString(){\r\n        return `Ray origin (${this.line.origin.x},${this.line.origin.y}) vector(${this.line.vector.x},${this.line.vector.y})`;\r\n    }\r\n\r\n}","import RayLineShape from '../RayLineShape';\r\nimport CircleShape from '../CircleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {RLine, Coord2D, Circle} from \"../../../utils/geometry\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class RayLineCreator extends ShapeBuilder{\r\n    static caption=\"Ray line\";\r\n    constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"RayLineCreator\"\r\n        this.line=new RLine(new Coord2D(),new Coord2D());\r\n        this.points=new Array(2);\r\n        this.shape=new RayLineShape(this.line);\r\n        this.style=style||new ShapeStyle(Color.BLACK,ShapeStyle.SOLID);\r\n        this.shape.setStyle(style);\r\n        this.helperShapes=[];\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new CircleShape(new Circle(this.points[0], this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[1], this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setColor(Color.POINT_MARKER);\r\n        this.helperShapes[1].setColor(Color.POINT_MARKER);\r\n    }\r\n\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0) {this.line=new RLine(...this.points);if(this.line.vector.x===0&&this.line.vector.y===0)this.legal=false;else this.legal=true}\r\n        this.shape=new RayLineShape(this.line,this.boundedCircle);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    reset(){return new RayLineCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}","import LineShape from '../LineShape';\r\nimport CircleShape from '../CircleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {Line,Coord2D,Circle} from \"../../../utils/geometry\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class LineCreator extends ShapeBuilder{\r\n    static caption=\"Segment line\";\r\n    constructor(style=new ShapeStyle(Color.BLACK,ShapeStyle.SOLID),boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"LineCreator\"\r\n        this.line=new Line(new Coord2D(),new Coord2D());\r\n        this.points=[new Coord2D(),new Coord2D()];\r\n        this.shape=new LineShape(this.line);\r\n        this.style=style;\r\n        this.shape.setStyle(style);\r\n        this.helperShapes=[];\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0)this.line=new Line(this.points[0],this.points[1]);\r\n        this.shape=new LineShape(this.line);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setColor(Color.POINT_MARKER);\r\n        this.helperShapes[1].setColor(Color.POINT_MARKER);\r\n    }\r\n    reset(){return new LineCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}\r\n","import {Circle,Line,Coord2D} from \"../../../utils/geometry\";\r\nimport CircleShape from \"../CircleShape\";\r\nimport LineShape from \"../LineShape\";\r\nimport Geometry from \"../../../utils/geometry\";\r\nimport ShapeStyle from \"../ShapeStyle\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from \"./ShapeBuilder\";\r\nexport default class CircleCRCreator extends ShapeBuilder{\r\n    static caption=\"Circle by center\";\r\n    constructor(style=new ShapeStyle(Color.BLACK,ShapeStyle.SOLID),boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"CircleCRCreator\"\r\n        this.points=new Array(2);\r\n        this.circle=new Circle(new Coord2D(),0);\r\n        this.helperShapes = [];\r\n        this.shape=new CircleShape(this.circle);\r\n        this.radiusLine=new Line(this.circle.center,this.circle.center);\r\n        this.helperShapes.push(new LineShape(this.radiusLine));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.style=style;\r\n        this.shape.setStyle(style);\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.GRAY,ShapeStyle.DASH));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n    }\r\n\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0)this.circle=new Circle(this.points[0], Geometry.distance(this.points[0],this.points[this.i]));\r\n        this.radiusLine=new Line(this.points[0],this.points[this.i]);\r\n        this.shape=new CircleShape(this.circle);\r\n        this.helperShapes[0]=new LineShape(this.radiusLine);\r\n        this.shape.setStyle(this.style);\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.GRAY,ShapeStyle.DASH));\r\n        this.setControlPoints();\r\n    }\r\n\r\n    setControlPoints(){\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius*Screen.MARKER_SIZE));\r\n        this.helperShapes[2]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius*Screen.MARKER_SIZE));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));                     \r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n    }\r\n    reset(){return new CircleCRCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}","import {Circle,Line,Coord2D} from \"../../../utils/geometry\";\r\nimport CircleShape from \"../CircleShape\";\r\nimport LineShape from \"../LineShape\";\r\nimport Geometry from \"../../../utils/geometry\";\r\nimport ShapeStyle from \"../ShapeStyle\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from \"./ShapeBuilder\";\r\nexport default class Circle2PCreator extends ShapeBuilder{\r\n     static caption=\"Circle by 2 points\";\r\n     constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"Circle2PCreator\"\r\n        this.style=style;\r\n        this.circle=new Circle(new Coord2D(),0);\r\n        this.shape=new CircleShape(this.circle);\r\n        this.shape.setStyle(style);\r\n        this.helperShapes = [];\r\n        this.diamLine=new Line(this.circle.center,this.circle.center);\r\n        this.helperShapes.push(new LineShape(this.diamLine));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.gray,ShapeStyle.DASH));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.blue,ShapeStyle.SOLID));\r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.blue,ShapeStyle.SOLID));\r\n        this.points=new Array(2);\r\n    }\r\n    \r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0) this.circle=new Circle(Geometry.midPoint(this.points[0],this.points[1]),Geometry.distance(this.points[0],this.points[1])/2);\r\n        this.diamLine =new Line(this.points[0],this.points[this.i]);\r\n        this.shape=new CircleShape(this.circle);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new LineShape(this.diamLine);\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[2]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.GRAY,ShapeStyle.DASH));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n    }\r\n    reset(){return new Circle2PCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n    \r\n}","import {Circle,Triangle,Coord2D} from \"../../../utils/geometry\";\r\nimport CircleShape from \"../CircleShape\";\r\nimport TriangleShape from \"../TriangleShape\";\r\nimport ShapeStyle from \"../ShapeStyle\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from \"./ShapeBuilder\";\r\nexport default class Circle3PCreator extends ShapeBuilder{\r\n    static caption=\"Circle by 3 points\";\r\n    constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"Circle3PCreator\"\r\n        this.style=style;\r\n        this.circle=new Circle(new Coord2D(),0);\r\n        this.shape=new CircleShape(this.circle);\r\n        this.shape.setStyle(style);\r\n        this.helperShapes = [];\r\n        this.triangle =new Triangle();\r\n        this.helperShapes.push(new TriangleShape(this.triangle));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.gray,ShapeStyle.DASH));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n        this.helperShapes[3].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n        this.points=new Array(3);\r\n    }\r\n\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i<2)this.points[2]=this.points[1];\r\n        this.triangle=new Triangle(this.points);\r\n        this.circle=this.triangle.getOuterCircle();\r\n        this.shape=new CircleShape(this.circle);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new TriangleShape(new Triangle(this.points));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[2]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[3]=new CircleShape(new Circle(this.points[2],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.GRAY,ShapeStyle.DASH));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n        this.helperShapes[3].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n    }\r\n    reset(){return new Circle3PCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n    refresh(boundedCircle){\r\n        this.boundedCircle=boundedCircle;\r\n        if(this.points[this.i]!=null) this.setControlPoints();\r\n    }\r\n\r\n}","import TriangleShape from '../TriangleShape';\r\nimport CircleShape from '../CircleShape';\r\nimport {Triangle,Coord2D,Circle} from \"../../../utils/geometry\";\r\nimport {Color} from '../../colors';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class TriangleCreator extends ShapeBuilder{\r\n     static caption=\"Triangle\";\r\n     constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"TriangleCreator\"\r\n        this.style=style;\r\n        this.triangle=new Triangle();\r\n        this.shape=new TriangleShape(this.triangle);\r\n        this.helperShapes=[];\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.shape.setStyle(style);\r\n        this.points=new Array(3);\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i<2)this.points[2]=this.points[1];\r\n        this.triangle=new Triangle(this.points);\r\n        this.shape=new TriangleShape(this.triangle);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[2]=new CircleShape(new Circle(this.points[2],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setColor(Color.POINT_MARKER);\r\n        this.helperShapes[1].setColor(Color.POINT_MARKER);\r\n        this.helperShapes[2].setColor(Color.POINT_MARKER);\r\n    }\r\n    reset(){return new TriangleCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}","import {Color} from '../../colors';\r\nimport {Rectangle,Coord2D,Circle} from '../../../utils/geometry';\r\nimport RectangleShape from '../RectangleShape';\r\nimport CircleShape from '../CircleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class RectangleCreator extends ShapeBuilder{\r\n    static caption=\"Rectangle\";\r\n    rectangle=new Rectangle();\r\n    points=new Array(2);\r\n    constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"RectangleCreator\"\r\n        this.style=style;\r\n        this.shape=new RectangleShape(this.rectangle);\r\n        this.shape.setStyle(style);\r\n        this.helperShapes = [];\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0)this.rectangle=new Rectangle(this.points[0], this.points[1]);\r\n        this.shape=new RectangleShape(this.rectangle);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius*Screen.MARKER_SIZE));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius*Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n    }\r\n    reset(){return new RectangleCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport '../Graph.css';\r\nimport ToolButtonGroup from \"./ToolButtonGroup\";\r\nimport StraightLineCreator from \"./shapes/shapecreators/StraightLineCreator\";\r\nimport RayLineCreator from \"./shapes/shapecreators/RayLineCreator\";\r\nimport LineCreator from \"./shapes/shapecreators/LineCreator\";\r\nimport CircleCRCreator from \"./shapes/shapecreators/CircleCRCreator\";\r\nimport Circle2PCreator from \"./shapes/shapecreators/Circle2PCreator\";\r\nimport Circle3PCreator from \"./shapes/shapecreators/Circle3PCreator\";\r\nimport TriangleCreator from \"./shapes/shapecreators/TriangleCreator\";\r\nimport RectangleCreator from \"./shapes/shapecreators/RectangleCreator\";\r\nimport {setActiveCreateButton} from \"../actions/ComponentActions\";\r\nimport {ScreenActions} from \"../actions/ScreenActions\";\r\nimport ShapeStyle from './shapes/ShapeStyle';\r\nimport { Color } from './colors';\r\n\r\nclass CreateToolBar extends React.Component{\r\n    onClick({pressed,params}){\r\n        if(!pressed) {\r\n            this.setButtonId(params.id);\r\n            this.props.createNewShape(new params.creator(new ShapeStyle(Color.BLACK, ShapeStyle.SOLID),this.props.boundedCircle));\r\n        }\r\n        else {\r\n           this.setButtonId(\"\");\r\n           this.props.cancel();\r\n        }\r\n    }\r\n    setButtonId(id){\r\n        this.props.setActiveCreateButton(id);\r\n    }\r\n    render(){\r\n        const cap=this.props.captions.create;\r\n        return <div className={\"toolBar\"} id=\"createToolBar\">\r\n                 <div className={\"toolBarHeader\"}>\r\n                    <span className={\"toolBarCaption noselect\"}>{cap.createToolBar}</span>\r\n                </div>\r\n                <hr/>\r\n                <div className=\"checkbox\">\r\n                    <input type=\"checkbox\" id=\"cyclic\" onChange={(e)=>{this.props.setCyclicFlag(e.target.checked)}}/>\r\n                    <label htmlFor=\"cyclic\">{cap.createCheckBox}</label>\r\n                </div>\r\n            <ToolButtonGroup \r\n                                buttons={[{title:cap.createSLine2Points,id:\"SLine\",params:{creator:StraightLineCreator}},\r\n                                         {title:cap.createRayLine2Points,id:\"RLine\",params:{creator:RayLineCreator}},\r\n                                         {title:cap.createSegmentLine2Points,id:\"Line\",params:{creator:LineCreator}}\r\n                                            ]}\r\n                                activeButton={this.props.activeButton}\r\n                                onClick={this.onClick.bind(this)}\r\n                                />\r\n            <ToolButtonGroup \r\n                                buttons={[{title:cap.createCircleCenter,id:\"CircleRad\",params:{creator:CircleCRCreator}},\r\n                                          {title:cap.createCircle2P,id:\"Circle2p\",params:{creator:Circle2PCreator}},\r\n                                          {title:cap.createCircle3P,id:\"Circle3p\",params:{creator:Circle3PCreator}}\r\n                                            ]}\r\n                                activeButton={this.props.activeButton}\r\n                                onClick={this.onClick.bind(this)}\r\n                                />\r\n            <ToolButtonGroup \r\n                                buttons={[{title:cap.createRect,id:\"Rect2p\",params:{creator:RectangleCreator}},\r\n                                          {title:cap.createRectCenter,id:\"RectCenter\",params:{creator:null,dev:cap.development}}    \r\n                                            ]}\r\n                                activeButton={this.props.activeButton}\r\n                                onClick={this.onClick.bind(this)}            \r\n                                />\r\n            <ToolButtonGroup\r\n                buttons={[{title:cap.createTriangle,id:\"Triangle\",params:{creator:TriangleCreator}},\r\n                        {title:cap.createTriangleInscribed,id:\"TriangleInscribed\",params:{creator:null,dev:cap.development}},\r\n                        {title:cap.createTriangleDescribed,id:\"TriangleDescribed\",params:{creator:null,dev:cap.development}}\r\n                ]}\r\n                activeButton={this.props.activeButton}\r\n                onClick={this.onClick.bind(this)}\r\n            />\r\n            <ToolButtonGroup\r\n                buttons={[{title:cap.createParabola,id:\"Parabola\",params:{creator:null,dev:cap.development}},\r\n                        {title:cap.createHyperbola,id:\"Hyperbola\",params:{creator:null,dev:cap.development}},\r\n                ]}\r\n                activeButton={this.props.activeButton}\r\n                onClick={this.onClick.bind(this)}\r\n            />\r\n            <ToolButtonGroup\r\n                buttons={[{title:cap.createFunction,id:\"Function\",params:{creator:null,dev:cap.development}}\r\n                ]}\r\n                activeButton={this.props.activeButton}\r\n                onClick={this.onClick.bind(this)}\r\n            />\r\n\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (store,ownProps) => {\r\n\r\n    return {\r\n        boundedCircle:store.screen.boundedCircle,\r\n        context:store.screen.context,\r\n        captions:store.options.captions,\r\n        activeButton:store.components.activeCreateButton,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        cancel:()=>dispatch(ScreenActions.cancel()),\r\n        createNewShape:(creator)=>dispatch(ScreenActions.createNewShape(creator)),\r\n        setActiveCreateButton:id=>dispatch(setActiveCreateButton(id)),\r\n        setScreenStatus:(status,params)=>dispatch(ScreenActions.setScreenStatus(status,params)),\r\n        setCyclicFlag:(flag)=>dispatch(ScreenActions.setCyclicFlag(flag)),\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(CreateToolBar)","import React from \"react\";\r\n\r\nexport default class OptionTogglePic extends React.Component{\r\n\r\n    onclick(){\r\n        if(!this.props.pressed) {\r\n                this.props.setSnap(this.props.snapClass,true);\r\n                this.props.setActiveSnapButton(this.props.id);\r\n            }\r\n            else {\r\n                this.props.setSnap(this.props.snapClass,false);\r\n                this.props.clearActiveSnapButton(this.props.id);\r\n            }\r\n    }\r\n    render(){\r\n        let cls=!this.props.pressed?\"toolButtonUp\":\"toolButtonDown\";\r\n        cls=cls+\" toolButton snapButton\";\r\n        return <div id={this.props.id}\r\n                    className={cls}\r\n                       onClick={this.onclick.bind(this)}\r\n                    title={this.props.title}\r\n\r\n                    >\r\n\r\n        </div>\r\n    }\r\n}","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport '../Graph.css';\r\nimport {ScreenActions} from '../actions/ScreenActions';\r\nimport {setActiveSnapButton,clearActiveSnapButton} from '../actions/ComponentActions';\r\nimport OptionTogglePic from './OptionTogglePic';\r\nimport EndSnapMarker from \"./shapes/markers/EndSnapMarker\";\r\nimport MiddleSnapMarker from \"./shapes/markers/MiddleSnapMarker\";\r\nimport CenterSnapMarker from \"./shapes/markers/CenterSnapMarker\";\r\nclass SnapToggleBar extends React.Component{\r\n    render(){\r\n        let cap=this.props.captions.snap;\r\n        return <div className={\"toolBar snapToolBar\"}>\r\n                               \r\n        <OptionTogglePic title={cap.snapGridPoints}\r\n                           id={\"grid\"}\r\n                           setSnap={this.props.setSnap}\r\n                           snapClass={\"grid\"}\r\n                           setActiveSnapButton={this.props.setActiveSnapButton}\r\n                           clearActiveSnapButton={this.props.clearActiveSnapButton}\r\n                           pressed={this.props.activeButtons.has(\"grid\")}\r\n        />\r\n        <OptionTogglePic title={cap.snapEndPoints}\r\n                             id={\"endpoint\"}\r\n                             setSnap={this.props.setSnap}\r\n                             snapClass={EndSnapMarker}\r\n                             setActiveSnapButton={this.props.setActiveSnapButton}\r\n                             clearActiveSnapButton={this.props.clearActiveSnapButton}\r\n                             pressed={this.props.activeButtons.has(\"endpoint\")}\r\n            />\r\n         <OptionTogglePic title={cap.snapMiddlePoints}\r\n                             id={\"middlepoint\"}\r\n                             setSnap={this.props.setSnap}\r\n                             snapClass={MiddleSnapMarker}\r\n                             setActiveSnapButton={this.props.setActiveSnapButton}\r\n                             clearActiveSnapButton={this.props.clearActiveSnapButton}\r\n                             pressed={this.props.activeButtons.has(\"middlepoint\")}\r\n            />\r\n        <OptionTogglePic title={cap.snapCenterPoints}\r\n                             id={\"centerpoint\"}\r\n                             setSnap={this.props.setSnap}\r\n                             snapClass={CenterSnapMarker}\r\n                             setActiveSnapButton={this.props.setActiveSnapButton}\r\n                             clearActiveSnapButton={this.props.clearActiveSnapButton}\r\n                             pressed={this.props.activeButtons.has(\"centerpoint\")}\r\n            />\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = store => {\r\n\r\n    return {\r\n            screen: store.screen,\r\n            captions:store.options.captions,\r\n            activeButtons:store.components.activeSnapButtons,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setSnap: (snapClass,snap)=>dispatch(ScreenActions.setSnap(snapClass,snap)),\r\n        setActiveSnapButton: id=>dispatch(setActiveSnapButton(id)),\r\n        clearActiveSnapButton: id=>dispatch(clearActiveSnapButton(id)),\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(SnapToggleBar)","import React from 'react';\r\nimport '../Buttons.css';\r\nimport { connect } from 'react-redux';\r\n\r\nclass PickButton extends React.Component{\r\n    render(){\r\n        const style=this.props.active?\"pickButtonDown\":\"pickButtonUp\"\r\n        return <div title={this.props.captions.buttons.pick} onClick={this.props.onClick} className={\"pickButton \"+style}></div>\r\n    }\r\n}\r\nconst mapStateToProps=(store)=>({captions:store.options.captions})\r\nexport default connect(mapStateToProps)(PickButton)","import \"../Graph.css\";\r\nimport React from \"react\";\r\nimport PickButton from \"./PickButton\";\r\nimport { Status } from \"../reducers/screen\";\r\nimport { connect } from \"react-redux\";\r\nimport { ScreenActions } from \"../actions/ScreenActions\";\r\n\r\nclass PropertyField extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={value:props.value.toFixed(4),correct:true,prevValue:props.value.toFixed(4),originValue:props.value.toFixed(4)}\r\n    }\r\n    change(e){\r\n        let v=e.target.value;\r\n        const r=this.props.regexp;\r\n        const corr=v.match(r)!=null;\r\n        if(corr)this.setState({value:v,prevValue:v}); \r\n          else\r\n          this.setState({value:v===''?'':this.state.prevValue})\r\n    }\r\n    blur(){\r\n        this.setState({value:this.state.originValue})\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    onKeyPress(e){\r\n        if(e.charCode===13){\r\n            let v=e.target.value;\r\n            v=v===''?\"0\":v;\r\n            const r=this.props.regexp;\r\n            if(v.match(r)!==null) {\r\n                const n=Number.parseFloat(v);\r\n                this.props.setProperty(this.props.propKey,n);\r\n                this.setState({value:n,correct:true,prevValue:n});\r\n                return;\r\n                }\r\n            this.setState({value:this.state.prevValue})\r\n        }\r\n       return false;\r\n        \r\n    }\r\n    static getDerivedStateFromProps(nextProps,prevState){\r\n        let value=(nextProps.status===Status.PICK_END&&nextProps.id===nextProps.editId)?nextProps.pickedValue:prevState.value;\r\n        value=(+value).toFixed(4)\r\n        return {...nextProps,value:value,originValue:nextProps.value,correct:true};\r\n    }\r\n    componentDidUpdate(){\r\n        if(this.props.status===Status.PICK_END&&this.props.propKey===this.props.editId) {\r\n           this.props.setProperty(this.props.propKey,+this.state.value)\r\n           this.props.cancel();\r\n        }\r\n    }\r\n    render(){\r\n        return <div className={\"noselect\"}>\r\n            <div style={{display:'flex',flexDirection:'row',alignContent:'center'}}>\r\n            {this.props.label}\r\n            <input style={!this.state.correct?{backgroundColor:'red'}:{}}\r\n                className='propertyField'\r\n                type=\"text\" value={this.state.value} \r\n                id={this.props.label}\r\n                onChange={this.change.bind(this)}\r\n                onKeyPress={this.onKeyPress.bind(this)}\r\n                onKeyDown={(e)=>{e.stopPropagation()}}\r\n                onBlur={this.blur.bind(this)}\r\n                onFocus={()=>{window.KEYDOWNHANDLE=false}}\r\n                />\r\n            {this.props.picker?<PickButton\r\n                active={this.props.status===Status.PICK&&this.props.id===this.props.editId} \r\n                onClick={()=>{\r\n                    if(this.props.status===Status.PICK&&this.props.id===this.props.editId){this.props.cancel();return;}   \r\n                    this.props.setPickedData(this.state.value);\r\n                    this.props.startPicking(this.props.id,new this.props.picker());\r\n                 }}></PickButton>:<></>}\r\n        </div>\r\n        </div>\r\n    }\r\n}\r\nconst mapStateToProps=(store)=>{\r\n    return {\r\n        pickedValue:store.screen.pickedData.data,\r\n        editId:store.screen.pickedData.editId,\r\n        status:store.screen.status,\r\n    }\r\n}\r\nconst mapDispatchToProps=(dispatch)=>{\r\n    return {\r\n        startPicking:(id,picker)=>dispatch(ScreenActions.startPicking(id,picker)),\r\n        setPickedData:data=>dispatch(ScreenActions.setPickedData(data)),\r\n        cancel:()=>dispatch(ScreenActions.cancel()),\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(PropertyField)","import \"../Graph.css\";\r\nimport React from \"react\";\r\nimport {connect} from 'react-redux';\r\nimport { Status } from \"../reducers/screen\";\r\nimport { ScreenActions } from \"../actions/ScreenActions\";\r\nimport PickButton from \"./PickButton\";\r\n\r\nclass PropertyMultField extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        const value={x:props.value.x,y:props.value.y}\r\n        this.state={value:{x:value.x,y:value.y},correct:true,prevValue:{x:value.x,y:value.y},originValue:{x:value.x,y:value.y}}\r\n    }\r\n    change(e){\r\n        let v={x:this.state.value.x,y:this.state.value.y};\r\n        v[e.target.id]=e.target.value;\r\n        const r=this.props.regexp;\r\n        const corr=v[e.target.id].match(r)!=null&&v[e.target.id]!==\"\";\r\n        if(corr)this.setState({value:{x:v.x,y:v.y},prevValue:{x:v.x,y:v.y}}); \r\n          else{\r\n          const value=this.state.prevValue\r\n          if(v[e.target.id]==='') value[e.target.id]='';\r\n          this.setState({value:value})}\r\n    }\r\n    blur(){\r\n        //this.props.setActivePoint('');\r\n        this.setState({value:this.state.originValue})\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    focus(){\r\n        this.props.setActivePoint(this.props.propKey);\r\n        window.KEYDOWNHANDLE=false;\r\n    }\r\n    onKeyPress(e){\r\n        if(e.charCode===13){\r\n            let v=e.target.value;\r\n            v=v===''?\"0\":v;\r\n            const r=this.props.regexp;\r\n            if(v.match(r)!==null) {\r\n                const n=Number.parseFloat(v);\r\n                const value=this.state.value;\r\n                value[e.target.id]=n;\r\n                this.props.setProperty(this.props.propKey,value);\r\n                this.setState({value:value,correct:true,prevValue:value});\r\n                return;\r\n                }\r\n            this.setState({value:this.state.prevValue})\r\n        }\r\n       return false;\r\n        \r\n    }\r\n    static getDerivedStateFromProps(nextProps,prevState){\r\n            let value=(nextProps.status===Status.PICK_END&&nextProps.id===nextProps.editId)?nextProps.pickedValue:prevState.value;\r\n            value.x=+value.x.toFixed(4)\r\n            value.y=+value.y.toFixed(4)\r\n            return {...nextProps,value:value,originValue:nextProps.value,correct:true};\r\n    }\r\n    componentDidUpdate(){\r\n        if(this.props.status===Status.PICK_END&&this.props.propKey===this.props.editId) {\r\n           this.props.setProperty(this.props.propKey,this.state.value)\r\n           this.props.cancel();\r\n        }\r\n    }\r\n    render(){\r\n        const value=this.state.value;\r\n        return <div className={\"noselect\"}>\r\n            <div style={{display:'flex',flexDirection:'row',alignContent:'center'}}>\r\n            {this.props.label}\r\n            <input style={!this.state.correct?{backgroundColor:'red'}:{}}\r\n                className='propertyMultField'\r\n                type=\"text\" value={value.x} \r\n                id='x'\r\n                onChange={this.change.bind(this)}\r\n                onKeyPress={this.onKeyPress.bind(this)}\r\n                onKeyDown={(e)=>{e.stopPropagation()}}\r\n                onBlur={this.blur.bind(this)}\r\n                onFocus={this.focus.bind(this)}\r\n                />\r\n            <input style={!this.state.correct?{backgroundColor:'red'}:{}}\r\n                className='propertyMultField'\r\n                type=\"text\" value={value.y} \r\n                id='y'\r\n                onChange={this.change.bind(this)}\r\n                onKeyPress={this.onKeyPress.bind(this)}\r\n                onKeyDown={(e)=>{e.stopPropagation()}}\r\n                onBlur={this.blur.bind(this)}\r\n                onFocus={this.focus.bind(this)}\r\n                />\r\n             {this.props.picker?<PickButton \r\n                active={this.props.status===Status.PICK&&this.props.id===this.props.editId} \r\n                onClick={()=>{\r\n                    if(this.props.status===Status.PICK&&this.props.id===this.props.editId){this.props.cancel();return;}   \r\n                    this.props.setPickedData(this.state.value);\r\n                    this.props.startPicking(this.props.id,new this.props.picker());\r\n                    this.props.setActivePoint(this.props.propKey);\r\n                        \r\n                 }}></PickButton>:<></>}\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\nconst mapStateToProps=(store)=>{\r\n    return {\r\n        pickedValue:store.screen.pickedData.data,\r\n        editId:store.screen.pickedData.editId,\r\n        status:store.screen.status,\r\n    }\r\n}\r\nconst mapDispatchToProps=(dispatch)=>{\r\n    return {\r\n        startPicking:(id,picker)=>dispatch(ScreenActions.startPicking(id,picker)),\r\n        setPickedData:data=>dispatch(ScreenActions.setPickedData(data)),\r\n        cancel:()=>dispatch(ScreenActions.cancel()),\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(PropertyMultField)","import \"../Graph.css\";\r\nimport React from \"react\";\r\n\r\nclass PropertyEditButtonsBar extends React.Component{\r\n\r\n    onClick(){\r\n        this.props.deleteConfirm();\r\n    }\r\n\r\n    render(){\r\n        return <div className=\"propEditBar\">\r\n            <button className=\"deleteButton\" onClick={this.onClick.bind(this)}>{this.props.caption}</button>\r\n            \r\n        </div>\r\n    }\r\n}\r\nexport default PropertyEditButtonsBar","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport '../Graph.css';\r\nimport {setProperty} from '../actions/ShapeActions'\r\nimport PropertyField from './PropertyField';\r\nimport PropertyMultField from './PropertyMultField';\r\nimport PropertyEditButtonsBar from './PropertyEditButtonsBar';\r\nimport { ScreenActions } from '../actions/ScreenActions';\r\nclass PropertyEditorBar extends React.Component{\r\n    prop;\r\n    shape;\r\n    setProperty(k,v){\r\n        this.props.setProperty({key:k,value:v});\r\n        }\r\n    setActivePoint(key){\r\n        this.shape.setActivePoint(key);\r\n        this.props.repaint();\r\n    }\r\n    render(){\r\n        const shapes=this.props.screen.selectedShapes;\r\n        let propElements=[];\r\n        let shapeTitle;\r\n        if(shapes.length===1){\r\n            this.shape=shapes[0];\r\n            this.prop=shapes[0].getProperties();\r\n            let shapeType=this.prop.get('Title').value;\r\n            shapeTitle=this.props.captions.shapes[shapeType].Title;\r\n            for(let key of this.prop.keys()){\r\n                if(key!=='Title')propElements.push(typeof this.prop.get(key).value==='object'?<PropertyMultField\r\n                                                     key={key}\r\n                                                     propKey={key}\r\n                                                     id={key}\r\n                                                     label={this.props.captions.shapes[shapeType][key]} \r\n                                                     value={this.prop.get(key).value}\r\n                                                     regexp={this.prop.get(key).regexp}\r\n                                                     picker={this.prop.get(key).picker}\r\n                                                     setProperty={this.setProperty.bind(this)}\r\n                                                     setActivePoint={this.setActivePoint.bind(this)}  />:\r\n                                                     <PropertyField \r\n                                                     key={key}\r\n                                                     propKey={key}\r\n                                                     id={key}\r\n                                                     label={this.props.captions.shapes[shapeType][key]} \r\n                                                     value={this.prop.get(key).value}\r\n                                                     regexp={this.prop.get(key).regexp}\r\n                                                     picker={this.prop.get(key).picker}\r\n                                                     setProperty={this.setProperty.bind(this)}  />)\r\n            }\r\n        }\r\n        if(shapes.length>1){\r\n            propElements=shapes.length+this.props.captions.NShapesSelected;\r\n        }    \r\n        if(shapes.length===0) propElements=this.props.captions.noShapesSelected;\r\n        return <div className={\"toolBar propertiesBar noselect\"}>\r\n            <div className='toolBarHeader noselect'>{this.props.captions.propBar}</div>\r\n            <hr/>\r\n            {shapeTitle?shapeTitle:\"\"}\r\n            <div className='propertyGroup'>\r\n            {propElements}\r\n            </div>\r\n            {this.props.screen.selectedShapes.length>0?<PropertyEditButtonsBar\r\n                                    deleteConfirm={this.props.deleteConfirm.bind(null,true)}\r\n                                    caption={this.props.captions.deleteButton}/>:<></>}\r\n                                    \r\n        \r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = store => {\r\n\r\n    return {\r\n            screen: store.screen,\r\n            captions:store.options.captions,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setProperty:(prop)=>dispatch(setProperty(prop)),\r\n        deleteConfirm:()=>dispatch(ScreenActions.deleteConfirm()),\r\n        repaint:()=>dispatch(ScreenActions.repaint()),\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(PropertyEditorBar)","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport '../Graph.css';\r\nimport {ScreenActions} from \"../actions/ScreenActions\";\r\nimport ToolButtonGroup from './ToolButtonGroup';\r\n\r\n\r\nclass SelectionToolBar extends React.Component{\r\n    onClick({params}){\r\n            this.props.setSelectionType(params.id);\r\n    }\r\n    render(){\r\n        const cap=this.props.captions.modify;\r\n        return <div className={\"toolBar\"} id=\"selectionToolBar\">\r\n                 \r\n                <ToolButtonGroup\r\n                                buttons={[{title:cap.crossSelect,id:\"crossSelect\"},\r\n                                         {title:cap.fullSelect,id:\"fullSelect\"},\r\n                                            ]}\r\n                                activeButton={this.props.activeButton}\r\n                                onClick={this.onClick.bind(this)}\r\n                                />\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = store => {\r\n\r\n    return {\r\n        context:store.screen.context,\r\n        captions:store.options.captions,\r\n        activeButton:store.screen.selectionType,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setSelectionType:id=>dispatch(ScreenActions.setSelectionType(id)),\r\n        setScreenStatus:(status,param)=>dispatch(ScreenActions.setScreenStatus(status,param)),\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(SelectionToolBar)","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport '../Graph.css';\r\nimport {ScreenActions} from \"../actions/ScreenActions\";\r\nimport {setLanguage} from \"../actions/AppActions\";\r\nimport CreateToolBar from \"./CreateToolBar\";\r\nimport Screen from \"./Screen\";\r\nimport SnapToggleBar from './SnapToggleBar';\r\nimport PropertyEditorBar from './PropertyEditorBar';\r\nimport SelectionToolBar from './SelectionToolBar';\r\nimport { createShape } from '../actions/ShapeActions';\r\n\r\nclass MainContainer extends React.Component{\r\n    render(){\r\n        return <div className={'mainContainer'}>\r\n        <div className={'screenContainer'}>\r\n            <Screen style={{borderWidth:1+'px',borderStyle:\"solid\"}}\r\n                actions={this.props.actions}\r\n                keyDownHandler={this.props.keyDownHandler}\r\n                {...this.props.screen}\r\n                />\r\n                </div>\r\n        <CreateToolBar/>\r\n        <SelectionToolBar/>\r\n        <PropertyEditorBar/>\r\n        <SnapToggleBar/>\r\n        \r\n    </div>\r\n    }\r\n}\r\nconst mapStateToProps = store => {\r\n    return {\r\n            screen: {...store.screen,captions:store.options.captions},\r\n            keyDownHandler:store.options.keyDownHandler,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {actions:{\r\n        addShape:(shape)=>dispatch(ScreenActions.addShape(shape)),\r\n        cancel:()=>dispatch(ScreenActions.cancel()),\r\n        cancelSelection:()=>dispatch(ScreenActions.cancelSelection()),\r\n        centerToPoint:(p)=>dispatch(ScreenActions.centerToPoint(p)),\r\n        createShape:(creator)=>dispatch(createShape(creator)),\r\n        deleteConfirm:()=>dispatch(ScreenActions.deleteConfirm()),\r\n        refreshShapeManager:()=>dispatch(ScreenActions.refreshShapeManager()),\r\n        refreshSnapMarkers:()=>dispatch(ScreenActions.refreshSnapMarkers()),\r\n        repaint:()=>dispatch(ScreenActions.repaint()),\r\n        selectAll:()=>dispatch(ScreenActions.selectAll()),\r\n        selectShapes:(selectedShapes)=>dispatch(ScreenActions.selectShapes(selectedShapes)),\r\n        setBoundedCircle:()=>dispatch(ScreenActions.setBoundedCircle()),\r\n        setCurCoord:(coord,screenPoint)=>dispatch(ScreenActions.setCurCoord(coord,screenPoint)),\r\n        setDimensions:(width,height,realWidth,topLeft)=>dispatch(ScreenActions.setDimensions(width,height,realWidth,topLeft)),\r\n        setLanguage:captions=>dispatch(setLanguage(captions)),\r\n        setPickedData:data=>dispatch(ScreenActions.setPickedData(data)),\r\n        setPrevCoord:(coord)=>dispatch(ScreenActions.setPrevCoord(coord)),\r\n        setPrevStatus:()=>dispatch(ScreenActions.setPrevStatus()),\r\n        setRatio:(ratio)=>dispatch(ScreenActions.setRatio(ratio)),\r\n        setRealWidth:(width)=>dispatch(ScreenActions.setRealWidth(width)),\r\n        setScale:(scale,anchor)=>dispatch(ScreenActions.setScale(scale,anchor)),\r\n        setScreenStatus:(status,params)=>dispatch(ScreenActions.setScreenStatus(status,params)),\r\n        setTopLeft:(p)=>dispatch(ScreenActions.setTopLeft(p)),\r\n    }}\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(MainContainer)","import React from 'react';\r\nimport '../Graph.css';\r\nimport {connect} from 'react-redux';\r\n\r\nclass MySelf extends React.Component{\r\n\r\n    render(){\r\n        return <div style={{textAlign: \"center\"}}>\r\n        <span   ref={this.ref2}\r\n                className={\"noselect\"}\r\n                style={{position:\"relative\",whiteSpace:\"pre\",fontSize:\"small\"}}\r\n                >\r\n            <hr/>\r\n            {`${this.props.cap.name}          ${this.props.cap.email}`}\r\n            <hr/>\r\n        </span>\r\n        </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        cap:store.options.captions.about\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(MySelf);","import React,{Fragment} from 'react';\r\nimport '../Graph.css';\r\nimport '../Buttons.css';\r\nimport {showHelp} from '../actions/AppActions';\r\nimport { connect } from 'react-redux';\r\nimport MySelf from './MySelf';\r\n\r\nclass HelpSection extends React.Component{\r\n    constructor(){\r\n        super();\r\n        this.ref=React.createRef()\r\n        this.state={done:false}\r\n    }\r\n    \r\n    animate=()=>{\r\n        if(this.w<this.maxw) this.ref.current.style.width=`${this.w}px`;\r\n        if(this.h<this.maxh) this.ref.current.style.height=`${this.h}px`;\r\n        if(this.w>=this.maxw&&this.h>=this.maxh) this.setState({done:true});\r\n        this.w+=50;\r\n        this.h+=50;\r\n    }\r\n    componentWillUnmount(){\r\n        clearInterval(this.t);\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    componentDidMount(){\r\n        this.maxw=document.body.clientWidth/1.1;\r\n        this.maxh=document.body.clientHeight/1.1;\r\n        this.w=0;\r\n        this.h=0;\r\n        this.t=setInterval(this.animate,1);\r\n        window.KEYDOWNHANDLE=false\r\n    }\r\n    render(){\r\n        const keys=this.props.captions.help.hotKeys.map((item,i)=><Fragment key={i}><span className='helpHotKey'>{item.key} </span> - {item.desc}<br/></Fragment>);\r\n        return <div className='helpContainer  noselect' onClick={this.props.showHelp.bind(null,false)}>\r\n                <div style={{display:\"inline-block\",zIndex:101,position:\"relative\"}}>\r\n                    <div id='help' ref={this.ref} className={\"toolBar helpSectionShow\"}>\r\n                        <div className={\"toolBarHeader\"}>\r\n                            <span className={\"toolBarCaption\"}>{this.props.captions.help.title}</span>\r\n                        </div>\r\n                    {this.state.done?<MySelf/>:<></>}\r\n                    {keys}\r\n                    <div id=\"pifagor\"></div>\r\n                    <div id=\"evklid\"></div>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        captions:store.options.captions,\r\n    }\r\n};\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        showHelp:show=>dispatch(showHelp(show))\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(HelpSection);\r\n","import React from 'react';\r\nimport '../Graph.css';\r\nimport '../Buttons.css';\r\nimport {showConfirm, blink} from '../actions/AppActions';\r\nimport { connect } from 'react-redux';\r\nimport {store} from '../store/configureStore'\r\nclass Confirm extends React.Component{\r\n    \r\n    render(){\r\n        return <div className='modalContainer  noselect' onClick={blink}>\r\n                    <div className={\"toolBar\"} onClick={(e)=>{e.stopPropagation()}}>\r\n                      <div>{this.props.captions.messages[this.props.messageKey]}</div>\r\n                        <div className=\"flexCenter\">\r\n                        <button onClick={()=>{\r\n                            store.dispatch(this.props.onOk());\r\n                            this.props.hideConfirm()}}>OK</button>\r\n                        <button onClick={this.props.hideConfirm}>{this.props.captions.buttons.cancel}</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        captions:store.options.captions,\r\n    }\r\n};\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        hideConfirm:()=>dispatch(showConfirm(false))\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Confirm);\r\n","import React from 'react';\r\nimport '../Graph.css';\r\nimport '../Buttons.css';\r\nimport {showAlert, blink} from '../actions/AppActions';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Alert extends React.Component{\r\n    render(){\r\n        return <div className='modalContainer  noselect' onClick={blink}>\r\n                    <div className={\"toolBar\"} onClick={(e)=>{e.stopPropagation()}}>\r\n                        <div>{this.props.captions.messages[this.props.messageKey]}</div>\r\n                        <div className=\"flexCenter\">\r\n                        <button onClick={()=>{\r\n                            this.props.hideAlert()}}>OK</button>\r\n                        </div>    \r\n                    </div>\r\n                </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        captions:store.options.captions,\r\n    }\r\n};\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        hideAlert:()=>dispatch(showAlert(false))\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Alert);\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport Header from './components/Header';\r\nimport {captions} from './locale/eng';\r\nimport MainContainer from './components/MainContainer';\r\nimport HelpSection from './components/HelpSection';\r\nimport {setLanguage} from './actions/AppActions';\r\nimport Confirm from './components/Confirm';\r\nimport Alert from './components/Alert';\r\n\r\nclass Body extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        props.setLanguage(captions);\r\n    }\r\n    render() {\r\n        return <div className={\"body\"}>\r\n            {this.props.showConfirm.show?<Confirm messageKey={this.props.showConfirm.messageKey} onOk={this.props.showConfirm.okAction}/>:<></>}\r\n            {this.props.showAlert.show?<Alert messageKey={this.props.showAlert.messageKey}/>:<></>}\r\n            <Header/>\r\n            {this.props.showHelp?<HelpSection/>:<></>}\r\n            <hr/>\r\n            <MainContainer/>\r\n            \r\n           </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = store => {\r\n    return {\r\n            showHelp:store.components.showHelp,\r\n            showConfirm:store.components.showConfirm,\r\n            showAlert:store.components.showAlert,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setLanguage: captions=>dispatch(setLanguage(captions)),\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Body)","import React from 'react';\r\nimport '../Graph.css';\r\n\r\nexport default class Spinner extends React.Component{\r\n\r\n    render(){\r\n        return <div className=\"spinner\"></div>\r\n    }\r\n}","import React from 'react';\r\nimport '../Graph.css';\r\nimport '../Buttons.css';\r\nimport {connect} from 'react-redux';\r\nimport { setToken } from '../actions/UserActions';\r\nimport options from '../config'\r\nimport Spinner from './Spinner';\r\nimport { blink } from '../actions/AppActions';\r\nclass Login extends React.Component{\r\n    constructor(){\r\n        super();\r\n        this.refName=React.createRef();\r\n        this.refPass=React.createRef();\r\n        this.state={correct:true,logging:false,errCode:0,showPass:false,remember:false}\r\n    }\r\n    onRegClick(){\r\n        this.props.history.push('/register')\r\n    }\r\n    onSubmit(e){\r\n        if(this.state.logging)return;\r\n        const name=this.refName.current.value;\r\n        const pass=this.refPass.current.value;\r\n        this.requestLogin(name,pass);\r\n        e.preventDefault();\r\n    }\r\n    cancel(){\r\n        this.props.history.push('/');\r\n    }\r\n    requestLogin(name,password){\r\n        this.setState({correct:true,logging:true});\r\n        fetch(options.devUrl+'/login',\r\n                    {method:'POST',headers: {\"Content-Type\": \"application/json\"},\r\n                    body:JSON.stringify({nameOrEmail:name,password:password})})\r\n            .then(res=>\r\n                res.json())\r\n            .then(res=>{\r\n                this.setState({correct:res.success,logging:false,errCode:res.errCode});\r\n                if(res.success===true) {\r\n                    this.props.setToken(res.token,this.state.remember);\r\n                    this.props.history.push('/');\r\n                }\r\n            })\r\n            .catch(e=>{console.error(e); this.setState({correct:false,logging:false,errCode:3});});\r\n    }\r\n    \r\n    componentWillUnmount(){\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    componentDidMount(){\r\n        window.KEYDOWNHANDLE=false\r\n        this.ref.style.overflow=\"hidden\"\r\n        this.ref.style.width=\"0px\"\r\n        this.ref.style.transition=\"width 200ms linear\"\r\n        setTimeout(()=>{this.ref.style.width=\"200px\"},10)\r\n    }\r\n    render(){\r\n        const cap=this.props.cap;\r\n        const showPass=this.state.showPass?\"text\":\"password\"\r\n        return <div className='modalContainer noselect' onClick={blink}>\r\n                    <div ref={(ref)=>{this.ref=ref}}className={\"toolBar\"} onClick={(e)=>{e.stopPropagation()}}>\r\n                        <div className={\"toolBarHeader\"}>\r\n                            <span className={\"toolBarCaption\"}>{cap.loginForm.title}</span>\r\n                        </div>\r\n                        <form onSubmit={this.onSubmit.bind(this)} className='loginForm'>\r\n                            <input name=\"nameOrEmail\" ref={this.refName} required placeholder={cap.loginForm.name}/>\r\n                            <input name=\"password\" ref={this.refPass} required placeholder={cap.loginForm.password} type={showPass}/>\r\n                            <input type='submit' value='OK'/>\r\n                            <input type='button' value={cap.loginForm.regForm} onClick={this.onRegClick.bind(this)}/>\r\n                            <input type='button' value={cap.buttons.cancel} onClick={this.cancel.bind(this)}/>\r\n                        </form>\r\n                        <div className=\"checkbox\">\r\n                            <input type=\"checkbox\" id=\"show\" onChange={(e)=>{this.setState({showPass:e.target.checked})}}/>\r\n                            <label htmlFor=\"show\">{cap.buttons.showPass}</label>\r\n                        </div>\r\n                        <div className=\"checkbox\">\r\n                            <input type=\"checkbox\" id=\"remember\" onChange={(e)=>{this.setState({remember:e.target.checked})}}/>\r\n                            <label htmlFor=\"remember\">{cap.loginForm.rememberMe}</label>\r\n                        </div>\r\n                    {this.state.correct===false?<span className=\"errorMessage\">{cap.loginForm.messages[this.state.errCode]}</span>:<></>}\r\n                    <div className=\"flexCenter\">{this.state.logging?<Spinner/>:<></>}</div>\r\n                    </div>\r\n                </div>\r\n    }\r\n}\r\nconst mapStateToProps=(store)=>{\r\n    return {\r\n        cap:store.options.captions,\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        setToken:(token,remember)=>{dispatch(setToken(token,remember))}\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Login);","import React from 'react';\r\nimport '../Graph.css';\r\nimport {connect} from 'react-redux';\r\nimport options from '../config'\r\nimport Spinner from './Spinner';\r\nimport { showAlert, blink } from '../actions/AppActions';\r\n\r\nclass Register extends React.Component{\r\n    constructor(){\r\n        super()\r\n        this.refName=React.createRef()\r\n        this.refEmail=React.createRef()\r\n        this.refPass1=React.createRef()\r\n        this.refPass2=React.createRef()\r\n        this.state={correct:false,message:\"\",fetching:false,showPass:false}\r\n    }\r\n    check(name,email,pass1,pass2){\r\n        const cap=this.props.cap.registerForm;\r\n        let messIndex;\r\n        let state={correct:true}\r\n        if(pass2!==pass1) messIndex=3\r\n        if(pass1.length<6) messIndex=2\r\n        if(!email.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)) messIndex=4\r\n        if(!name.match(/^[a-zA-Z0-9]+([a-zA-Z0-9](_)[a-zA-Z0-9])*[a-zA-Z0-9]+$/)) messIndex=1\r\n        if(name.length<4) messIndex=0\r\n        if(messIndex!==undefined) state={correct:false,message:cap.inputMessages[messIndex]}\r\n        return state;\r\n    }\r\n    onSubmit(e){\r\n        const cap=this.props.cap.registerForm;\r\n        const name=this.refName.current.value;\r\n        const email=this.refEmail.current.value;\r\n        const pass1=this.refPass1.current.value;\r\n        const pass2=this.refPass2.current.value;\r\n        const state=this.check(name,email,pass1,pass2)\r\n        if(state.correct){\r\n            fetch(options.devUrl+'/register',{method:'POST',headers: {\"Content-Type\": \"application/json\"},\r\n                    body:JSON.stringify({name:name,email:email,password:pass1})})\r\n                    .then(res=>res.json())\r\n                    .then(res=>{\r\n                        if(res.registered) {\r\n                            this.props.showAlert('regSucceed');\r\n                            this.props.history.push('/');\r\n                        }\r\n                        this.setState({correct:res.registered,fetching:false,message:cap.serverMessages[res.errCode]})\r\n                    })\r\n                    .catch(err=>{this.setState({correct:false,fetching:false,message:cap.serverMessages[5]})})\r\n        }\r\n        this.setState({...state,fetching:true});\r\n        e.preventDefault();\r\n    }\r\n    cancel(){\r\n        this.props.history.push('/');\r\n    }\r\n    componentWillUnmount(){\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    componentDidMount(){\r\n        window.KEYDOWNHANDLE=false\r\n        this.ref.style.overflow=\"hidden\"\r\n        this.ref.style.width=\"0px\"\r\n        this.ref.style.transition=\"width 200ms linear\"\r\n        setTimeout(()=>{this.ref.style.width=\"200px\"},10)\r\n    }\r\n    render(){\r\n        const cap=this.props.cap;\r\n        const showPass=this.state.showPass?\"text\":\"password\"\r\n        return <div className='modalContainer noselect' onClick={blink}>\r\n                    <div ref={(ref)=>{this.ref=ref}} className={\"toolBar center\"} onClick={(e)=>{e.stopPropagation()}}>\r\n                        <div className={\"toolBarHeader\"}>\r\n                            <span className={\"toolBarCaption\"}>{cap.registerForm.title}</span>\r\n                        </div>\r\n                        <form onSubmit={this.onSubmit.bind(this)} className='loginForm'>\r\n                            <input required ref={this.refName} placeholder={cap.registerForm.name}/>\r\n                            <input required ref={this.refEmail} placeholder={cap.registerForm.email} type=\"email\"/>\r\n                            <input required ref={this.refPass1} placeholder={cap.registerForm.password} type={showPass}/>\r\n                            <input required ref={this.refPass2} placeholder={cap.registerForm.passwordAgain} type={showPass}/>\r\n                            <input type='submit' value='OK'/>\r\n                            <input type='button' value={cap.buttons.cancel} onClick={this.cancel.bind(this)}/>\r\n                        </form>\r\n                        <div className=\"checkbox\">\r\n                        <input type=\"checkbox\" id=\"show\" onChange={(e)=>{this.setState({showPass:e.target.checked})}}/><label htmlFor=\"show\">{cap.buttons.showPass}</label>\r\n                        </div>\r\n                        <div className=\"flexCenter\">{this.state.fetching?<Spinner/>:<></>}</div>\r\n                        {!this.state.correct?<span className=\"errorMessages\">{this.state.message}</span>:<></>}\r\n                    </div>\r\n                </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        cap:store.options.captions\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return {\r\n        showAlert:(messageKey)=>dispatch(showAlert(true,messageKey))\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Register);","import React from 'react';\r\nimport '../Graph.css';\r\nimport {connect} from 'react-redux';\r\nimport options from '../config';\r\nimport Spinner from './Spinner';\r\n\r\nclass Activation extends React.Component{\r\n    constructor(){\r\n        super();\r\n        this.state={activated:true,logging:false,errCode:0,message:\"\"}\r\n    }\r\n    onLoginClick(){\r\n        this.props.history.push('/login')\r\n    }\r\n    cancel(){\r\n        this.props.history.push('/');\r\n    }\r\n    activate(id){\r\n        this.setState({activated:false,logging:true});\r\n        fetch(options.devUrl+'/activate',\r\n                    {method:'POST',headers: {\"Content-Type\": \"application/json\"},\r\n                    body:JSON.stringify({id:id})})\r\n            .then(res=>res.json())\r\n            .then(res=>{\r\n                this.setState({activated:res.success,logging:false,message:this.props.cap.activation.messages[res.errCode]});\r\n                if(res.success===true) {\r\n                    //this.props.setToken(res.token);\r\n                    //this.props.history.push('/');\r\n                }\r\n            })\r\n            .catch(e=>{console.error(e); this.setState({activated:false,logging:false,errCode:5});});\r\n    }\r\n    componentWillUnmount(){\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    componentDidMount(){\r\n        this.activate(this.props.match.params.id)\r\n        window.KEYDOWNHANDLE=false\r\n    }\r\n    render(){\r\n        const cap=this.props.cap;\r\n        //const text=this.cap.activation.messages[this.state.errCode]\r\n        const text=this.state.message\r\n        return <div className='modalContainer noselect'>\r\n                    <div className={\"toolBar\"}>\r\n                        <div className={\"toolBarHeader\"}>\r\n                            <span className={\"toolBarCaption\"}>{cap.activation.title}</span>\r\n                        </div>\r\n                        \r\n                        {this.state.logging?<Spinner/>: \r\n                        <div>   \r\n                         <div>{text}</div>\r\n                         <input type='button' value={cap.loginForm.title} onClick={this.onLoginClick.bind(this)}/>\r\n                         <input type='button' value={cap.buttons.cancel} onClick={this.cancel.bind(this)}/>\r\n                         </div>}\r\n                    </div>\r\n                </div>\r\n    }\r\n}\r\nconst mapStateToProps=(store)=>{\r\n    return {\r\n        cap:store.options.captions,\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Activation);","import React from 'react';\r\nimport {BrowserRouter,Route} from 'react-router-dom';\r\nimport {Provider} from 'react-redux';\r\nimport {store} from './store/configureStore';\r\nimport Body from './Body';\r\nimport Login from './components/Login'\r\nimport Register from './components/Register';\r\nimport Activation from './components/Activation';\r\nexport default class GeomEditor extends React.Component {\r\n    render() {\r\n        return <Provider store={store}>\r\n            <BrowserRouter>\r\n                <Route path='/' component={Body}/>\r\n                <Route exact path='/activate' component={Activation}/>\r\n                <Route path='/activate/:id' component={Activation}/>\r\n                <Route path='/login' component={Login}/>\r\n                <Route path='/register' component={Register}/>\r\n            </BrowserRouter>\r\n        </Provider>\r\n\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport GeomEditor from './GeomEditor';\r\n\r\nReactDOM.render(\r\n    <GeomEditor/>\r\n    ,\r\n    document.getElementById('root'));\r\n"],"sourceRoot":""}