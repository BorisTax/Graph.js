{"version":3,"sources":["reducers/shapes.js","actions/ScreenActions.js","actions/ShapeActions.js","components/colors.js","components/shapes/ShapeStyle.js","utils/geometry.js","components/shapes/Shape.js","components/shapes/cursors/Cursor.js","components/shapes/cursors/SelectCursor.js","components/shapes/ShapeManager.js","components/shapes/cursors/DrawCursor.js","components/shapes/SLineShape.js","components/shapes/markers/SnapMarkersManager.js","components/shapes/SelectionManager.js","components/shapes/SelectRectShape.js","components/shapes/shapecreators/ShapeBuilder.js","components/shapes/shapecreators/SelectRectCreator.js","components/shapes/cursors/DragCursor.js","components/shapes/cursors/PickCursor.js","handlers/MouseHandler.js","handlers/StatusFreeHandler.js","handlers/StatusPanHandler.js","handlers/StatusPickHandler.js","handlers/StatusSelectHandler.js","handlers/StatusCreateHandler.js","reducers/screen.js","config.js","actions/AppActions.js","locale/eng.js","reducers/options.js","actions/ComponentActions.js","reducers/component.js","actions/UserActions.js","reducers/user.js","reducers/index.js","store/configureStore.js","components/LangToogleButton.js","components/LangToggleBar.js","components/HelpButton.js","components/User.js","components/Header.js","components/ToolButton.js","components/ToolButtonGroup.js","components/shapes/markers/SnapMarker.js","components/shapes/markers/CenterSnapMarker.js","components/shapes/markers/PointMarker.js","components/shapes/pickers/PropertyPicker.js","components/shapes/pickers/PointPicker.js","components/shapes/TriangleShape.js","components/shapes/markers/MiddleSnapMarker.js","components/shapes/RectangleShape.js","components/shapes/markers/EndSnapMarker.js","components/shapes/LineShape.js","components/shapes/TextShape.js","components/shapes/pickers/DistancePicker.js","components/shapes/CircleShape.js","components/Screen.js","components/shapes/shapecreators/StraightLineCreator.js","components/shapes/RayLineShape.js","components/shapes/shapecreators/RayLineCreator.js","components/shapes/shapecreators/LineCreator.js","components/shapes/shapecreators/CircleCRCreator.js","components/shapes/shapecreators/Circle2PCreator.js","components/shapes/shapecreators/Circle3PCreator.js","components/shapes/shapecreators/TriangleCreator.js","components/shapes/shapecreators/RectangleCreator.js","components/CreateToolBar.js","components/OptionTogglePic.js","components/SnapToggleBar.js","components/PickButton.js","components/PropertyField.js","components/PropertyMultField.js","components/PropertyEditButtonsBar.js","components/PropertyEditorBar.js","components/SelectionToolBar.js","components/MainContainer.js","components/MySelf.js","components/HelpSection.js","components/Confirm.js","components/Alert.js","Body.js","components/Spinner.js","components/Login.js","components/Register.js","components/Activation.js","GeomEditor.js","index.js"],"names":["initialState","status","ScreenActions","ADD_SHAPE","CANCEL","CANCEL_SELECTION","CENTER_TO_POINT","CREATE_SHAPE","DELETE_CONFIRM","DELETE_SELECTED_SHAPES","PAN_SCREEN","PICK","REFRESH_SHAPE_MANAGER","REFRESH_SNAP_MARKERS","REPAINT","SELECT_ALL","SELECT_SHAPE","SET_BOUNDED_CIRCLE","SET_CUR_COORD","SET_CYCLIC_FLAG","SET_DIMENSIONS","SET_GRID_SNAP","SET_GRID_VISIBLE","SET_PICKED_DATA","SET_PREV_COORD","SET_PREV_STATUS","SET_RATIO","SET_REAL_WIDTH","SET_SCALE","SET_SCREEN_CONTEXT","SET_SELECTION_TYPE","SET_SNAP","SET_STATUS","SET_TOP_LEFT","START_PICKING","START_SELECTION","addShape","shape","type","payload","cancel","cancelSelection","centerToPoint","p","createNewShape","creator","deleteConfirm","deleteSelectedShapes","refreshShapeManager","refreshSnapMarkers","repaint","selectAll","selectShapes","selectedShapes","setBoundedCircle","setCurCoord","point","screenPoint","setCyclicFlag","flag","setDimensions","width","height","realWidth","topLeft","setGridSnap","snap","setGridVisible","visible","setPickedData","data","setPrevCoord","setPrevStatus","setRatio","ratio","setRealWidth","setScale","scale","anchor","setScreenContext","context","setScreenStatus","arguments","length","undefined","Status","FREE","params","SELECT","CREATE","PAN","picker","setSelectionType","selType","setSnap","snapClass","setTopLeft","startPicking","id","ShapeActions","SET_PROPERTY","Color","BLUE","BLACK","GRAY","RED","DARK_ORANGE","GREEN","SELECTED","SELECTION_AREA","GRID","ACTIVE_POINT_MARKER","POINT_MARKER","ShapeStyle","color","stroke","SOLID","Object","classCallCheck","this","originColor","DASH","SELECTION","Coord2D","x","y","Point2D","Line","p1","p2","SLine","_this","param","createLine","a","b","c","createClass","key","value","NaN","RLine","origin","vector","Vector","directionPoint","Arc","first","second","third","chord","Math","sqrt","Rectangle","bottomRight","abs","Circle","center","radius","Triangle","points","line1","Geometry","SLinePerpOnPoint","midPoint","line2","Intersection","SLineSLine","distance","modulus","d","d1","d2","line","sline","pointOnLine","rectTopLeft","rectBottomRight","lines","Array","forEach","l","LineSLine","push","ps","RectangleSLine","SLineFromRLine","isPointOnRayLine","rectTopLeft1","rectBottomRight1","rectTopLeft2","rectBottomRight2","lines1","lines2","l1","l2","LineLine","circle","dx","dy","LineShifted","r","A","B","C","QuadEquation","res","i","CircleSLine","k","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","screenWidth","round","getYbyX","isNaN","getXbyY","sx","sy","x1","y1","x2","y2","pointOnSLineProjection","SLineFromLine","min","v1","v2","v","acos","scalar","p3","midp1","midp2","pline1","pline2","arc","mp","m","limit","arcMiddlePoint","arcToPointArray","arcByTwoPointsCenter","len","angleVectors","angle","cos","sin","screenHeight","realHeight","realRect","screenRect","Shape","style","state","selected","highlighted","pointMarkers","controlPoints","cp","marker","setActive","map","model","setColor","getColor","objectSpread","setStyle","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","show","setPoint","prop","Cursor","possibleConstructorReturn","getPrototypeOf","call","p0","realToScreen","shiftKey","_ref","altKey","SelectCursor","ctx","refresh","strokeStyle","getStyle","setLineDash","getStroke","lineWidth","getWidth","beginPath","moveTo","lineTo","strokeRect","rectSize","drawPlus","drawMinus","size","ShapeManager","shapes","allShapes","dist","s","getDistance","setState","getState","distances","getDistanceToControlPoints","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","tl","br","isInRect","_s$isInRect","cross","full","ok","deselectShapes","filter","DrawCursor","SLineShape","rad","activePoint","Map","set","regexp","get","prototype","PointToSLineDistance","concat","SnapMarkersManager","snapSet","Set","snapMarkersActive","snapMarkersAll","activeMarker","add","refreshMarkerList","delete","markers","has","constructor","clear","pos","minDistance","getPos","SelectionManager","selectionCreator","setNextPoint","setCurrent","getShape","SelectRectShape","rectangle","rect","realToScreenLength","ShapeBuilder","boundedCircle","legal","helperShapes","setControlPoints","name","SelectRectCreator","isNext","caption","DragCursor","pts","drawArrow","rotatePoint","PI","PickCursor","MouseHandler","curScreenPoint","coord","curPoint","prevCoord","screenProps","marginLeft","marginRight","marginTop","marginBottom","_ref2","prevPoint","screenToReal","toFixed","mouseOnScreen","isOutRect","_ref3","deltaY","actions","pixelRatio","temp","gridSnap","gridStep","snapMinDist","getRealRect","getScreenRect","snapMarkersManager","getDistanceToNearestMarker","snapDist","getActiveMarker","StatusFreeHandler","_MouseHandler","apply","inherits","cursor","setAdditional","shapeManager","findShapeNearPoint","selectDist","findControlPoints","selectionManager","reset","setNext","selectControlPoints","StatusPanHandler","dragX0","dragY0","StatusPickHandler","curCoord","getPickedData","StatusSelectHandler","findShapeInRect","StatusCreateHandler","shapeCreator","isLegal","cyclicCreation","createShape","DRAWING","PICK_END","MOVETRANS","xAxeShape","yAxeShape","curShape","gridStepPixels","pickedData","editId","fix","prevStatus","selectionType","grid","statusBar","statusParams","xAxe","yAxe","getRealWidthParams","pr","rh","gsp","mouseHandler","options","devUrl","_devUrl","AppActions","SET_LANGUAGE","REQUEST_LANGUAGE","SHOW_HELP","SHOW_CONFIRM","SHOW_ALERT","setLanguage","captions","showHelp","showConfirm","messageKey","okAction","showAlert","blink","form","document","querySelector","oldColor","backgroundColor","count","int","setInterval","clearInterval","about","email","user","buttons","logout","showPass","pick","registerForm","title","password","passwordAgain","serverMessages","inputMessages","loginForm","regForm","rememberMe","messages","activation","deleteShapes","regSucceed","create","createToolBar","createCheckBox","createSLine2Points","createRayLine2Points","createSegmentLine2Points","createCircleCenter","createCircle2P","createCircle3P","createRect","createRectCenter","createTriangle","createTriangleInscribed","createTriangleDescribed","createParabola","createHyperbola","createFunction","development","modify","crossSelect","fullSelect","snapToggleBar","snapGridPoints","snapEndPoints","snapCenterPoints","snapMiddlePoints","showGrid","propBar","noShapesSelected","NShapesSelected","deleteButton","Title","Radius","Center","P1","P2","Origin","Direction","P3","pickers","PointPicker","description","steps","DistancePicker","creators","StraightLineCreator","RayLineCreator","LineCreator","CircleCRCreator","Circle2PCreator","Circle3PCreator","RectangleCreator","TriangleCreator","help","hotKeys","desc","keyDownHandler","ctrlKey","keyCode","action","ComponentActions","SET_ACTIVE_SNAP_BUTTON","CLEAR_ACTIVE_SNAP_BUTTON","SET_ACTIVE_CREATE_BUTTON","SET_ACTIVE_LANG_BUTTON","SET_ACTIVE_SELECTION_BUTTON","activeLangButton","defaultLang","activeSnapButtons","message","UserActions","SET_TOKEN","LOGOUT","token","cookie","split","jwtDecode","rootReducer","combineReducers","screen","bc","handlerOptions","curHelperShapes","creationStep","currentShape","random","viewPortWidth","viewPortHeight","prevCursor","prevMouseHandler","addSnapMarkers","getMarkers","prevScreenPoint","getProperties","setProperty","_action$payload","addSnap","removeSnap","expires","remember","components","newState","activeButtons","activeCreateButton","bind","window","store","createStore","applyMiddleware","thunk","LangToggleButton","props","pressed","requestLanguage","lang","setActiveLangButtonId","className","react_default","createElement","onClick","React","Component","LangToggleBar","LangToogleButton_LangToggleButton","connect","dispatch","fetch","method","body","JSON","stringify","headers","Content-Type","then","json","capt","catch","e","console","error","HelpButton","User","links","react_router_dom","to","cap","Fragment","Header","components_LangToggleBar","components_HelpButton","components_User","ToolButton","activeButtonId","dev","setButtonFirst","cls","onclick","ToolButtonGroup","firstButton","expanded","_this2","find","button","ToolButton_ToolButton","index","activeButton","onMouseEnter","onMouseLeave","SnapMarker","markerShape","MARKER_SIZE","SNAP_MARKER_SIZE","EndSnapMarker","CircleShape","setMarker","PointMarker","active","fillStyle","fill","PropertyPicker","getType","TriangleShape","triangle","activePointMarker","list","MiddleSnapMarker","l3","PointToLineDistance","pointInRect","every","LineRectangle","some","RectangleShape","tr","bl","top","bottom","right","left","RectangleRectangle","LineShape","TextShape","text","log","save","font","basePoint","CENTER","measureText","newPoint","translate","rotate","strokeText","restore","setAnchor","setFont","setText","sign","screenCenter","screenRadius","CenterSnapMarker","outRectX1","outRectY1","outRectX2","outRectY2","inRectX1","inRectY1","inRectX2","inRectY2","pointInRectByPoints","Screen","dragGrid","gridPointsX","gridPointsY","gridNumbersX","gridNumbersY","drag","lbut","mbut","KEYDOWNHANDLE","refCanvas","createRef","setCoord","drawShape","solidStyle","dashStyle","firstX","firstY","hor","vert","ix","iy","xGridLineNumber","yGridLineNumber","gridLinesCountX","gridLinesCountY","px","py","w","format","s0","h","drawSelf","lineJoin","fillRect","drawGrid","status_bar","getName","getCurrentStep","getHelperShapes","pickShape","pickHelperShapes","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","drawCoordinates","getMarker","getSelectionShape","drawCursor","target","getBoundingClientRect","clientX","clientY","move","ctlrKey","rdx","rdy","preventDefault","down","up","wheel","leave","click","getSelectedShapes","toggleShapeSelected","getComputedStyle","sw","Number","parseInt","sh","canvas","getContext","addEventListener","mwheelHandle","passive","paint","resize","oncontextmenu","setShapes","ref","onMouseMove","mmoveHandle","onMouseDown","mdownHandle","onMouseUp","mupHandle","mleaveHandle","menter","clickHandle","construct","toConsumableArray","RayLineShape","CircleRLine","PointToRLineDistance","RectangleRLine","radiusLine","diamLine","gray","blue","getOuterCircle","CreateToolBar","setButtonId","setActiveCreateButton","onChange","checked","htmlFor","ToolButtonGroup_ToolButtonGroup","ownProps","OptionTogglePic","clearActiveSnapButton","setActiveSnapButton","SnapToggleBar","OptionTogglePic_OptionTogglePic","PickButton","PropertyField","correct","prevValue","originValue","match","charCode","n","parseFloat","propKey","display","flexDirection","alignContent","label","change","onKeyPress","onKeyDown","stopPropagation","onBlur","blur","onFocus","components_PickButton","nextProps","prevState","pickedValue","PropertyMultField","setActivePoint","focus","PropertyEditButtonsBar","PropertyEditorBar","shapeTitle","propElements","shapeType","keys","components_PropertyMultField","components_PropertyField","components_PropertyEditButtonsBar","SelectionToolBar","MainContainer","Screen_Screen","assign","borderWidth","borderStyle","components_CreateToolBar","components_SelectionToolBar","components_PropertyEditorBar","components_SnapToggleBar","MySelf","textAlign","ref2","position","whiteSpace","fontSize","HelpSection","animate","maxw","current","maxh","t","clientWidth","clientHeight","item","react","zIndex","components_MySelf","Confirm","onOk","hideConfirm","Alert","hideAlert","Body","components_Confirm","components_Alert","Header_Header","components_HelpSection","components_MainContainer","Spinner","Login","refName","refPass","logging","errCode","history","pass","requestLogin","nameOrEmail","success","setToken","_this3","overflow","transition","setTimeout","_this4","onSubmit","required","placeholder","onRegClick","Spinner_Spinner","Register","refEmail","refPass1","refPass2","fetching","pass1","pass2","messIndex","check","registered","Activation","activated","activate","onLoginClick","GeomEditor","es","react_router","path","component","exact","ReactDOM","render","GeomEditor_GeomEditor","getElementById"],"mappings":"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","file":"static/js/main.6f44a7cf.chunk.js","sourcesContent":["const initialState = {\r\n    status: 'FREE',\r\n}\r\nexport function shapeReducer(state = initialState) {\r\n    return state\r\n}","import {Status} from '../reducers/screen';\r\nexport const ScreenActions={\r\n    ADD_SHAPE : 'ADD_SHAPE',\r\n    CANCEL : 'CANCEL',\r\n    CANCEL_SELECTION : 'CANCEL_SELECTION',\r\n    CENTER_TO_POINT : 'CENTER_TO_POINT',\r\n    CREATE_SHAPE : 'CREATE_SHAPE',\r\n    DELETE_CONFIRM:'DELETE_CONFIRM',\r\n    DELETE_SELECTED_SHAPES : 'DELETE_SELECTED_SHAPES',\r\n    PAN_SCREEN : 'PAN_SCREEN',\r\n    PICK : 'PICK',\r\n    REFRESH_SHAPE_MANAGER : 'REFRESH_SHAPE_MANAGER',\r\n    REFRESH_SNAP_MARKERS : 'REFRESH_SNAP_MARKERS',\r\n    REPAINT : 'REPAINT',\r\n    SELECT_ALL : 'SELECT_ALL',\r\n    SELECT_SHAPE : 'SELECT_SHAPE',\r\n    SET_BOUNDED_CIRCLE : 'SET_BOUNDED_CIRCLE',\r\n    SET_CUR_COORD : 'SET_CUR_COORD',\r\n    SET_CYCLIC_FLAG : 'SET_CYCLIC_FLAG',\r\n    SET_DIMENSIONS : 'SET_DIMENSIONS',\r\n    SET_GRID_SNAP : 'SET_GRID_SNAP',\r\n    SET_GRID_VISIBLE : 'SET_GRID_VISIBLE',\r\n    SET_PICKED_DATA : 'SET_PICKED_DATA',\r\n    SET_PREV_COORD : 'SET_PREV_COORD',\r\n    SET_PREV_STATUS : 'SET_PREV_STATUS',\r\n    SET_RATIO : 'SET_RATIO',\r\n    SET_REAL_WIDTH : 'SET_REAL_WIDTH',\r\n    SET_SCALE : 'SET_SCALE',\r\n    SET_SCREEN_CONTEXT : 'SET_SCREEN_CONTEXT',\r\n    SET_SELECTION_TYPE : 'SET_SELECTION_TYPE',\r\n    SET_SNAP : 'SET_SNAP',\r\n    SET_STATUS : 'SET_STATUS',\r\n    SET_TOP_LEFT : 'SET_TOP_LEFT',\r\n    START_PICKING : 'START_PICKING',\r\n    START_SELECTION : 'START_SELECTION',\r\n\r\n  addShape:(shape)=>{\r\n    return {\r\n        type:ScreenActions.ADD_SHAPE,\r\n        payload:shape\r\n    }\r\n},\r\n  cancel:()=>{\r\n    return{\r\n        type:ScreenActions.CANCEL\r\n    }\r\n},\r\n  cancelSelection:()=>{\r\n    return{\r\n        type:ScreenActions.CANCEL_SELECTION\r\n    }\r\n},\r\n  centerToPoint:(p)=>{\r\n    return {\r\n        type:ScreenActions.CENTER_TO_POINT,\r\n        payload:p\r\n    }\r\n},\r\n createNewShape:(creator)=>{\r\n    return {\r\n        type: ScreenActions.CREATE_SHAPE,\r\n        payload:creator,\r\n    }\r\n},\r\n deleteConfirm:()=> {\r\n    return {\r\n        type: ScreenActions.DELETE_CONFIRM,\r\n    }\r\n},\r\n deleteSelectedShapes:() =>{\r\n    return {\r\n        type: ScreenActions.DELETE_SELECTED_SHAPES,\r\n    }\r\n},\r\n refreshShapeManager:()=>{\r\n    return{\r\n        type:ScreenActions.REFRESH_SHAPE_MANAGER\r\n    }\r\n},\r\n refreshSnapMarkers:()=>{\r\n    return{\r\n        type:ScreenActions.REFRESH_SNAP_MARKERS\r\n    }\r\n},\r\n repaint:()=>{\r\n    return{\r\n        type:ScreenActions.REPAINT\r\n    }\r\n},\r\n selectAll:()=> {\r\n    return {\r\n        type: ScreenActions.SELECT_ALL\r\n    }\r\n},\r\n selectShapes:(selectedShapes) =>{\r\n    return {\r\n        type: ScreenActions.SELECT_SHAPE,\r\n        payload: selectedShapes,\r\n    }\r\n},\r\n setBoundedCircle:()=>{\r\n    return{\r\n        type:ScreenActions.SET_BOUNDED_CIRCLE\r\n    }\r\n},\r\n setCurCoord:(point,screenPoint)=> {\r\n    return {\r\n        type: ScreenActions.SET_CUR_COORD,\r\n        payload: {point,screenPoint},\r\n    }\r\n},\r\n setCyclicFlag:(flag)=> {\r\n    return {\r\n        type: ScreenActions.SET_CYCLIC_FLAG,\r\n        payload: flag,\r\n    }\r\n},\r\n setDimensions:(width,height,realWidth,topLeft)=>{\r\n    return{\r\n        type:ScreenActions.SET_DIMENSIONS,\r\n        payload:{width,height,realWidth,topLeft}\r\n    }\r\n},\r\n setGridSnap:(snap) =>{\r\n    return {\r\n        type: ScreenActions.SET_GRID_SNAP,\r\n        payload: snap,\r\n    }\r\n},\r\n setGridVisible:(visible)=>{\r\n    return {\r\n        type: ScreenActions.SET_GRID_VISIBLE,\r\n        payload: visible,\r\n    }\r\n},\r\n setPickedData:(data)=>{\r\n    return{\r\n        type:ScreenActions.SET_PICKED_DATA,\r\n        payload:data\r\n    }\r\n},\r\n setPrevCoord:(point,screenPoint) =>{\r\n    return {\r\n        type: ScreenActions.SET_PREV_COORD,\r\n        payload: {point,screenPoint},\r\n    }\r\n},\r\n setPrevStatus:()=>{\r\n    return{\r\n        type:ScreenActions.SET_PREV_STATUS,\r\n    }\r\n},\r\n setRatio:(ratio)=>{\r\n    return{\r\n        type:ScreenActions.SET_RATIO,\r\n        payload:ratio\r\n    }\r\n},\r\n setRealWidth:(width)=>{\r\n    return{\r\n        type:ScreenActions.SET_REAL_WIDTH,\r\n        payload:width\r\n    }\r\n},\r\n setScale:(scale,anchor)=>{\r\n    return{\r\n        type:ScreenActions.SET_SCALE,\r\n        payload:{scale,anchor}\r\n    }\r\n},\r\n setScreenContext:(context)=> {\r\n    return {\r\n        type: ScreenActions.SET_SCREEN_CONTEXT,\r\n        payload: context,\r\n    }\r\n},\r\nsetScreenStatus:(status=Status.FREE,params)=>{\r\n    let payload=null;\r\n    let type=null;\r\n    switch(status){\r\n        case Status.SELECT:\r\n            type=ScreenActions.START_SELECTION;\r\n            break;\r\n        case Status.CREATE:\r\n            type=ScreenActions.CREATE_SHAPE;\r\n            payload={creator:params.creator}\r\n            break;\r\n        case Status.CANCEL:\r\n            type=ScreenActions.CANCEL;\r\n            break;\r\n        case Status.PAN:\r\n            type=ScreenActions.PAN_SCREEN;\r\n        break;\r\n        case Status.PICK:\r\n            type=ScreenActions.PICK;\r\n            payload={picker:params.picker}\r\n            break;\r\n        default:\r\n    }\r\n    return {\r\n        type,\r\n        payload\r\n    }\r\n},\r\n setSelectionType:(selType)=> {\r\n    return {\r\n        type: ScreenActions.SET_SELECTION_TYPE,\r\n        payload: selType,\r\n    }\r\n},\r\nsetSnap:(snapClass,snap)=> {\r\n    const type=snapClass==='grid'?ScreenActions.SET_GRID_SNAP:ScreenActions.SET_SNAP\r\n    const payload=snapClass==='grid'?snap:{snapClass:snapClass,snap:snap}\r\n    return {\r\n        type: type,\r\n        payload: payload,\r\n    }\r\n},\r\nsetTopLeft:(p)=>{\r\n    return {\r\n        type:ScreenActions.SET_TOP_LEFT,\r\n        payload:p\r\n    }\r\n},\r\n startPicking:(id,picker)=>{\r\n    return{\r\n        type:ScreenActions.START_PICKING,\r\n        payload:{id,picker}\r\n    }\r\n}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","export const ShapeActions={\r\n    CREATE_SHAPE:'CREATE_SHAPE',\r\n    SELECT_SHAPE:'SELECT_SHAPE',\r\n    SET_PROPERTY:'SET_PROPERTY',\r\n}\r\nexport function createShape(shapeCreator) {\r\n    return {\r\n        type: ShapeActions.CREATE_SHAPE,\r\n        payload: shapeCreator,\r\n    }\r\n}\r\nexport function setProperty(prop){\r\n    return {\r\n        type:ShapeActions.SET_PROPERTY,\r\n        payload:prop,\r\n    }\r\n}\r\n\r\n","export const Color={\r\n    BLUE:\"#0000FF\",\r\n    BLACK:\"#000000\",\r\n    GRAY:\"#D0D0D0\",\r\n    RED:\"#FF0000\",\r\n    DARK_ORANGE:\"#FFB000\",\r\n    GREEN:\"#00FF00\",\r\n    SELECTED:\"#0000FF\",\r\n    SELECTION_AREA:'#000000',\r\n    GRID:\"#909090\",\r\n    ACTIVE_POINT_MARKER:\"#FF0000\",\r\n    POINT_MARKER:\"#0000FF\",\r\n}","import { Color } from \"../colors\";\r\n\r\nexport default class ShapeStyle {\r\n    static DASH=[1,3];\r\n    static SOLID=[0];\r\n    static SELECTION=[1,1];\r\n    constructor(color=Color.BLACK,stroke=ShapeStyle.SOLID,width=1){\r\n        this.color=color;\r\n        this.originColor=this.color;\r\n        this.width=width;\r\n        this.type=stroke;\r\n        switch(stroke){\r\n            case ShapeStyle.DASH:\r\n                this.stroke=[1,3];\r\n                break;\r\n            case ShapeStyle.SOLID:\r\n                this.stroke=[0];\r\n                break;\r\n            case ShapeStyle.SELECTION:\r\n                this.stroke=[1,1];\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getColor() {\r\n        return this.color;\r\n    }\r\n\r\n    setColor(color) {\r\n        this.color = color;\r\n    }\r\n    getType(){return this.type;}\r\n    getStroke() {\r\n        return this.stroke;\r\n    }\r\n\r\n    setStroke(stroke) {\r\n        this.stroke = stroke;\r\n    }\r\n    getWidth(){\r\n        return this.width;\r\n    }\r\n    setWidth(width){\r\n        this.width=width;\r\n    }\r\n\r\n}","\r\nexport class Coord2D{\r\n    constructor(x=0,y=0){\r\n        this.x=x;\r\n        this.y=y;\r\n    }\r\n}\r\nexport class Point2D {\r\n    constructor(x=0,y=0){\r\n    this.x=x;\r\n    this.y=y;\r\n}\r\n}\r\n\r\nexport class Line{\r\n    constructor(p1,p2){\r\n        if(arguments.length===2){\r\n        this.p1=p1;\r\n        this.p2=p2;\r\n        }\r\n        if(arguments.length===4){\r\n            this.p1={x:arguments[0],y:arguments[1]}\r\n            this.p2={x:arguments[2],y:arguments[3]}\r\n        }\r\n    }\r\n\r\n}\r\nexport class SLine{\r\n    constructor(){\r\n        let param=arguments;\r\n        let createLine=(p1,p2)=>{\r\n            this.a=p1.y-p2.y;\r\n            this.b=p2.x-p1.x;\r\n            this.c=p1.x*p2.y-p1.y*p2.x;\r\n        };\r\n        switch (param.length) {\r\n            case(0):createLine(new Coord2D(),new Coord2D());break;\r\n            case(1):createLine(param[0].p1,param[0].p2);break;\r\n            case(2):createLine(param[0],param[1]);break;\r\n            case(3):this.a=param[0];this.b=param[1];this.c=param[2];break;\r\n            default:\r\n        }\r\n    }\r\n    getYbyX(x){\r\n        if(this.b!==0)return -(this.a*x+this.c)/this.b;else return NaN;\r\n    }\r\n    getXbyY(y){\r\n        if(this.a!==0)return -(this.b*y+this.c)/this.a;else return NaN;\r\n    }\r\n\r\n}\r\n\r\nexport class RLine {\r\n\r\n    constructor(p1=new Coord2D(), p2=new Coord2D()){\r\n    this.origin=p1;\r\n    this.vector=new Vector();\r\n    this.vector.x=p2.x-p1.x;\r\n    this.vector.y=p2.y-p1.y;\r\n    this.directionPoint={x:this.origin.x+this.vector.x,y:this.origin.y+this.vector.y}\r\n    }\r\n\r\n    getYbyX(x){\r\n    if(this.b!==0){\r\n        let y=-(this.a*x+this.c)/this.b;\r\n        if(((x-this.origin.x)*this.vector.x)>=0&&((y-this.origin.y)*this.vector.y)>=0)return y;\r\n        return NaN;\r\n        }\r\n    else return NaN;\r\n    }\r\n\r\n    getXbyY(y){\r\n    if(this.a!==0){\r\n        let x=-(this.b*y+this.c)/this.a;\r\n        if(((x-this.origin.x)*this.vector.x)>=0&&((y-this.origin.y)*this.vector.y)>=0)return y;\r\n        return NaN;\r\n    }else return NaN;\r\n    }\r\n\r\n}\r\n\r\nexport class Arc {\r\n    constructor(first, second, third){\r\n    this.first=first;\r\n    this.second=second;\r\n    this.third=third;\r\n    this.chord=Math.sqrt((second.x-first.x)*(second.x-first.x)+(second.y-first.y)*(second.y-first.y));\r\n}\r\n\r\n\r\n}\r\n\r\n\r\nexport class Rectangle {\r\n    constructor(topLeft=new Coord2D(),bottomRight=new Coord2D()){\r\n        this.topLeft={};\r\n        this.bottomRight={};\r\n        this.topLeft.x=topLeft.x>bottomRight.x?bottomRight.x:topLeft.x;\r\n        this.topLeft.y=topLeft.y<bottomRight.y?bottomRight.y:topLeft.y;\r\n        this.width=Math.abs(bottomRight.x-topLeft.x);\r\n        this.height=Math.abs(bottomRight.y-topLeft.y);\r\n        this.bottomRight.x=this.topLeft.x+this.width;\r\n        this.bottomRight.y=this.topLeft.y-this.height;\r\n    }\r\n    \r\n}\r\n\r\nexport class Circle {\r\n    constructor(center=new Coord2D(),radius=0){\r\n        this.center=center;\r\n        this.radius=radius;\r\n    }\r\n    \r\n}\r\n\r\nexport class Triangle {\r\n    constructor(points=[new Coord2D(),new Coord2D(),new Coord2D()]){\r\n        this.points=points;\r\n    }\r\n    getOuterCircle(){\r\n        let line1=Geometry.SLinePerpOnPoint(new SLine(this.points[0],this.points[1]),Geometry.midPoint(this.points[0],this.points[1]));\r\n        let line2=Geometry.SLinePerpOnPoint(new SLine(this.points[0],this.points[2]),Geometry.midPoint(this.points[0],this.points[2]));\r\n        let p=Intersection.SLineSLine(line1,line2);\r\n        if(p===null) p=Geometry.midPoint(this.points[0],this.points[1]);\r\n        let circle=new Circle(p,Geometry.distance(p,this.points[0]));\r\n        return circle;\r\n    }\r\n\r\n}\r\n\r\nexport class Vector {\r\n    constructor(p1=new Coord2D(),p2=new Coord2D()){\r\n    this.x=p2.x-p1.x;\r\n    this.y=p2.y-p1.y;\r\n    this.modulus=Math.sqrt(this.x*this.x+this.y*this.y);\r\n    }\r\n}\r\nexport class Intersection{\r\n    static SLineSLine(line1, line2) {\r\n        let d = line1.a * line2.b - line1.b * line2.a;\r\n        if (d === 0) return null;\r\n        let d1 = -line1.c * line2.b - (-line2.c * line1.b);\r\n        let d2 = -line2.c * line1.a - (-line1.c * line2.a);\r\n        return new Coord2D(d1 / d, d2 / d);\r\n    }\r\n    static LineSLine(line, sline) {\r\n        let p = Intersection.SLineSLine(sline, new SLine(line));\r\n        if (p === null) return null;\r\n        if (!Geometry.pointOnLine(p, line.p1, line.p2)) return null;\r\n        return p;\r\n    }\r\n    static RectangleSLine(rectTopLeft, rectBottomRight,line) {\r\n        let lines = new Array(4);\r\n        let points = [];\r\n        lines[0] = new Line(rectTopLeft.x, rectTopLeft.y, rectBottomRight.x, rectTopLeft.y);\r\n        lines[1] = new Line(rectTopLeft.x, rectBottomRight.y, rectBottomRight.x, rectBottomRight.y);\r\n        lines[2] = new Line(rectTopLeft.x, rectTopLeft.y, rectTopLeft.x, rectBottomRight.y);\r\n        lines[3] = new Line(rectBottomRight.x, rectTopLeft.y, rectBottomRight.x, rectBottomRight.y);\r\n        lines.forEach(l=> {\r\n            const p=Intersection.LineSLine(l, line)\r\n            if(p&&points.length<2) points.push(p);\r\n            });\r\n        return points;\r\n    }\r\n    static RectangleRLine(rectTopLeft, rectBottomRight,line) {\r\n        const ps=Intersection.RectangleSLine(rectTopLeft, rectBottomRight,Geometry.SLineFromRLine(line));\r\n        const points=[];\r\n        ps.forEach(p=>{if(Geometry.isPointOnRayLine(line,p)) points.push(p)});\r\n        return points;\r\n    }\r\n    static RectangleRectangle(rectTopLeft1,rectBottomRight1,rectTopLeft2,rectBottomRight2){\r\n        const lines1=[new Line(rectTopLeft1.x,rectTopLeft1.y,rectBottomRight1.x,rectTopLeft1.y),\r\n                      new Line(rectBottomRight1.x,rectTopLeft1.y,rectBottomRight1.x,rectBottomRight1.y),\r\n                      new Line(rectTopLeft1.x,rectBottomRight1.y,rectBottomRight1.x,rectBottomRight1.y),\r\n                      new Line(rectTopLeft1.x,rectTopLeft1.y,rectTopLeft1.x,rectBottomRight1.y)];\r\n        const lines2=[new Line(rectTopLeft2.x,rectTopLeft2.y,rectBottomRight2.x,rectTopLeft2.y),\r\n                      new Line(rectBottomRight2.x,rectTopLeft2.y,rectBottomRight2.x,rectBottomRight2.y),\r\n                      new Line(rectTopLeft2.x,rectBottomRight2.y,rectBottomRight2.x,rectBottomRight2.y),\r\n                      new Line(rectTopLeft2.x,rectTopLeft2.y,rectTopLeft2.x,rectBottomRight2.y)];\r\n        const ps=[];\r\n        lines1.forEach(l1=>{lines2.forEach((l2)=>{\r\n                const p=Intersection.LineLine(l1,l2);\r\n                if(p) ps.push(p);\r\n        })})   \r\n        return ps; \r\n    }\r\n    static LineRectangle(line, rectTopLeft, rectBottomRight) {\r\n        let lines = new Array(4);\r\n        let points = [];\r\n        lines[0] = new Line(rectTopLeft.x, rectTopLeft.y, rectBottomRight.x, rectTopLeft.y);\r\n        lines[1] = new Line(rectTopLeft.x, rectBottomRight.y, rectBottomRight.x, rectBottomRight.y);\r\n        lines[2] = new Line(rectTopLeft.x, rectTopLeft.y, rectTopLeft.x, rectBottomRight.y);\r\n        lines[3] = new Line(rectBottomRight.x, rectTopLeft.y, rectBottomRight.x, rectBottomRight.y);\r\n        lines.forEach(l=> {\r\n            const p=Intersection.LineLine(line, l)\r\n            if(p&&points.length<2) points.push(p);\r\n            });\r\n        return points;\r\n    }\r\n    static LineLine(l1,l2){\r\n        const p=Intersection.SLineSLine(new SLine(l1),new SLine(l2));\r\n        if(p){\r\n            if(Geometry.pointOnLine(p, l1.p1, l1.p2)&&Geometry.pointOnLine(p, l2.p1, l2.p2)) return p;\r\n        }\r\n        return null;\r\n    }\r\n    static CircleSLine(circle,line) {\r\n        let dx = -circle.center.x;\r\n        let dy = -circle.center.y;\r\n        let sline = Geometry.LineShifted(line, dx, dy);\r\n        let a = sline.a;\r\n        let b = sline.b;\r\n        let c = sline.c;\r\n        let r = circle.radius;\r\n        if (b === 0) {\r\n            a = sline.b;\r\n            b = sline.a;\r\n        }\r\n        let A = a * a + b * b;\r\n        let B = 2 * a * c;\r\n        let C = c * c - r * r * b * b;\r\n        let x = Geometry.QuadEquation(A, B, C);\r\n        if (x === null) return null;\r\n        let res = new Array(x.length);\r\n        for (let i = 0; i < x.length; i++) {\r\n            res[i] = new Coord2D();\r\n            if (sline.b === 0) {\r\n                res[i].y = x[i];\r\n                res[i].x = -(a * x[i] + c) / b;\r\n            } else {\r\n                res[i].x = x[i];\r\n                res[i].y = -(a * x[i] + c) / b;\r\n            }\r\n            res[i].x = res[i].x - dx;\r\n            res[i].y = res[i].y - dy;\r\n        }\r\n        return res;\r\n    }\r\n    static CircleRLine(circle,line) {\r\n        let points = Intersection.CircleSLine(circle, new SLine(line.origin, new Coord2D(line.origin.x+line.vector.x,line.origin.y+line.vector.y)));\r\n        if (points === null) return null;\r\n        let k = 0;\r\n        let i = 0;\r\n        for (let p of points) {\r\n\r\n            if (Geometry.isPointOnRayLine(line, p)) k++; else points[i] = null;\r\n            i++;\r\n        }\r\n        if (k === 0) return null;\r\n        let res = new Array(k);\r\n        k = 0;\r\n        for (let p of points) if (p != null) {\r\n            res[k++] = p;\r\n        }\r\n        return res;\r\n    }\r\n}\r\nexport default class Geometry {\r\n\r\n    static realToScreenLength(value, realWidth, screenWidth){\r\n        return Math.round(value/(realWidth/screenWidth));\r\n    }\r\n    static SLineFromRLine(line){\r\n        return new SLine(line.origin,new Coord2D(line.origin.x+line.vector.x,line.origin.y+line.vector.y));\r\n    }\r\n    static SLineFromLine(line){\r\n        return new SLine(line.p1,line.p2);\r\n    }\r\n    static SLineByTwoPoints(p1, p2) {\r\n        return new SLine(p1, p2);\r\n    }\r\n\r\n    static SLinePerpOnPoint(line, p) {\r\n        return new SLine(-line.b, line.a, -line.a * p.y + line.b * p.x);\r\n    }\r\n\r\n    static LineShifted(line, dx, dy) {\r\n        let p = new Array(2);\r\n        for (let i = 0; i < 2; i++) {\r\n            let x = i;\r\n            let y = line.getYbyX(x);\r\n            if (isNaN(y)) {\r\n                y = i;\r\n                x = line.getXbyY(y);\r\n            }\r\n            x = x + dx;\r\n            y = y + dy;\r\n            p[i] = new Coord2D(x, y);\r\n        }\r\n        return new SLine(p[0], p[1]);\r\n    }\r\n\r\n\r\n    static pointInRect(p, rectTopLeft, rectBottomRight) {\r\n        let sx = (p.x - rectBottomRight.x) * (p.x - rectTopLeft.x);\r\n        let sy = (p.y - rectBottomRight.y) * (p.y - rectTopLeft.y);\r\n        return (sx <= 0 && sy <= 0);\r\n    }\r\n    static pointInRectByPoints(x,y, x1,y1,x2,y2) {\r\n        if((x>=x1&&x<=x2)&&(y<=y1&&y>=y2)) return true;\r\n        return false;\r\n    }\r\n    static pointOnLine(p, p1, p2) {\r\n        if(!p||!p1||!p2)return false; \r\n        let sx = Math.round((p.x - p1.x) * (p.x - p2.x)*100000)/100000;\r\n        let sy = Math.round((p.y - p1.y) * (p.y - p2.y)*100000)/100000;\r\n        return (sx <= 0 && sy <= 0);\r\n    }\r\n\r\n    static pointOnSLineProjection(p, line){\r\n        return Intersection.SLineSLine(line,Geometry.SLinePerpOnPoint(line,p));\r\n    }\r\n    static  PointToSLineDistance(p, line){\r\n        let res=Geometry.distance(p,Geometry.pointOnSLineProjection(p, line));\r\n        return res;\r\n    }\r\n\r\n    static PointToRLineDistance(p, line){\r\n        let point=Geometry.pointOnSLineProjection(p, Geometry.SLineFromRLine(line));\r\n        let res;\r\n        if(Geometry.isPointOnRayLine(line,point)) res=Geometry.distance(p,point);else res=Geometry.distance(p,line.origin);\r\n        return res;\r\n    }\r\n    static PointToLineDistance(p, line){\r\n        let point=Geometry.pointOnSLineProjection(p, Geometry.SLineFromLine(line));\r\n        let res;\r\n        if(Geometry.pointOnLine(point,line.p1,line.p2)) res=Geometry.distance(p,point);\r\n        else res=Math.min(Geometry.distance(p,line.p1),Geometry.distance(p,line.p2));\r\n        return res;\r\n    }\r\n    static midPoint(p1, p2) {\r\n        return new Coord2D((p2.x + p1.x) / 2, (p2.y + p1.y) / 2);\r\n    }\r\n\r\n    static scalar(v1, v2) {\r\n        return v1.x * v2.x + v1.y * v2.y;\r\n    }\r\n\r\n    static modulus(v) {\r\n        return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\r\n    }\r\n\r\n    static angleVectors(v1, v2) {\r\n        return Math.acos(this.scalar(v1, v2) / (v1.modulus * v2.modulus));\r\n    }\r\n\r\n    static arcCenterPoint(p1, p2, p3) {\r\n        let line1 = new SLine(p1, p2);\r\n        let line2 = new SLine(p2, p3);\r\n        let midp1 = Geometry.midPoint(p1, p2);\r\n        let midp2 = Geometry.midPoint(p2, p3);\r\n        let pline1 = Geometry.SLinePerpOnPoint(line1, midp1);\r\n        let pline2 = Geometry.SLinePerpOnPoint(line2, midp2);\r\n        return Intersection.SLineSLine(pline1, pline2);\r\n    }\r\n\r\n    static isPointOnRayLine(line, point) {\r\n        return (((point.x - line.origin.x) * line.vector.x) >= 0 && ((point.y - line.origin.y) * line.vector.y) >= 0);\r\n    }\r\n\r\n    static arcMiddlePoint(arc) {\r\n        let mp = Geometry.midPoint(arc.first, arc.third);\r\n        let m = Math.sqrt((mp.x - arc.center.x) * (mp.x - arc.center.x) + (mp.y - arc.center.y) * (mp.y - arc.center.y));\r\n        return new Coord2D(arc.radius / m + arc.center.x, arc.radius / m + arc.center.y);\r\n    }\r\n\r\n    static arcToPointArray(arc, limit) {\r\n        if (arc.chord <= limit) {\r\n            let res = new Array(2);\r\n            res[0] = arc.first;\r\n            res[1] = arc.third;\r\n            return res;\r\n        }\r\n        let mp = Geometry.arcMiddlePoint(arc);\r\n        let first = Geometry.arcToPointArray(Geometry.arcByTwoPointsCenter(arc.first, mp, arc.center), limit);\r\n        let second = Geometry.arcToPointArray(Geometry.arcByTwoPointsCenter(mp, arc.third, arc.center), limit);\r\n        let len = first.length - 1 + second.length;\r\n        let res = new Array(len);\r\n        for (let i = 0; i <= len; i++) {\r\n            if (i < first.length - 1) res[i] = first[i];\r\n            else res[i] = second[i];\r\n        }\r\n        return res;\r\n    }\r\n\r\n    static arcByTwoPointsCenter(p1, p2, c) {\r\n        let mp = Geometry.midPoint(p1, p2);\r\n        let m = Math.sqrt((mp.x - c.x) * (mp.x - c.x) + (mp.y - c.y) * (mp.y - c.y));\r\n        let r = Math.sqrt((p1.x - c.x) * (p1.x - c.x) + (p1.y - c.y) * (p1.y - c.y));\r\n        return new Arc(p1, new Coord2D(r / m + c.x, r / m + c.y), p2);\r\n    }\r\n\r\n    static arcLength(arc) {\r\n        let v1 = new Vector(arc.center, arc.first);\r\n        let v2 = new Vector(arc.center, arc.third);\r\n        let a = Geometry.angleVectors(v1, v2);\r\n        return a * arc.radius;\r\n    }\r\n\r\n    static QuadEquation(a, b, c) {\r\n        if (a === 0) return null;\r\n        let d = b * b - 4 * a * c;\r\n        if (d < 0) return null;\r\n        let res = [];\r\n        if (d === 0) {\r\n            res = [];\r\n            res[0] = -b / (2 * a);\r\n            return res;\r\n        }\r\n        res = [];\r\n        res[0] = (-b + Math.sqrt(d)) / (2 * a);\r\n        res[1] = (-b - Math.sqrt(d)) / (2 * a);\r\n        return res;\r\n    }\r\n    static distance(p1,p2) {\r\n        return Math.sqrt((p2.x-p1.x) * (p2.x-p1.x) + (p2.y-p1.y) * (p2.y-p1.y));\r\n    }\r\n    static rotatePoint(point, angle, center){\r\n        let p=new Coord2D(point.x-center.x,point.y-center.y);\r\n        let res=new Coord2D();\r\n        res.x=p.x*Math.cos(angle)-p.y*Math.sin(angle)+center.x;\r\n        res.y=p.x*Math.sin(angle)+p.y*Math.cos(angle)+center.y;\r\n        return res;\r\n    }\r\n    static screenToReal(x,y,screenWidth,screenHeight,topLeft,bottomRight){\r\n        let realWidth=bottomRight.x-topLeft.x;\r\n        let realHeight=topLeft.y-bottomRight.y;\r\n        let rx=x/screenWidth*realWidth+topLeft.x;\r\n        let ry=topLeft.y-y/screenHeight*realHeight;\r\n        return {x:rx,y:ry};\r\n    }\r\n    static realToScreen(point,realRect, screenRect){\r\n        let ratio = realRect.width / screenRect.width;\r\n        let x = Math.round((point.x - realRect.topLeft.x) / ratio);\r\n        let y = -Math.round((point.y - realRect.topLeft.y) / ratio);\r\n        return {x,y};\r\n    }\r\n}\r\n\r\n\r\n","import {Color} from '../colors';\r\nimport ShapeStyle from './ShapeStyle';\r\nimport Geometry from '../../utils/geometry';\r\nexport default class Shape {\r\n    constructor(){\r\n        this.style=new ShapeStyle(Color.BLACK,ShapeStyle.SOLID);\r\n        this.state={selected:false,highlighted:false};\r\n        this.pointMarkers=[];\r\n        this.controlPoints=[];\r\n    }\r\n    setActivePoint(){\r\n        for(const cp of this.controlPoints) {cp.selected=false;cp.marker.setActive(false)}\r\n    }\r\n    getDistanceToControlPoints(point){\r\n        return this.controlPoints.map(cp=>Geometry.distance(point,cp.point))\r\n    }\r\n    getModel(){\r\n        return this.model;\r\n    }\r\n    setColor(color){\r\n        this.style.setColor(color);\r\n    }\r\n    getColor(){\r\n        return this.style.getColor();\r\n    }\r\n    getStyle() {\r\n        return this.style;\r\n    }\r\n\r\n    setStyle(style) {\r\n        this.style = style;\r\n    }\r\n    setState(state){\r\n        this.state={...this.state,...state};\r\n        if(this.state.selected===true) {\r\n            this.setStyle(new ShapeStyle(Color.SELECTED,ShapeStyle.SOLID,2));\r\n            this.pointMarkers=[];\r\n            for(let cp of this.controlPoints){\r\n                cp.show=true\r\n                cp.marker.setPoint(cp.point)\r\n                cp.marker.setActive(cp.selected||cp.highlighted)\r\n            }\r\n            return;\r\n        }else {\r\n            this.setStyle(new ShapeStyle(Color.BLACK,ShapeStyle.SOLID,1));\r\n            for(let cp of this.controlPoints){\r\n                cp.show=false;\r\n                cp.selected=false;\r\n                cp.highlighted=false;\r\n            }\r\n            this.pointMarkers=null;\r\n            //this.activePointMarker=null;\r\n        }\r\n        if(this.state.highlighted===true) this.setStyle(new ShapeStyle(Color.BLACK,ShapeStyle.SOLID,2));\r\n    }\r\n    getState(){\r\n        return this.state;\r\n    }\r\n    setProperty(prop){\r\n        if(prop.key==='Color') this.setColor(prop.value);\r\n    }\r\n}","import Shape from \"../Shape\";\r\nimport Geometry from \"../../../utils/geometry\";\r\n\r\nexport default class Cursor extends Shape{\r\n    constructor(point){\r\n        super();\r\n        this.p=point;\r\n    }\r\n\r\n    refresh( realRect,  screenRect){\r\n        this.p0 = Geometry.realToScreen(this.p,realRect,screenRect);\r\n    }\r\n    setCoord( point) {\r\n        this.p=point;\r\n    }\r\n    setAdditional({shiftKey,altKey}){\r\n        this.shiftKey=shiftKey;\r\n        this.altKey=altKey;\r\n    }\r\n}\r\n","import Cursor from \"./Cursor\";\r\n\r\nexport default class SelectCursor extends Cursor{\r\n\r\n    drawSelf(ctx, realRect,  screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        let size=15;\r\n        let rectSize=6;\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x-size,this.p0.y);\r\n        ctx.lineTo(this.p0.x+size,this.p0.y);\r\n        ctx.moveTo(this.p0.x,this.p0.y-size);\r\n        ctx.lineTo(this.p0.x,this.p0.y+size);\r\n        ctx.strokeRect(this.p0.x-rectSize/2,this.p0.y-rectSize/2,rectSize,rectSize);\r\n        ctx.stroke();\r\n        if(this.shiftKey&&!this.altKey) this.drawPlus(ctx,size);\r\n        if(this.altKey) this.drawMinus(ctx,size);\r\n    }\r\n    drawPlus(ctx,size){\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x+size/4,this.p0.y-size/2);\r\n        ctx.lineTo(this.p0.x+size/4+size/2,this.p0.y-size/2);\r\n        ctx.moveTo(this.p0.x+size/2,this.p0.y-size/4);\r\n        ctx.lineTo(this.p0.x+size/2,this.p0.y-size/4-size/2);\r\n        ctx.stroke();\r\n    }\r\n    drawMinus(ctx, size){\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x+size/4,this.p0.y-size/2);\r\n        ctx.lineTo(this.p0.x+size/4+size/2,this.p0.y-size/2);\r\n        ctx.stroke();\r\n    }\r\n\r\n}\r\n","export default class ShapeManager {\r\n    constructor(shapes){\r\n        this.allShapes=shapes;\r\n    }\r\n    setShapes(shapes,selType){\r\n        this.allShapes=shapes;\r\n        this.selType=selType;\r\n    }\r\n    findShapeNearPoint(p, dist){\r\n        let shape=null;\r\n        this.allShapes.forEach(s=>{\r\n            let d=s.getDistance(p);\r\n            if(d!==null&&d<=dist) {shape=s;}\r\n            s.setState({highlighted:false});\r\n        });\r\n        if(shape!==null){\r\n            shape.setState({highlighted:true});\r\n\r\n        }\r\n    }\r\n    findControlPoints(p, dist){\r\n        for(const shape of this.allShapes){\r\n            if(shape.getState().selected){\r\n                const distances=shape.getDistanceToControlPoints?shape.getDistanceToControlPoints(p):[];\r\n                let i=0;\r\n                for(const d of distances){\r\n                    if(d!==null&&d<=dist) {shape.controlPoints[i].highlighted=true}\r\n                        else {shape.controlPoints[i].highlighted=false}\r\n                    i++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    selectControlPoints(p, dist){\r\n        for(const shape of this.allShapes){\r\n            if(shape.getState().selected){\r\n                const distances=shape.getDistanceToControlPoints?shape.getDistanceToControlPoints(p):[];\r\n                let i=0;\r\n                for(const d of distances){\r\n                    if(d!==null&&d<=dist) {shape.controlPoints[i].selected=true}\r\n                    i++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    findShapeInRect(p1,p2){\r\n        let tl={...p1};\r\n        let br={...p2};\r\n        if(p1.x>p2.x) {tl.x=p2.x;br.x=p1.x}\r\n        if(p1.y<p2.y) {tl.y=p2.y;br.y=p1.y}\r\n        let shape=[];\r\n        this.allShapes.forEach(s=>{\r\n            if(!s.isInRect)return;//if method isInRect isn't implemented\r\n            const {cross,full}=s.isInRect(tl,br);\r\n            let ok=false;\r\n            if(this.selType==='fullSelect'&&full===true) ok=true;\r\n            if(this.selType==='crossSelect'&&cross===true) ok=true;\r\n            if(this.selType==='crossSelect'&&full===true) ok=true;\r\n            if(ok) {shape.push(s);}\r\n            s.setState({highlighted:false});\r\n        });\r\n        if(shape.length!==0)shape.forEach(s=>{s.setState({highlighted:true})});\r\n    }\r\n    selectShapes({shiftKey,altKey}){\r\n        if(!shiftKey&&!altKey)this.deselectShapes();\r\n        this.allShapes.forEach(shape => {\r\n            if(shape.getState().highlighted) {\r\n               shape.setState({selected:true});\r\n                if(altKey)shape.setState({selected:false});\r\n            }\r\n        }); \r\n    }\r\n    deselectShapes(){\r\n        this.allShapes.forEach(shape => shape.setState({selected:false}));\r\n    }\r\n    getSelectedShapes(){\r\n        return this.allShapes.filter((shape)=>shape.getState().selected===true);\r\n    }\r\n}","import Cursor from \"./Cursor\";\r\n\r\nexport default class DrawCursor extends Cursor{\r\n\r\n    drawSelf(ctx, realRect,  screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        let size=10;\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x-size,this.p0.y);\r\n        ctx.lineTo(this.p0.x+size,this.p0.y);\r\n        ctx.moveTo(this.p0.x,this.p0.y-size);\r\n        ctx.lineTo(this.p0.x,this.p0.y+size);\r\n        ctx.stroke();\r\n    }\r\n}\r\n","import Geometry,{Circle,Coord2D, Intersection} from \"../../utils/geometry\";\r\nimport Shape from \"./Shape\";\r\n\r\nexport default class SLineShape extends Shape{\r\n    constructor(line){\r\n        super();\r\n        this.line=line;\r\n        this.model=line;\r\n    }\r\n    drawSelf(ctx,realRect, screenRect){\r\n        this.refresh(realRect, screenRect);\r\n        if(this.p0===null||this.p1===null)return;\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x,this.p0.y);\r\n        ctx.lineTo(this.p1.x,this.p1.y);\r\n        ctx.stroke();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        let br=new Coord2D(realRect.topLeft.x+realRect.width,realRect.topLeft.y-realRect.height);\r\n        let c=Geometry.midPoint(realRect.topLeft,br);\r\n        let rad=Geometry.distance(realRect.topLeft,br)/2;\r\n        let circle=new Circle(c,rad);\r\n        let p=Intersection.CircleSLine(circle,this.line);\r\n        if(p!==null){\r\n            if(p.length===1){\r\n                let r=this.p[0];\r\n                p=new Array(2);\r\n                p[0]=r;\r\n                p[1]=p[0];\r\n                }\r\n            this.p0=Geometry.realToScreen(p[0],realRect,screenRect);\r\n            this.p1=Geometry.realToScreen(p[1],realRect,screenRect);\r\n        }else{\r\n            this.p0=null;\r\n            this.p1=null;\r\n        }\r\n    }\r\n    setActivePoint(){\r\n        this.activePoint=null;\r\n    }\r\n    getMarkers(){\r\n        return null;\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'SLine',regexp:/\\s*/});\r\n        prop.set('A',{value:this.line.a,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('B',{value:this.line.b,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('C',{value:this.line.c,regexp:/^-?\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'A':\r\n                if(!(this.line.b===0&&prop.value===0)) this.line.a=prop.value;\r\n                break;\r\n            case 'B':\r\n                if(!(this.line.a===0&&prop.value===0)) this.line.b=prop.value;\r\n                break;\r\n            case 'C':\r\n                this.line.c=prop.value;\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        return Geometry.PointToSLineDistance(point,this.line);\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        const full=false;\r\n        const cross=Intersection.RectangleSLine(topLeft,bottomRight,this.line).length>0;\r\n        return {cross,full};    \r\n    }\r\n    toString(){\r\n        return `Line ${this.line.a}X+${this.line.b}Y+${this.line.c}=0`;\r\n    }\r\n}","import Geometry from '../../../utils/geometry';\r\nexport default class SnapMarkersManager {\r\n    constructor(){\r\n        this.snapSet=new Set();\r\n        this.snapMarkersActive = new Set();\r\n        this.snapMarkersAll = new Set();\r\n        this.activeMarker=null;\r\n    }\r\n    addSnap(snapClass){\r\n        this.snapSet.add(snapClass);\r\n        this.refreshMarkerList();\r\n    }\r\n    removeSnap(snapClass){\r\n        this.snapSet.delete(snapClass);\r\n        this.refreshMarkerList();\r\n    }\r\n    addSnapMarkers(markers){\r\n        if(markers===null) return;\r\n        for(let m of markers){\r\n            this.snapMarkersAll.add(m);\r\n            if(this.snapSet.has(m.constructor)) this.snapMarkersActive.add(m);\r\n        }\r\n    }\r\n    refreshMarkerList(){\r\n        for(let m of this.snapMarkersAll)\r\n            if(this.snapSet.has(m.constructor)) this.snapMarkersActive.add(m);\r\n        for(let m of this.snapMarkersActive)\r\n            if(!this.snapSet.has(m.constructor)) this.snapMarkersActive.delete(m);\r\n    }\r\n    clear(){\r\n        this.snapMarkersAll.clear();\r\n        this.snapMarkersActive.clear();\r\n    }\r\n    getDistanceToNearestMarker(pos,minDistance){\r\n        let marker=null;\r\n        let min=minDistance;\r\n        for(let m of this.snapMarkersActive){\r\n            let d=Geometry.distance(m.getPos(),pos);\r\n            if(d<=minDistance) {\r\n                if(d<=min) {\r\n                    marker=m;\r\n                    min=d;\r\n                }\r\n            }\r\n        }\r\n        this.activeMarker=marker;\r\n        if(marker!=null)return min;else return -1;\r\n    }\r\n    getActiveMarker(){\r\n        return this.activeMarker;\r\n    }\r\n}\r\n","export default class SelectionManager {\r\n    constructor(creator){\r\n        this.creator=creator;\r\n        this.selectionCreator=new creator();\r\n    }\r\n    setNext(point){\r\n        this.selectionCreator.setNextPoint(point);\r\n    }\r\n    setCurrent(point){\r\n        this.selectionCreator.setCurrent(point);\r\n        \r\n    }\r\n    getSelectionShape(){\r\n        return this.selectionCreator.getShape();\r\n    }\r\n    reset(){\r\n        this.selectionCreator=new this.creator();\r\n    }\r\n}","import Geometry,{Rectangle} from '../../utils/geometry';\r\nimport {Color} from '../colors';\r\nimport Shape from \"./Shape\";\r\nimport ShapeStyle from './ShapeStyle';\r\n\r\nexport default class SelectRectShape extends Shape{\r\n    constructor(rectangle){\r\n        super();\r\n        this.rectangle=rectangle;\r\n        this.rect=new Rectangle()\r\n        this.setStyle(new ShapeStyle(Color.SELECTION_AREA,ShapeStyle.SELECTION));\r\n    }\r\n\r\n    drawSelf(ctx, realRect, screenRect) {\r\n        this.refresh(realRect, screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.strokeRect(this.rect.topLeft.x,this.rect.topLeft.y,this.rect.width,this.rect.height);\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.rect.topLeft=Geometry.realToScreen(this.rectangle.topLeft,realRect,screenRect);\r\n        this.rect.width=Geometry.realToScreenLength(this.rectangle.width,realRect.width,screenRect.width);\r\n        this.rect.height=Geometry.realToScreenLength(this.rectangle.height,realRect.height,screenRect.height);\r\n    }\r\n    getModel(){\r\n        return this.rectangle;\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        return list;\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n    }\r\n    toString(){\r\n        return \"RectSelection\";\r\n    }\r\n}","export default class ShapeBuilder {\r\n     constructor(boundedCircle){\r\n        this.i=0;\r\n        this.boundedCircle=boundedCircle;\r\n        this.legal=true;\r\n    }\r\n\r\n    getShape(){\r\n        return this.shape;\r\n    }\r\n    getHelperShapes(){\r\n        return this.helperShapes;\r\n    }\r\n    isNext(){\r\n        return (this.i<this.points.length);\r\n    }\r\n    setNextPoint(p){\r\n        this.setCurrent(p);\r\n        this.i++;\r\n    }\r\n\r\n    isLegal(){return this.legal}\r\n    refresh(boundedCircle){\r\n        this.boundedCircle=boundedCircle;\r\n        if(this.points[this.i]!=null) this.setControlPoints();\r\n    }\r\n    setStyle(style){\r\n        this.style=style;\r\n    }\r\n    getCurrentStep(){\r\n        return this.i;\r\n    }\r\n    getName(){\r\n        return this.name;\r\n    }\r\n}","import {Rectangle} from '../../../utils/geometry';\r\nimport SelectRectShape from '../SelectRectShape';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class SelectRectCreator extends ShapeBuilder{\r\n    static caption=\"RectSelection\";\r\n    rectangle=new Rectangle();\r\n    points=new Array(2);\r\n    constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"SelectRectCreator\"\r\n        this.shape=new SelectRectShape(this.rectangle);\r\n        this.helperShapes = [];\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0)this.rectangle=new Rectangle(this.points[0], this.points[1]);\r\n        this.shape=new SelectRectShape(this.rectangle);\r\n    }\r\n    setControlPoints(){\r\n        \r\n    }\r\n    reset(){return new SelectRectCreator();}\r\n}","import Geometry from \"../../../utils/geometry\";\r\nimport Cursor from \"./Cursor\";\r\n\r\nexport default class DragCursor extends Cursor{\r\n\r\n    drawArrow(ctx,pts){\r\n        ctx.beginPath();\r\n        ctx.moveTo(pts[0].x,pts[0].y);\r\n        ctx.lineTo(pts[1].x,pts[1].y);\r\n        ctx.moveTo(pts[2].x,pts[2].y);\r\n        ctx.lineTo(pts[1].x,pts[1].y);\r\n        ctx.moveTo(pts[1].x,pts[1].y);\r\n        ctx.lineTo(pts[3].x,pts[3].y);\r\n        ctx.stroke();\r\n    }\r\n    drawSelf(ctx, realRect,  screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=2;\r\n        let size=10;\r\n        let pts=new Array(4);\r\n        pts[0]=this.p0;\r\n        pts[1]={x:pts[0].x,y:pts[0].y-size};\r\n        pts[2]={x:pts[0].x-size/3,y:pts[0].y-size*2/3};\r\n        pts[3]={x:pts[0].x+size/3,y:pts[0].y-size*2/3};\r\n        this.drawArrow(ctx,pts);\r\n        this.drawArrow(ctx,pts.map(p=>Geometry.rotatePoint(p,Math.PI/2,this.p0)));\r\n        this.drawArrow(ctx,pts.map(p=>Geometry.rotatePoint(p,Math.PI,this.p0)));\r\n        this.drawArrow(ctx,pts.map(p=>Geometry.rotatePoint(p,Math.PI*3/2,this.p0)));\r\n\r\n    }\r\n\r\n}\r\n","import Cursor from \"./Cursor\";\r\n\r\nexport default class PickCursor extends Cursor{\r\n\r\n    drawSelf(ctx, realRect,  screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        let size=10;\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x,this.p0.y-size);\r\n        ctx.lineTo(this.p0.x,this.p0.y+size);\r\n        ctx.moveTo(this.p0.x-size,this.p0.y);\r\n        ctx.lineTo(this.p0.x+size,this.p0.y);\r\n        ctx.arc(this.p0.x,this.p0.y,10,0,2*Math.PI);\r\n        ctx.stroke();\r\n    }\r\n\r\n}\r\n","import { Status } from \"../reducers/screen\";\r\nimport Geometry, { Rectangle } from \"../utils/geometry\";\r\n\r\nexport class MouseHandler {\r\n    constructor({point,curScreenPoint}){\r\n        this.coord=point\r\n        this.curPoint=curScreenPoint;\r\n        this.prevCoord={...point}\r\n    }\r\n    isOutRect(p,screenProps){\r\n        return p.x<screenProps.marginLeft||p.x>screenProps.screenWidth-screenProps.marginRight\r\n         ||p.y<screenProps.marginTop||p.y>screenProps.screenHeight-screenProps.marginBottom;\r\n     }\r\n     move({curPoint,screenProps}){\r\n        this.prevPoint={...this.curPoint}\r\n        this.curPoint={...curPoint}\r\n\r\n        this.coord=Geometry.screenToReal(this.curPoint.x,this.curPoint.y,screenProps.screenWidth,screenProps.screenHeight,screenProps.topLeft,screenProps.bottomRight);\r\n        this.coord.x=+this.coord.x.toFixed(4);\r\n        this.coord.y=+this.coord.y.toFixed(4);\r\n\r\n        //this.coord={x:this.options.curCoord.x,y:this.options.curCoord.y};\r\n        this.mouseOnScreen=!this.isOutRect(this.curPoint,screenProps);\r\n        if(!this.mouseOnScreen){\r\n            this.curPoint.x=this.prevPoint.x;\r\n            this.curPoint.y=this.prevPoint.y;\r\n        }\r\n\r\n     }\r\n     mouseOnScreen(screenProps){\r\n         return !this.isOutRect(this.curPoint,screenProps);\r\n     }\r\n     down(){}\r\n     up(){}\r\n     leave(){\r\n         this.mouseOnScreen=false;\r\n     }\r\n     wheel({deltaY,point,screenProps}){\r\n        if(deltaY>0)\r\n        {\r\n            if(screenProps.realWidth<=1000) screenProps.actions.setScale(1.2,point);\r\n        }else{\r\n            if(screenProps.pixelRatio>=0.001) screenProps.actions.setScale(1/1.2,point);\r\n        }\r\n     }\r\n     snap(screenProps){\r\n        let temp={x:this.coord.x,y:this.coord.y};\r\n        if(screenProps.gridSnap){\r\n            let x=Math.round(temp.x/screenProps.gridStep)*screenProps.gridStep;\r\n            let y=Math.round(temp.y/screenProps.gridStep)*screenProps.gridStep;\r\n            let dx=x-temp.x;\r\n            let dy=y-temp.y;\r\n            if((Math.sqrt(dx*dx+dy*dy)<=screenProps.snapMinDist*screenProps.pixelRatio)){\r\n                if(!this.isOutRect(Geometry.realToScreen({x,y},this.getRealRect(screenProps),this.getScreenRect(screenProps)),screenProps)) {\r\n                    temp.x = x;\r\n                    temp.y = y;\r\n                    this.curPoint = Geometry.realToScreen(temp,this.getRealRect(screenProps),this.getScreenRect(screenProps));\r\n                }\r\n                }\r\n        }\r\n        if(screenProps.status!==Status.FREE){\r\n            let d = screenProps.snapMarkersManager.getDistanceToNearestMarker(temp,screenProps.snapDist*screenProps.pixelRatio);\r\n            if(d>=0&&d<=screenProps.snapMinDist*screenProps.pixelRatio){\r\n                temp=screenProps.snapMarkersManager.getActiveMarker().getPos();\r\n                this.curPoint = Geometry.realToScreen(temp,this.getRealRect(screenProps),this.getScreenRect(screenProps));\r\n            }\r\n        }\r\n        this.coord=temp;\r\n     }\r\n\r\n     getRealRect(screenProps){\r\n        let realRect = new Rectangle();\r\n        realRect.topLeft = screenProps.topLeft;\r\n        realRect.bottomRight=screenProps.bottomRight;\r\n        realRect.width = screenProps.bottomRight.x-screenProps.topLeft.x;\r\n        realRect.height=screenProps.topLeft.y-screenProps.bottomRight.y;\r\n        return realRect;\r\n    }\r\n    getScreenRect(screenProps){\r\n        let screenRect = new Rectangle();\r\n        screenRect.topLeft.x = 0;\r\n        screenRect.topLeft.y = 0;\r\n        screenRect.width = screenProps.screenWidth;\r\n        screenRect.height = screenProps.screenHeight;\r\n        return screenRect;\r\n    }\r\n\r\n}","import { MouseHandler } from \"./MouseHandler\";\r\nimport Geometry from \"../utils/geometry\";\r\nimport { Status } from \"../reducers/screen\";\r\n\r\nexport class StatusFreeHandler extends MouseHandler {\r\n    move({curPoint,screenProps,shiftKey,altKey}){\r\n        super.move({curPoint,screenProps});\r\n        screenProps.cursor.setAdditional({shiftKey,altKey});\r\n        screenProps.shapeManager.findShapeNearPoint(this.coord,screenProps.selectDist*screenProps.pixelRatio);\r\n        screenProps.shapeManager.findControlPoints(this.coord,screenProps.selectDist*screenProps.pixelRatio);\r\n        screenProps.actions.setCurCoord(this.coord,this.curPoint);\r\n    }\r\n    down({curPoint,screenProps}){\r\n        this.curPoint={...curPoint};\r\n        this.prevCoord=Geometry.screenToReal(this.curPoint.x,this.curPoint.y,screenProps.screenWidth,screenProps.screenHeight,screenProps.topLeft,screenProps.bottomRight);\r\n        screenProps.selectionManager.reset();\r\n        screenProps.selectionManager.setNext(Geometry.screenToReal(this.curPoint.x,this.curPoint.y,screenProps.screenWidth,screenProps.screenHeight,screenProps.topLeft,screenProps.bottomRight));\r\n        screenProps.actions.setScreenStatus(Status.SELECT);\r\n        screenProps.actions.setPrevCoord(this.prevCoord,this.curPoint);\r\n    }\r\n    click({screenProps,shiftKey,altKey}){\r\n        screenProps.shapeManager.selectShapes({shiftKey,altKey});\r\n        screenProps.shapeManager.selectControlPoints(this.coord,screenProps.selectDist*screenProps.pixelRatio,shiftKey);\r\n    }\r\n}","import { MouseHandler } from \"./MouseHandler\";\r\n\r\nexport class StatusPanHandler extends MouseHandler {\r\n    constructor({point,curScreenPoint}){\r\n        super({point,curScreenPoint});\r\n        this.dragX0=point.x;\r\n        this.dragY0=point.y;\r\n    }\r\n    move({curPoint,screenProps}){\r\n        //let coord=Geometry.screenToReal(curPoint.x,curPoint.y,screenProps.screenWidth,screenProps.screenHeight,screenProps.topLeft,screenProps.bottomRight);\r\n        super.move({curPoint,screenProps});\r\n        let dx=this.coord.x-this.dragX0;\r\n        let dy=this.coord.y-this.dragY0;\r\n        screenProps.actions.setTopLeft({x:screenProps.topLeft.x-dx,y:screenProps.topLeft.y-dy});\r\n        screenProps.actions.setBoundedCircle();\r\n    }\r\n    wheel(){}\r\n    leave({screenProps}){\r\n        super.leave();\r\n        screenProps.actions.setPrevStatus();\r\n    }\r\n}","import { MouseHandler } from \"./MouseHandler\";\r\n\r\nexport class StatusPickHandler extends MouseHandler {\r\n    move({curPoint,screenProps}){\r\n        super.move({curPoint,screenProps});\r\n        this.snap(screenProps);\r\n        screenProps.picker.setCurrent(this.coord);\r\n        screenProps.actions.setCurCoord(this.coord,this.curPoint);\r\n    }\r\n    click({screenProps}){\r\n        screenProps.picker.setNextPoint(screenProps.curCoord);\r\n                    if(!screenProps.picker.isNext())\r\n                    {\r\n                        screenProps.actions.setPickedData(screenProps.picker.getPickedData());\r\n                        screenProps.actions.refreshSnapMarkers();\r\n                        screenProps.actions.refreshShapeManager();\r\n                    }\r\n    }\r\n}","import { MouseHandler } from \"./MouseHandler\";\r\n\r\nexport class StatusSelectHandler extends MouseHandler {\r\n    move({curPoint,screenProps}){\r\n        super.move({curPoint,screenProps});\r\n        this.snap(screenProps);\r\n        screenProps.selectionManager.setCurrent(screenProps.curCoord);\r\n        screenProps.shapeManager.findShapeInRect(this.prevCoord,this.coord);\r\n        screenProps.actions.setCurCoord(this.coord,this.curPoint);\r\n    }\r\n    up({screenProps}){\r\n        screenProps.actions.cancel();\r\n    }\r\n}","import { MouseHandler } from \"./MouseHandler\";\r\n\r\nexport class StatusCreateHandler extends MouseHandler {\r\n    move({curPoint,screenProps}){\r\n        super.move({curPoint,screenProps});\r\n        this.snap(screenProps);\r\n        screenProps.shapeCreator.setCurrent(this.coord);\r\n        screenProps.actions.setCurCoord(this.coord,this.curPoint);\r\n    }\r\n    click({screenProps}){\r\n        screenProps.shapeCreator.setCurrent(screenProps.curCoord);\r\n        if(screenProps.shapeCreator.isLegal()) screenProps.shapeCreator.setNextPoint(screenProps.curCoord);\r\n        if(!screenProps.shapeCreator.isNext())\r\n        {\r\n            //screenProps.shapes.push(screenProps.shapeCreator.getShape());\r\n            screenProps.actions.addShape(screenProps.shapeCreator.getShape());\r\n            screenProps.actions.refreshSnapMarkers();\r\n            screenProps.actions.refreshShapeManager();\r\n            if(screenProps.cyclicCreation){\r\n                screenProps.actions.createShape(screenProps.shapeCreator.reset(screenProps.boundedCircle));\r\n            }else {\r\n                screenProps.actions.cancel();\r\n            }\r\n        }\r\n    }\r\n}","import {ScreenActions} from \"../actions/ScreenActions\";\r\nimport {ShapeActions}  from '../actions/ShapeActions';\r\nimport SelectCursor from \"../components/shapes/cursors/SelectCursor\";\r\nimport Geometry, { Circle, Coord2D, SLine } from \"../utils/geometry\";\r\nimport ShapeManager from \"../components/shapes/ShapeManager\";\r\nimport DrawCursor from \"../components/shapes/cursors/DrawCursor\";\r\nimport SLineShape from \"../components/shapes/SLineShape\";\r\nimport ShapeStyle from \"../components/shapes/ShapeStyle\";\r\nimport SnapMarkersManager from \"../components/shapes/markers/SnapMarkersManager\";\r\nimport SelectionManager from \"../components/shapes/SelectionManager\";\r\nimport SelectRectCreator from \"../components/shapes/shapecreators/SelectRectCreator\";\r\nimport DragCursor from \"../components/shapes/cursors/DragCursor\";\r\nimport PickCursor from \"../components/shapes/cursors/PickCursor\";\r\nimport { Color } from \"../components/colors\";\r\nimport { StatusFreeHandler } from \"../handlers/StatusFreeHandler\";\r\nimport { StatusPanHandler } from \"../handlers/StatusPanHandler\";\r\nimport { StatusPickHandler } from \"../handlers/StatusPickHandler\";\r\nimport { StatusSelectHandler } from \"../handlers/StatusSelectHandler\";\r\nimport { StatusCreateHandler } from \"../handlers/StatusCreateHandler\";\r\n\r\nexport const Status={\r\n    FREE:'FREE',\r\n    SELECT:'SELECT',\r\n    CREATE:'CREATE',\r\n    DRAWING:'DRAWING',\r\n    CANCEL:'CANCEL',\r\n    PAN:'PAN',\r\n    PICK:'PICK',\r\n    PICK_END:'PICK_END', \r\n    MOVETRANS:'MOVETRANS',\r\n}\r\nconst xAxeShape=new SLineShape(new SLine(0,1,0),new Circle(new Coord2D(0,0),8));\r\nconst yAxeShape=new SLineShape(new SLine(1,0,0),new Circle(new Coord2D(0,0),8));\r\nxAxeShape.setStyle(new ShapeStyle(Color.RED,ShapeStyle.SOLID));\r\nyAxeShape.setStyle(new ShapeStyle(Color.RED,ShapeStyle.SOLID));\r\n\r\nconst initialState = {\r\n    bottomRight:{x:10,y:-10},\r\n    boundedCircle:new Circle({x:0,y:0},20),\r\n    curCoord:{x:0,y:0},\r\n    curScreenPoint:{x:225,y:225},\r\n    cursor:new SelectCursor({x:0,y:0}),\r\n    curShape:null,\r\n    cyclicCreation:false,\r\n    gridSnap:false,\r\n    gridStep:1,\r\n    gridStepPixels:1,\r\n    marginTop:15,marginLeft:40,marginBottom:15,marginRight:10,\r\n    pickedData:{data:null,editId:0,fix:false},\r\n    picker:null,\r\n    prevStatus:Status.FREE,\r\n    ratio:1,pixelRatio:1,\r\n    realWidth:20,realHeight:20,\r\n    repaint:0,//random number is used to rerender all components when it's changed\r\n    screenHeight:550,\r\n    screenWidth:550,\r\n    selectedShapes:[],\r\n    selectDist:2,\r\n    selectionManager:new SelectionManager(SelectRectCreator),\r\n    selectionType:'crossSelect',\r\n    shapes:[],\r\n    shapeCreator:null,\r\n    shapeManager:new ShapeManager(),\r\n    show:{grid:true},\r\n    snap:{snapClass:null,snap:false},\r\n    snapDist:20,snapMinDist:10,\r\n    snapMarkersManager:new SnapMarkersManager(),\r\n    status:Status.FREE,\r\n    statusBar:5,\r\n    statusParams:{creator:null,picker:null},\r\n    topLeft:{x:-10,y:10},\r\n    xAxe:xAxeShape,\r\n    yAxe:yAxeShape,\r\n};\r\n//initialState.mouseHandler=new StatusFreeHandler({selectDist:initialState.selectDist,pixelRatio:initialState.pixelRatio});\r\ninitialState.mouseHandler=new StatusFreeHandler({point:initialState.curCoord,screenPoint:initialState.curScreenPoint});\r\nexport function screenReducer(state = initialState,action) {\r\n    var tl,c,br,bc,params,rh,r;\r\n    let handlerOptions={point:state.curCoord,screenPoint:state.curScreenPoint}\r\n    //delete(handlerOptions.mouseHandler);\r\n    switch (action.type) {\r\n        case ScreenActions.ADD_SHAPE:\r\n            state.shapes.push(action.payload);\r\n            return{...state};\r\n        case ScreenActions.CANCEL:\r\n            return {...state,\r\n                status:Status.FREE,\r\n                curShape:null,\r\n                curHelperShapes:null,\r\n                shapeCreator:null,\r\n                picker:null,\r\n                creationStep:\"\",\r\n                currentShape:\"\",\r\n                cursor:new SelectCursor(state.curCoord),\r\n                mouseHandler:new StatusFreeHandler(handlerOptions),\r\n                repaint:Math.random()}\r\n        case ScreenActions.CANCEL_SELECTION:\r\n            state.shapes.forEach(s=>s.setState({selected:false}))\r\n            return {...state,\r\n                status:Status.FREE,\r\n                selectedShapes:[],\r\n                curShape:null,\r\n                curHelperShapes:null,\r\n                shapeCreator:null,\r\n                picker:null,\r\n                creationStep:\"\",\r\n                currentShape:\"\",\r\n                cursor:new SelectCursor(state.curCoord),\r\n                repaint:Math.random()}\r\n        case ScreenActions.CENTER_TO_POINT:\r\n            var point=action.payload;\r\n            let viewPortWidth=state.realWidth-(state.marginLeft+state.marginRight)*state.pixelRatio;\r\n            let viewPortHeight=state.realHeight-(state.marginTop+state.marginBottom)*state.pixelRatio;\r\n            //new topLeft\r\n            tl={x:point.x-viewPortWidth/2-state.marginLeft*state.pixelRatio,y:point.y+viewPortHeight/2+state.marginTop*state.pixelRatio}\r\n            br={}\r\n            br.x=tl.x+state.realWidth;\r\n            br.y=tl.y-state.realHeight;        \r\n            //new boundedCircle\r\n            c=Geometry.screenToReal(state.screenWidth/2,state.screenHeight/2,state.screenWidth,state.screenHeight,tl,br);\r\n            r=Math.sqrt(state.realWidth*state.realWidth+state.realHeight*state.realHeight)/2;\r\n            bc=new Circle(c,r);\r\n            if(state.shapeCreator!=null) state.shapeCreator.refresh(bc);\r\n            return{...state,topLeft:tl,bottomRight:br};\r\n        case ScreenActions.CREATE_SHAPE:\r\n            return{...state,\r\n                status:Status.CREATE,\r\n                shapeCreator:action.payload,\r\n                curShape:null,\r\n                curHelperShapes:null,\r\n                cursor:new DrawCursor(state.curCoord),\r\n                mouseHandler:new StatusCreateHandler(handlerOptions)\r\n            };\r\n        case ScreenActions.DELETE_SELECTED_SHAPES:\r\n            return{...state,\r\n                shapes:state.shapes.filter((s)=>!s.getState().selected),\r\n                selectedShapes:[],\r\n                mouseHandler:new StatusFreeHandler(handlerOptions),\r\n                cursor: new SelectCursor()\r\n            };\r\n        case ScreenActions.PAN_SCREEN:\r\n            return {\r\n                ...state,\r\n                status:Status.PAN,\r\n                prevStatus:state.status,\r\n                prevCursor:state.cursor,\r\n                prevMouseHandler:state.mouseHandler,\r\n                cursor:new DragCursor(state.curCoord),\r\n                mouseHandler:new StatusPanHandler(handlerOptions)\r\n            }\r\n        case ScreenActions.REFRESH_SNAP_MARKERS:\r\n            state.snapMarkersManager.clear();\r\n            for(let s of state.shapes){\r\n                state.snapMarkersManager.addSnapMarkers(s.getMarkers());\r\n            }\r\n            return {...state}\r\n        case ScreenActions.REFRESH_SHAPE_MANAGER:\r\n                state.shapeManager=new ShapeManager(state.shapes);\r\n                return {...state}\r\n        case ScreenActions.REPAINT:\r\n            return {...state,repaint:Math.random()}\r\n        case ScreenActions.SELECT_ALL:\r\n            var selectedShapes=[];\r\n            state.shapes.forEach((s,i)=>{\r\n                            if(i>1){\r\n                                   s.setState({selected:true});\r\n                                   selectedShapes.push(s);\r\n                                }});\r\n            return{...state,selectedShapes};\r\n        case ScreenActions.SELECT_SHAPE:\r\n            return{...state,selectedShapes:action.payload};\r\n        case ScreenActions.SET_BOUNDED_CIRCLE:\r\n            c=Geometry.screenToReal(state.screenWidth/2,state.screenHeight/2,state.screenWidth,state.screenHeight,state.topLeft,state.bottomRight);\r\n            r=Math.sqrt(state.realWidth*state.realWidth+state.realHeight*state.realHeight)/2;\r\n            bc=new Circle(c,r);\r\n            if(state.shapeCreator!=null) state.shapeCreator.refresh(bc);\r\n            return{...state,boundedCircle:bc}\r\n        case ScreenActions.SET_DIMENSIONS:\r\n            params=action.payload;\r\n            rh=params.height*params.realWidth/params.width\r\n            return {...state,\r\n                screenWidth:params.width,\r\n                screenHeight:params.height,\r\n                realWidth:params.realWidth,\r\n                ratio:params.width/params.height,\r\n                pixelRatio:params.realWidth/state.screenWidth,\r\n                realHeight:rh,\r\n                bottomRight:{x:state.topLeft.x+params.realWidth,y:state.topLeft.y-rh}\r\n            }\r\n        case ScreenActions.SET_CUR_COORD:\r\n            return {...state,curCoord:{...action.payload.point},curScreenPoint:{...action.payload.screenPoint}}\r\n        case ScreenActions.SET_CYCLIC_FLAG:\r\n            return {...state,cyclicCreation:action.payload}\r\n        case ScreenActions.SET_GRID_SNAP:\r\n            return{...state,gridSnap:action.payload};\r\n        case ScreenActions.SET_GRID_VISIBLE:\r\n            return{...state,show:{grid:action.payload}};\r\n        case ScreenActions.START_PICKING:\r\n            return {...state,\r\n                status:Status.PICK,\r\n                pickedData:{data:state.pickedData.data,editId:action.payload.id},\r\n                picker:action.payload.picker,\r\n                cursor:new PickCursor(state.curCoord),\r\n                mouseHandler:new StatusPickHandler(handlerOptions)\r\n            }\r\n        case ScreenActions.START_SELECTION:\r\n            return {...state,\r\n                status:Status.SELECT,\r\n                mouseHandler:new StatusSelectHandler(handlerOptions)\r\n            }\r\n        case ScreenActions.SET_PICKED_DATA:\r\n            return {...state,status:Status.PICK_END,pickedData:{data:action.payload,editId:state.pickedData.editId}}\r\n        case ScreenActions.SET_PREV_COORD:\r\n            return {...state,prevCoord:{...action.payload.point},prevScreenPoint:{...action.payload.screenPoint}}\r\n        case ScreenActions.SET_PREV_STATUS:\r\n            return {...state,\r\n                status:state.prevStatus,\r\n                cursor:state.prevCursor,\r\n                mouseHandler:state.prevMouseHandler\r\n            }\r\n        case ShapeActions.SET_PROPERTY:\r\n            for(let shape of state.selectedShapes){\r\n               if(shape.getProperties().has(action.payload.key)) shape.setProperty({key:action.payload.key,value:action.payload.value});\r\n            }\r\n            return{...state}\r\n        case ScreenActions.SET_RATIO:\r\n            return {...state,ratio:action.payload}\r\n        case ScreenActions.SET_REAL_WIDTH:\r\n            var width=action.payload;\r\n            params=getRealWidthParams(width,state.screenWidth,state.screenHeight,state.topLeft,state.gridStep)\r\n            params.gridStepPixels=Math.round(params.gridStep/params.pixelRatio);\r\n            return {...state,...params}\r\n        case ScreenActions.SET_SCALE:\r\n            const {scale,anchor}=action.payload;\r\n            tl=state.topLeft;\r\n            let dx=anchor.x-tl.x;\r\n            let dy=anchor.y-tl.y;\r\n            //getting new realHeight,pixelRatio,gridStepPixels,bottomRight\r\n            params=getRealWidthParams(state.realWidth*scale,state.screenWidth,state.screenHeight,tl,state.gridStep)\r\n            dx=dx*scale;\r\n            dy=dy*scale;\r\n            //new topLeft\r\n            tl={x:anchor.x-dx,y:anchor.y-dy}\r\n            br={}\r\n            br.x=tl.x+params.realWidth;\r\n            br.y=tl.y-params.realHeight;\r\n            //new boundedCircle\r\n            c=Geometry.screenToReal(state.screenWidth/2,state.screenHeight/2,state.screenWidth,state.screenHeight,tl,br);\r\n            r=Math.sqrt(params.realWidth*params.realWidth+params.realHeight*params.realHeight)/2;\r\n            bc=new Circle(c,r);\r\n            if(state.shapeCreator!=null) state.shapeCreator.refresh(bc);\r\n            //new gridStep\r\n            if(params.gridStep/params.pixelRatio<10){\r\n                if (params.gridStep<1000000) params.gridStep=params.gridStep*10;\r\n                }\r\n                else if(params.gridStep/params.pixelRatio>100)\r\n                    if(params.gridStep>0.001) params.gridStep=params.gridStep/10;\r\n                            params.gridStepPixels=Math.round(params.gridStep/params.pixelRatio);\r\n            var pr=params.realWidth/state.screenWidth;\r\n            return {...state,...params,topLeft:tl,bottomRight:br,boundedCircle:bc,pixelRatio:pr}\r\n        case ScreenActions.SET_SCREEN_CONTEXT:\r\n            return{...state,context:action.payload};\r\n        case ScreenActions.SET_SELECTION_TYPE:\r\n            return {...state,selectionType:action.payload}\r\n        case ScreenActions.SET_SNAP:\r\n                if(action.payload.snap===true)state.snapMarkersManager.addSnap(action.payload.snapClass)\r\n                 else state.snapMarkersManager.removeSnap(action.payload.snapClass)\r\n            return{...state};\r\n        case ScreenActions.SET_STATUS:\r\n            return{...state,\r\n                status:action.payload.status,\r\n                prevStatus:action.payload.status,\r\n                statusParams:action.payload.params};\r\n        case ScreenActions.SET_TOP_LEFT:\r\n            var topLeft=action.payload;\r\n            var bottomRight={};\r\n            bottomRight.x=topLeft.x+state.realWidth;\r\n            bottomRight.y=topLeft.y-state.realHeight;\r\n            //boundedCircle\r\n            c=Geometry.midPoint(topLeft,bottomRight);\r\n            r=Geometry.distance(topLeft,c);\r\n            bc=new Circle(c,r);\r\n            if(state.shapeCreator!=null) state.shapeCreator.refresh(bc);\r\n            return {...state,topLeft,bottomRight,boundedCircle:bc}\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nfunction getRealWidthParams(realWidth,screenWidth,screenHeight,topLeft,gridStep){\r\n    const pr=realWidth/screenWidth;\r\n    const rh=screenHeight*pr;\r\n    const gsp=Math.round(gridStep/pr);\r\n    const br={};\r\n    br.x=topLeft.x+realWidth;\r\n    br.y=topLeft.y-rh;\r\n    return {\r\n        realWidth:realWidth,\r\n        realHeight:rh,\r\n        pixelRatio:pr,\r\n        gridStepPixels:gsp,\r\n        bottomRight:br,\r\n        gridStep\r\n    }\r\n}","const options={\r\n    devUrl:'',\r\n    _devUrl:'',\r\n}\r\nexport default options","import options from '../config'\r\nexport const AppActions={\r\n    SET_LANGUAGE:'SET_LANGUAGE',\r\n    REQUEST_LANGUAGE:'REQUEST_LANGUAGE',\r\n    SHOW_HELP:'SHOW_HELP',\r\n    SHOW_CONFIRM:'SHOW_CONFIRM',\r\n    SHOW_ALERT:'SHOW_ALERT',\r\n}\r\n\r\nexport function setLanguage(captions) {\r\n    return {\r\n        type: AppActions.SET_LANGUAGE,\r\n        payload: captions,\r\n    }\r\n}\r\nexport function requestLanguage(lang) {\r\n    return dispatch=> {\r\n        fetch(options.devUrl+'/lang',{method:'POST',\r\n                       body:JSON.stringify({lang:lang}),\r\n                       headers: {'Content-Type': 'application/json'}\r\n                        })\r\n            .then(res => res.json())\r\n            .then(capt => dispatch(setLanguage(capt)))\r\n            .catch(e => {\r\n                console.error(e)\r\n            });\r\n    }\r\n\r\n}\r\nexport function showHelp(show){\r\n    return {\r\n        type:AppActions.SHOW_HELP,\r\n        payload:show\r\n    }\r\n}\r\nexport function showConfirm(show,messageKey,okAction){\r\n    return {\r\n        type:AppActions.SHOW_CONFIRM,\r\n        payload:{show,messageKey,okAction}\r\n    }\r\n}\r\nexport function showAlert(show,messageKey){\r\n    return {\r\n        type:AppActions.SHOW_ALERT,\r\n        payload:{show,messageKey}\r\n    }\r\n}\r\nexport function blink(){\r\n    const form=document.querySelector('.modalContainer > .toolBar')\r\n    const oldColor=form.style.backgroundColor\r\n    var count=0\r\n    const int=setInterval(()=>{\r\n        if(form.style.backgroundColor===oldColor)form.style.backgroundColor='red'; \r\n            else form.style.backgroundColor=oldColor\r\n        if(++count>3) {clearInterval(int);form.style.backgroundColor=oldColor}\r\n    },40)\r\n}\r\n\r\n","export const captions={\r\n  about:{\r\n    name:\"© Takhmazov Borys, 2018-2019\",\r\n    email:\"E-Mail: tboris1983@gmail.com\",\r\n  },\r\n  user:{\r\n    name:\"\"\r\n  },\r\n  buttons:{\r\n    cancel:\"Cancel\",\r\n    logout:\"Log out\",\r\n    showPass:\"Show password\",\r\n    pick:\"Pick\"\r\n  },\r\n  registerForm:{\r\n    title:\"Sign up\",\r\n    name:\"Nickname\",\r\n    email:\"E-Mail\",\r\n    password:\"Password\",\r\n    passwordAgain:\"Password again\",\r\n    serverMessages:[\"\",\"User already exists\",\"E-Mail already exists\",\"\",\"\",\"Internal server error\"],\r\n    inputMessages:[\"Name length too short (4 char at least)\",\"Name can contain only letters, digits and _\",\r\n                    \"Password too short (6 char at least)\",\"Passwords aren't equal\",\"E-mail format incorrect\"]\r\n  },\r\n  loginForm:{\r\n    title:\"Sign in\",\r\n    name:\"Name or E-Mail\",\r\n    password:\"Password\",\r\n    regForm:\"Sign up\",\r\n    rememberMe:\"Remember me on this device\",\r\n    messages:[\"\",\"User data incorrect\",\"User isn't activated yet\",\"\",\"\",\"Internal server error. Please try again\"]\r\n  },\r\n  activation:{\r\n    title:\"Activation\",\r\n    messages:[\"Activation succeeded. You can now sign in with your login and password.\",\r\n              \"Activation code is incorrect or expired\",\"\",\"\",\"\",\"Server internal error\"]\r\n  },\r\n  title:\"Geometry editor\",\r\n  messages:{\r\n    deleteShapes:\"Delete selected shapes?\",\r\n    logout:\"Do you want to log out?\",\r\n    regSucceed:\"Registration succeeded. Please check you mailbox to activate account\"\r\n  },\r\n  create:{\r\n    createToolBar:\"Create\",\r\n    createCheckBox:\"Cyclic\",\r\n    createSLine2Points:\"Straight line\",\r\n    createRayLine2Points:\"Ray line\",\r\n    createSegmentLine2Points:\"Segment line\",\r\n    createCircleCenter:\"Circle by center\",\r\n    createCircle2P:\"Circle by 2 points\",\r\n    createCircle3P:\"Circle by 3 points\",\r\n    createRect:\"Rectangle by 2 points\",\r\n    createRectCenter:\"Rectangle by center\",\r\n    createTriangle:\"Triangle\",\r\n    createTriangleInscribed:\"Triangle inscribed in circle\",\r\n    createTriangleDescribed:\"Triangle described about circle\",\r\n    createParabola:\"Parabola\",\r\n    createHyperbola:\"Hyperbola\",\r\n    createFunction:\"User defined function\",\r\n    development:\"(in development)\"\r\n  },\r\n  modify:{\r\n    crossSelect:\"Partial selection\",\r\n    fullSelect:\"Full selection\"\r\n  },\r\n  snap:{snapToggleBar:\"Snap\",\r\n    snapGridPoints:\"Snap to grid points\",\r\n    snapEndPoints: \"Snap to end points\",\r\n    snapCenterPoints: \"Snap to center points\",\r\n    snapMiddlePoints: \"Snap to middle points\"\r\n  },\r\n  showGrid:\"Show grid\",\r\n  propBar:\"Properties\",\r\n  noShapesSelected:\"No shapes selected\",\r\n  NShapesSelected:\" shapes selected\",\r\n  deleteButton:\"Delete\",\r\n  shapes:{\r\n    Circle:{\r\n      Title:\"Circle\",\r\n      Radius:\"Radius\",\r\n      Center:\"Center\",\r\n    },\r\n    Rectangle:{\r\n      Title:\"Rectangle\",\r\n      P1:\"P1\",\r\n      P2:\"P2\",\r\n    },\r\n    Line:{\r\n      Title:\"Line\",\r\n      P1:\"P1\",\r\n      P2:\"P2\",\r\n    },\r\n    SLine:{\r\n      Title:\"Straight Line AX+BY+C=0\",\r\n      A:\"A\",\r\n      B:\"B\",\r\n      C:\"C\"\r\n    },\r\n    RLine:{\r\n      Title:\"Ray Line\",\r\n      Origin:\"Origin\",\r\n      Direction:\"Direction\",\r\n    },\r\n    Triangle:{\r\n      Title:\"Triangle\",\r\n      P1:\"P1\",\r\n      P2:\"P2\",\r\n      P3:\"P3\",\r\n    }\r\n  },\r\n  pickers:{\r\n    PointPicker:{\r\n      description:\"\",\r\n      steps:[\"Select point\"]\r\n    },\r\n    DistancePicker:{\r\n      description:\"\",\r\n      steps:[\"Select 1st point\",\"Select 2nd point\"]\r\n    },\r\n  },\r\n  creators:{\r\n    StraightLineCreator:{\r\n      description:\"Straight Line\",\r\n      steps:[\"Select 1st point\",\"Select 2nd point\"]\r\n    },\r\n    RayLineCreator:{\r\n      description:\"Ray Line\",\r\n      steps:[\"Select origin point\",\"Select direction point\"]\r\n    },\r\n    LineCreator:{\r\n      description:\"Segment Line\",\r\n      steps:[\"Select first point\",\"Select second point\"]\r\n    },\r\n    CircleCRCreator:{\r\n      description:\"Circle\",\r\n      steps:[\"Select center point\",\"Select radius point\"]\r\n    },\r\n    Circle2PCreator:{\r\n      description:\"Circle\",\r\n      steps:[\"Select first point\",\"Select second point\"]\r\n    },\r\n    Circle3PCreator:{\r\n      description:\"Circle\",\r\n      steps:[\"Select first point\",\"Select second point\",\"Select third point\"]\r\n    },\r\n    RectangleCreator:{\r\n      description:\"Rectangle\",\r\n      steps:[\"Select first point\",\"Select second point\"]\r\n    },\r\n    TriangleCreator:{\r\n      description:\"Triangle\",\r\n      steps:[\"Select first point\",\"Select second point\",\"Select third\"]\r\n    },\r\n    SelectRectCreator:{\r\n      description:\"\",\r\n      steps:[\"\",\"Specify second selection point\"]\r\n    },\r\n  },\r\n  help:{\r\n    title:'Reference',\r\n    hotKeys:[\r\n    {key:\"ESC\",desc:'Cancel'},\r\n    {key:\"Ctrl-A\",desc:'Select all'},\r\n    {key:\"Del\",desc:'Delete selected'},\r\n    {key:\"C\",desc:'View to origin'},\r\n    {key:\"Mouse wheel\",desc:'Zoom +/-'},\r\n    {key:\"Mouse middle button\",desc:'Move screen'}\r\n    ]\r\n  }\r\n}\r\n","import {AppActions} from \"../actions/AppActions\";\r\n\r\nimport {captions} from '../locale/eng';\r\nconst keys=[\r\n    {ctrlKey:true,shiftKey:false,altKey:false,keyCode:65,action:\"selectAll\",param:null},\r\n    {ctrlKey:false,shiftKey:false,altKey:false,keyCode:46,action:\"deleteConfirm\",param:null},\r\n    {ctrlKey:false,shiftKey:false,altKey:false,keyCode:67,action:\"centerToPoint\",param:{x:0,y:0}},\r\n    {ctrlKey:false,shiftKey:false,altKey:false,keyCode:27,action:\"cancelSelection\",param:null},\r\n]\r\nconst initialState={captions:captions,keyDownHandler:keys}\r\nexport function optionsReducer(state=initialState,action) {\r\n    switch (action.type) {\r\n        case AppActions.SET_LANGUAGE:\r\n            document.title=action.payload.title;\r\n            return{...state,captions:action.payload};\r\n        default:\r\n            return state\r\n    }\r\n}","export const ComponentActions={\r\n    SET_ACTIVE_SNAP_BUTTON:'SET_ACTIVE_SNAP_BUTTON',\r\n    CLEAR_ACTIVE_SNAP_BUTTON:'CLEAR_ACTIVE_SNAP_BUTTON',\r\n    SET_ACTIVE_CREATE_BUTTON:'SET_ACTIVE_CREATE_BUTTON',\r\n    SET_ACTIVE_LANG_BUTTON:'SET_ACTIVE_LANG_BUTTON',\r\n    SET_ACTIVE_SELECTION_BUTTON:'SET_ACTIVE_SELECTION_BUTTON',\r\n}\r\nexport function setActiveSnapButton(id) {\r\n    return {\r\n        type: ComponentActions.SET_ACTIVE_SNAP_BUTTON,\r\n        payload: id,\r\n    }\r\n}\r\nexport function clearActiveSnapButton(id) {\r\n    return {\r\n        type: ComponentActions.CLEAR_ACTIVE_SNAP_BUTTON,\r\n        payload: id,\r\n    }\r\n}\r\nexport function setActiveCreateButton(id) {\r\n    return {\r\n        type: ComponentActions.SET_ACTIVE_CREATE_BUTTON,\r\n        payload: id,\r\n    }\r\n}\r\nexport function setActiveSelectionButton(id) {\r\n    return {\r\n        type: ComponentActions.SET_ACTIVE_SELECTION_BUTTON,\r\n        payload: id,\r\n    }\r\n}\r\nexport function setActiveLangButton(id) {\r\n    return {\r\n        type: ComponentActions.SET_ACTIVE_LANG_BUTTON,\r\n        payload: id,\r\n    }\r\n}","\r\nimport {ComponentActions} from \"../actions/ComponentActions\";\r\nimport {ScreenActions} from \"../actions/ScreenActions\";\r\nimport {AppActions} from '../actions/AppActions';\r\nimport { Status } from \"./screen\";\r\nconst initialState={\r\n    activeLangButton:\"en\",\r\n    defaultLang:\"en\",\r\n    activeSnapButtons:new Set(),\r\n    showHelp:false,\r\n    showConfirm:{show:false,message:\"\"},\r\n    showAlert:{show:false,message:\"\"}\r\n}\r\nexport function componentReducer(state=initialState,action) {\r\n    let newState={...state};\r\n    const data=action.payload;\r\n    if(!newState.activeButtons) newState.activeButtons=new Set();\r\n    switch (action.type) {\r\n        case ScreenActions.CANCEL:\r\n            return {...newState,activeCreateButton:null}\r\n        case ComponentActions.SET_ACTIVE_CREATE_BUTTON:\r\n            newState.activeCreateButton=data;\r\n            return newState;\r\n        case ComponentActions.SET_ACTIVE_LANG_BUTTON:\r\n            newState.activeLangButton=data;\r\n            return newState;\r\n        case ComponentActions.SET_ACTIVE_SNAP_BUTTON:\r\n            newState.activeSnapButtons.add(data);\r\n            return newState;    \r\n        case ComponentActions.CLEAR_ACTIVE_SNAP_BUTTON:\r\n            newState.activeSnapButtons.delete(data);\r\n            return newState;\r\n        case ScreenActions.SET_STATUS:\r\n            if(data.status===Status.FREE) return{...state,activeCreateButton:''}\r\n            return{...state} \r\n        case AppActions.SHOW_HELP:\r\n            return {...state,showHelp:data};  \r\n        case AppActions.SHOW_CONFIRM:\r\n            return {...state,showConfirm:data};  \r\n        case AppActions.SHOW_ALERT:\r\n            return {...state,showAlert:data}; \r\n        case ScreenActions.DELETE_CONFIRM:\r\n           return{...state,showConfirm:{show:true,messageKey:\"deleteShapes\",okAction:ScreenActions.deleteSelectedShapes.bind(null,false)}}    \r\n        default:\r\n            return newState;\r\n    }\r\n}","export const UserActions={\r\n    SET_TOKEN:'SET_TOKEN',\r\n    LOGOUT:'LOGOUT',\r\n}\r\n\r\nexport function setToken(token,remember) {\r\n    return {\r\n        type: UserActions.SET_TOKEN,\r\n        payload: {token,remember},\r\n    }\r\n}\r\nexport function logout() {\r\n    return {\r\n        type: UserActions.LOGOUT,\r\n    }\r\n}\r\n\r\n","import {UserActions} from \"../actions/UserActions\";\r\nimport {captions} from '../locale/eng';\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nvar user={}\r\n//var token=localStorage.getItem('token');\r\n//if(!token) token=sessionStorage.getItem('token');\r\nvar token=document.cookie.split('=')[1];\r\nif(token) user={name:jwtDecode(token).name,token}; else user.name=captions.user.name;\r\nexport function userReducer(state=user,action) {\r\n    switch (action.type) {\r\n        case UserActions.SET_TOKEN:\r\n            if(action.payload.token) {\r\n                let expires;\r\n                if(action.payload.remember===true) expires=`;expires=Tue, 19 Jan 2099 00:00:00 GMT`;\r\n                    else expires=''\r\n                document.cookie=`token=${action.payload.token}${expires}`\r\n                user={name:jwtDecode(action.payload.token).name,token:action.payload.token}\r\n            }\r\n            else{\r\n                user.name=captions.user.name;\r\n            }\r\n            return user;\r\n        case UserActions.LOGOUT:\r\n            document.cookie='token='\r\n            return {}\r\n        default:\r\n            return state\r\n    }\r\n}","import {combineReducers} from \"redux\";\r\nimport {shapeReducer} from \"./shapes\";\r\nimport {screenReducer} from \"./screen\";\r\nimport {optionsReducer} from \"./options\";\r\nimport {componentReducer} from \"./component\";\r\nimport { userReducer } from \"./user\";\r\n\r\nexport const rootReducer=combineReducers({\r\n    shapes:shapeReducer,\r\n    screen:screenReducer,\r\n    options:optionsReducer,\r\n    user:userReducer,\r\n    components:componentReducer,\r\n});","import {createStore,applyMiddleware} from \"redux\";\r\nimport thunk from 'redux-thunk';\r\nimport { rootReducer } from '../reducers'\r\nwindow.actions=[]\r\nconst actionList=(store)=>(next)=>(action)=>{window.actions.push(action.type);return next(action)}\r\n\r\nexport const store = createStore(rootReducer,applyMiddleware(thunk,actionList));","import React from 'react';\r\nimport '../Graph.css';\r\n\r\nexport default class LangToggleButton extends React.Component{\r\n    onClick(){\r\n        if(!this.props.pressed){\r\n            this.props.requestLanguage(this.props.lang);\r\n            this.props.setActiveLangButtonId(this.props.lang);\r\n        }\r\n    }\r\n    render(){\r\n        let className=this.props.pressed?\"langToggleButtonDown\":\"langToggleButtonUp\";\r\n        return <div\r\n                id={this.props.lang}\r\n                className={className+\" noselect\"}\r\n                title={this.props.title}\r\n                onClick={this.onClick.bind(this)}\r\n                >\r\n        </div>\r\n    }\r\n}","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport '../Graph.css';\r\nimport LangToggleButton from './LangToogleButton';\r\nimport {setActiveLangButton} from '../actions/ComponentActions';\r\nimport {requestLanguage} from '../actions/AppActions';\r\n\r\nclass LangToggleBar extends React.Component{\r\n    render(){\r\n        return <div className={\"langToggleBar\"}>\r\n            <LangToggleButton \r\n                lang=\"ru\"\r\n                pressed={this.props.pressed===\"ru\"}\r\n                setActiveLangButtonId={this.props.setActiveLangButtonId}\r\n                requestLanguage={this.props.requestLanguage}\r\n                title=\"Русский\"\r\n                />\r\n            <LangToggleButton\r\n                lang=\"en\"\r\n                pressed={this.props.pressed===\"en\"}\r\n                setActiveLangButtonId={this.props.setActiveLangButtonId}\r\n                requestLanguage={this.props.requestLanguage}\r\n                title=\"English\"\r\n                />\r\n            <LangToggleButton\r\n                lang=\"fr\"\r\n                pressed={this.props.pressed===\"fr\"}\r\n                setActiveLangButtonId={this.props.setActiveLangButtonId}\r\n                requestLanguage={this.props.requestLanguage}\r\n                title=\"Français\"\r\n                />\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = store=>{\r\n    return{\r\n        pressed:store.components.activeLangButton,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch=>{\r\n    return {\r\n        setActiveLangButtonId:lang=>dispatch(setActiveLangButton(lang)),\r\n        requestLanguage:lang=>dispatch(requestLanguage(lang)),\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(LangToggleBar);","import React from 'react';\r\nimport '../Graph.css';\r\nimport {connect} from 'react-redux';\r\nimport {showHelp} from '../actions/AppActions';\r\n\r\nclass HelpButton extends React.Component{\r\n    onClick(){\r\n        this.props.showHelp(true);\r\n    }\r\n    render(){\r\n        return <button \r\n                className={\"helpButton noselect\"}\r\n                onClick={this.onClick.bind(this)}\r\n                >\r\n            ?\r\n        </button>\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        showHelp:show=>{dispatch(showHelp(show))}\r\n    }\r\n}\r\nexport default connect(null,mapDispatchToProps)(HelpButton);","import React from 'react';\r\nimport {connect} from 'react-redux'\r\nimport {NavLink} from 'react-router-dom'\r\nimport \"../Graph.css\";\r\nimport { showConfirm } from '../actions/AppActions';\r\nimport { logout } from '../actions/UserActions';\r\n\r\nclass User extends React.Component{\r\n    logout(){\r\n        this.props.showConfirm();\r\n    }\r\n    render(){\r\n        const links=!this.props.user.token?<>\r\n            <NavLink to=\"/login\"><span className=\"link\">{this.props.cap.loginForm.title}</span></NavLink>\r\n            <NavLink to=\"/register\"><span className=\"link\">{this.props.cap.registerForm.title}</span></NavLink>\r\n            </>\r\n            :<NavLink to='/' onClick={this.logout.bind(this)}><span className=\"link\">{this.props.cap.buttons.logout}</span></NavLink>\r\n        return <div className=\"user noselect\">\r\n            {this.props.user.name?this.props.user.name:''}\r\n            \r\n            {links}\r\n        </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        user:store.user,\r\n        cap:store.options.captions,\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        showConfirm:()=>dispatch(showConfirm(true,'logout',logout))\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(User)","import React from 'react';\r\nimport \"../Graph.css\";\r\nimport LangToggleBar from './LangToggleBar';\r\nimport HelpButton from './HelpButton';\r\nimport User from './User';\r\n\r\nexport default class Header extends React.Component{\r\n    render(){\r\n        return <div className={\"header\"}>\r\n            <LangToggleBar/> \r\n            <HelpButton/>\r\n            <User/>\r\n        </div>\r\n    }\r\n}","import React from \"react\";\r\nimport '../Buttons.css';\r\n\r\nexport default class ToolButton extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={pressed:props.activeButtonId===props.id}\r\n    }\r\n    onclick(){\r\n        if(this.props.params&&this.props.params.dev) return;\r\n        const pressed=this.props.activeButtonId===this.props.id;\r\n        const params=!this.props.params?{id:this.props.id}:{...this.props.params,id:this.props.id};\r\n        if(this.props.onClick)this.props.onClick({pressed,params});\r\n        if(this.props.setButtonFirst)this.props.setButtonFirst(this.props.id);\r\n    }\r\n\r\n    render(){\r\n        const pressed=this.props.activeButtonId===this.props.id;\r\n        let title=this.props.title;\r\n        if(this.props.params&&this.props.params.dev) title=`${title} ${this.props.params.dev}`\r\n        let cls=!pressed?\"toolButtonUp\":\"toolButtonDown\";\r\n        cls=cls+\" toolButton\";\r\n        return <div id={this.props.id}\r\n                    className={cls}\r\n                    onClick={this.onclick.bind(this)}\r\n                    title={title}\r\n                    \r\n                    >\r\n\r\n        </div>\r\n    }\r\n}\r\n","import React from 'react';\r\nimport '../Graph.css';\r\nimport ToolButton from \"./ToolButton\";\r\n\r\nexport default class ToolButtonGroup extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={buttons:props.buttons,firstButton:props.buttons[0].id,expanded:false};\r\n    }\r\n    onMouseEnter(){\r\n        this.setState({expanded:true});\r\n    }\r\n    onMouseLeave(){\r\n        this.setState({expanded:false});\r\n    }\r\n    setButtonFirst(id){\r\n            this.setState({firstButton:id,expanded:false});\r\n    }\r\n    render(){\r\n        let buttons=[];\r\n        const first=this.props.buttons.find((button)=>button.id===this.state.firstButton);\r\n        buttons.push(<ToolButton \r\n                            title={first.title}\r\n                            id={first.id}\r\n                            params={first.params}\r\n                            key={0}\r\n                            index={0}\r\n                            onClick={this.props.onClick}\r\n                            activeButtonId={this.props.activeButton}\r\n                            setButtonFirst={this.setButtonFirst.bind(this)}\r\n                        />);\r\n        let index=1;\r\n        this.props.buttons.forEach((button)=>{\r\n                        if(button.id!==this.state.firstButton)\r\n                            buttons.push(<ToolButton \r\n                                    title={button.title}\r\n                                    id={button.id}\r\n                                    params={button.params}\r\n                                    key={index}\r\n                                    index={index++}\r\n                                    onClick={this.props.onClick}\r\n                                    activeButtonId={this.props.activeButton}\r\n                                    setButtonFirst={this.setButtonFirst.bind(this)}\r\n                                />);\r\n                    })\r\n        let cls=\"toolButtonGroup\";\r\n        if(this.state.expanded) cls=cls+\" toolButtonGroupExpanded\"; \r\n                else cls=cls+\" toolButtonGroupCollapsed\";\r\n        return <div className={cls}\r\n                onMouseEnter={this.onMouseEnter.bind(this)}\r\n                onMouseLeave={this.onMouseLeave.bind(this)}\r\n                >\r\n             {buttons}\r\n        </div>\r\n    }\r\n}\r\n","export default class SnapMarker {\r\n    static MARKER_SIZE=5;\r\n    static SNAP_MARKER_SIZE=5; \r\n    constructor(pos){\r\n        this.pos=pos;\r\n\r\n    }\r\n    getMarker(){\r\n        return this.markerShape;\r\n    }\r\n    getPos(){\r\n        return this.pos;\r\n    }\r\n    setMarker(pos, markerShape){\r\n    this.pos=pos;\r\n    this.markerShape=markerShape;\r\n    }\r\n    refresh(realRect, screenRect){\r\n    this.markerShape.refresh(realRect,screenRect);\r\n    }\r\n}","import {Circle} from '../../../utils/geometry';\r\nimport CircleShape from '../CircleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {Color} from '../../colors';\r\nimport SnapMarker from './SnapMarker';\r\n\r\nexport default class EndSnapMarker extends SnapMarker {\r\n    static caption = \"center points\";\r\n    constructor(pos){\r\n        super(pos);\r\n        this.circle=new Circle();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.circle.center=this.getPos();\r\n        this.circle.radius=realRect.width/screenRect.width*SnapMarker.SNAP_MARKER_SIZE;\r\n        let markerShape=new CircleShape(this.circle);\r\n        markerShape.setStyle(new ShapeStyle(Color.GREEN,ShapeStyle.SOLID));\r\n        this.setMarker(this.circle.center,markerShape);\r\n        super.refresh(realRect,screenRect);\r\n    }\r\n}","import Geometry from '../../../utils/geometry';\r\nimport Shape from '../Shape';\r\nimport {Color} from '../../colors';\r\nimport SnapMarker from './SnapMarker';\r\n\r\nexport default class PointMarker extends Shape {\r\n    static caption = \"center points\";\r\n    constructor(point,active){\r\n        super();\r\n        this.point=point;\r\n        this.setActive(active);\r\n    }\r\n    setPoint(p){\r\n        this.point=p\r\n    }\r\n    setActive(active){\r\n        this.active=active\r\n        this.setColor(active?Color.ACTIVE_POINT_MARKER:Color.POINT_MARKER);\r\n    }\r\n    drawSelf(ctx, realRect, screenRect){\r\n        this.refresh(realRect, screenRect);\r\n        ctx.fillStyle=this.getStyle().getColor();\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.arc(this.center.x,this.center.y,this.radius,0,2*Math.PI);\r\n        ctx.fill();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.center=Geometry.realToScreen(this.point,realRect,screenRect);\r\n        this.radius=SnapMarker.MARKER_SIZE/2;\r\n    }\r\n}","export default class PropertyPicker {\r\n     constructor(){\r\n        this.i=0;\r\n    }\r\n\r\n    getShape(){\r\n        return this.shape;\r\n    }\r\n    getHelperShapes(){\r\n        return this.helperShapes;\r\n    }\r\n    getPickedData(){\r\n        return this.data;\r\n    }\r\n    isNext(){\r\n        return (this.i<this.points.length);\r\n    }\r\n    setNextPoint(p){\r\n        this.setCurrent(p);\r\n        this.i++;\r\n    }\r\n\r\n    refresh(boundedCircle){\r\n        this.boundedCircle=boundedCircle;\r\n        if(this.points[this.i]!=null) this.setControlPoints();\r\n    }\r\n    setStyle(style){\r\n        this.style=style;\r\n    }\r\n    getCurrentStep(){\r\n        return this.i;\r\n    }\r\n    getName(){\r\n        return this.name;\r\n    }\r\n}","import ShapeStyle from '../ShapeStyle';\r\nimport {Coord2D} from \"../../../utils/geometry\";\r\nimport PropertyPicker from './PropertyPicker';\r\nexport default class PointPicker extends PropertyPicker{\r\n    static caption=\"\";\r\n    constructor(){\r\n        super()\r\n        this.name=\"PointPicker\"\r\n        this.points=[new Coord2D()];\r\n        this.helperShapes=[];\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        this.data=point;\r\n    }\r\n    reset(){return new PointPicker(new ShapeStyle(this.style.getColor(),this.style.getType()));}\r\n}\r\n","import Geometry, {Coord2D,Line,Intersection} from '../../utils/geometry';\r\nimport EndSnapMarker from './markers/EndSnapMarker';\r\nimport MiddleSnapMarker from './markers/MiddleSnapMarker';\r\nimport Shape from \"./Shape\";\r\nimport PointMarker from './markers/PointMarker';\r\nimport PointPicker from './pickers/PointPicker';\r\n\r\nexport default class TriangleShape extends Shape{\r\n    constructor(triangle){\r\n        super();\r\n        this.p=[new Coord2D(),new Coord2D(),new Coord2D()];\r\n        this.triangle=triangle;\r\n        this.model=triangle;\r\n        this.controlPoints=[\r\n            {point:this.triangle.points[0],show:false,selected:false},\r\n            {point:this.triangle.points[1],show:false,selected:false},\r\n            {point:this.triangle.points[2],show:false,selected:false}]\r\n        for(let cp of this.controlPoints)\r\n          cp.marker=new PointMarker(cp.point,false)\r\n    }\r\n    drawSelf(ctx,realRect, screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p[0].x,this.p[0].y);\r\n        ctx.lineTo(this.p[1].x,this.p[1].y);\r\n        ctx.lineTo(this.p[2].x,this.p[2].y);\r\n        ctx.lineTo(this.p[0].x,this.p[0].y);\r\n        ctx.stroke();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        for (let i=0;i<3;i++) this.p[i]=Geometry.realToScreen(this.triangle.points[i],realRect,screenRect);\r\n        if(this.activePoint) \r\n            this.activePointMarker=new PointMarker(this.activePoint)\r\n    }\r\n    setActivePoint(key){\r\n        super.setActivePoint();\r\n        if(key==='P1') {this.controlPoints[0].selected=true;this.controlPoints[0].marker.setActive(true)}\r\n        if(key==='P2') {this.controlPoints[1].selected=true;this.controlPoints[1].marker.setActive(true)}\r\n        if(key==='P3') {this.controlPoints[2].selected=true;this.controlPoints[2].marker.setActive(true)}\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        list.push(new EndSnapMarker(this.triangle.points[0]));\r\n        list.push(new EndSnapMarker(this.triangle.points[1]));\r\n        list.push(new EndSnapMarker(this.triangle.points[2]));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(this.triangle.points[0],this.triangle.points[1])));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(this.triangle.points[1],this.triangle.points[2])));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(this.triangle.points[2],this.triangle.points[0])));\r\n        return list;\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'Triangle',regexp:/\\s*/});\r\n        prop.set('P1',{value:{x:this.triangle.points[0].x,y:this.triangle.points[0].y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('P2',{value:{x:this.triangle.points[1].x,y:this.triangle.points[1].y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('P3',{value:{x:this.triangle.points[2].x,y:this.triangle.points[2].y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'P1':\r\n                this.triangle.points[0].x=prop.value.x;\r\n                this.triangle.points[0].y=prop.value.y;\r\n                this.controlPoints[0].point=this.triangle.points[0];\r\n                break;\r\n            case 'P2':\r\n                this.triangle.points[1].x=prop.value.x;\r\n                this.triangle.points[1].y=prop.value.y;\r\n                this.controlPoints[1].point=this.triangle.points[1];\r\n                break;\r\n            case 'P3':\r\n                this.triangle.points[2].x=prop.value.x;\r\n                this.triangle.points[2].y=prop.value.y;\r\n                this.controlPoints[2].point=this.triangle.points[2];\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        let l1=new Line(this.triangle.points[0],this.triangle.points[1]);\r\n        let l2=new Line(this.triangle.points[1],this.triangle.points[2]);\r\n        let l3=new Line(this.triangle.points[2],this.triangle.points[0]);\r\n        return Math.min(Geometry.PointToLineDistance(point,l1),\r\n        Geometry.PointToLineDistance(point,l2),\r\n        Geometry.PointToLineDistance(point,l3));\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        const inRect=[Geometry.pointInRect(this.triangle.points[0],topLeft,bottomRight),\r\n                        Geometry.pointInRect(this.triangle.points[1],topLeft,bottomRight),\r\n                        Geometry.pointInRect(this.triangle.points[2],topLeft,bottomRight)];\r\n        const full=inRect.every(i=>i===true);\r\n        const ps=[Intersection.LineRectangle(new Line(this.triangle.points[0],this.triangle.points[1]),topLeft,bottomRight),\r\n                    Intersection.LineRectangle(new Line(this.triangle.points[1],this.triangle.points[2]),topLeft,bottomRight),\r\n                    Intersection.LineRectangle(new Line(this.triangle.points[2],this.triangle.points[0]),topLeft,bottomRight)];\r\n        const cross=ps.some(p=>p.length>0);\r\n        return {cross,full};    \r\n    }\r\n    toString(){\r\n        return \"Triangle\";\r\n    }\r\n}","import Geometry,{Triangle,Coord2D} from '../../../utils/geometry';\r\nimport TriangleShape from '../TriangleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {Color} from '../../colors';\r\nimport SnapMarker from './SnapMarker';\r\n\r\nexport default class MiddleSnapMarker extends SnapMarker {\r\n    static caption = \"middle points\";\r\n    constructor(pos){\r\n    super(pos);\r\n    this.triangle=new Triangle();\r\n}\r\n    refresh(realRect, screenRect){\r\n        let pos=this.getPos();\r\n        let r=realRect.width/screenRect.width*SnapMarker.SNAP_MARKER_SIZE;\r\n        let p=new Array(3);\r\n        p[0]=new Coord2D(pos.x,pos.y+r);\r\n        p[1]=Geometry.rotatePoint(p[0],Math.PI*2/3,pos);\r\n        p[2]=Geometry.rotatePoint(p[1],Math.PI*2/3,pos);\r\n        this.triangle=new Triangle(p);\r\n        let markerShape=new TriangleShape(this.triangle);\r\n        markerShape.setStyle(new ShapeStyle(Color.GREEN,ShapeStyle.SOLID));\r\n        this.setMarker(pos,markerShape);\r\n        super.refresh(realRect,screenRect);\r\n    }\r\n}","import Geometry,{Rectangle,Coord2D,Line, Intersection} from '../../utils/geometry';\r\nimport EndSnapMarker from './markers/EndSnapMarker';\r\nimport MiddleSnapMarker from './markers/MiddleSnapMarker';\r\nimport Shape from \"./Shape\";\r\nimport PointMarker from './markers/PointMarker';\r\nimport PointPicker from './pickers/PointPicker';\r\n\r\nexport default class RectangleShape extends Shape{\r\n    constructor(rectangle){\r\n        super();\r\n        this.rectangle=rectangle;\r\n        this.model=rectangle;\r\n        this.rect=new Rectangle()\r\n        this.controlPoints=[\r\n            {point:this.rectangle.topLeft,show:false,selected:false},\r\n            {point:this.rectangle.bottomRight,show:false,selected:false}]\r\n        for(let cp of this.controlPoints)\r\n          cp.marker=new PointMarker(cp.point,false)\r\n    }\r\n\r\n    drawSelf(ctx, realRect, screenRect) {\r\n        this.refresh(realRect, screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.strokeRect(this.rect.topLeft.x,this.rect.topLeft.y,this.rect.width,this.rect.height);\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.rect.topLeft=Geometry.realToScreen(this.rectangle.topLeft,realRect,screenRect);\r\n        this.rect.width=Geometry.realToScreenLength(this.rectangle.width,realRect.width,screenRect.width);\r\n        this.rect.height=Geometry.realToScreenLength(this.rectangle.height,realRect.height,screenRect.height);\r\n        if(this.activePoint) \r\n            this.activePointMarker=new PointMarker(this.activePoint)\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        list.push(new EndSnapMarker(this.rectangle.topLeft));\r\n        list.push(new EndSnapMarker(new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y)));\r\n        list.push(new EndSnapMarker(new Coord2D(this.rectangle.topLeft.x,this.rectangle.topLeft.y-this.rectangle.height)));\r\n        list.push(new EndSnapMarker(new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y-this.rectangle.height)));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(this.rectangle.topLeft,new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y))));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y),new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y-this.rectangle.height))));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(new Coord2D(this.rectangle.topLeft.x+this.rectangle.width,this.rectangle.topLeft.y-this.rectangle.height),new Coord2D(this.rectangle.topLeft.x,this.rectangle.topLeft.y-this.rectangle.height))));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(new Coord2D(this.rectangle.topLeft.x,this.rectangle.topLeft.y-this.rectangle.height),this.rectangle.topLeft)));\r\n        return list;\r\n    }\r\n    setActivePoint(key){\r\n        super.setActivePoint()\r\n        if(key==='P1') {this.controlPoints[0].selected=true;this.controlPoints[0].marker.setActive(true)}\r\n        if(key==='P2') {this.controlPoints[1].selected=true;this.controlPoints[1].marker.setActive(true)}\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'Rectangle',regexp:/\\s*/});\r\n        prop.set('P1',{value:{x:this.rectangle.topLeft.x,y:this.rectangle.topLeft.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('P2',{value:{x:this.rectangle.bottomRight.x,y:this.rectangle.bottomRight.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'P1':\r\n                this.rectangle.topLeft.x=prop.value.x;\r\n                this.rectangle.topLeft.y=prop.value.y;\r\n                this.controlPoints[0].point=this.rectangle.topLeft;\r\n                break;\r\n            case 'P2':\r\n                this.rectangle.bottomRight.x=prop.value.x;\r\n                this.rectangle.bottomRight.y=prop.value.y;\r\n                this.controlPoints[1].point=this.rectangle.bottomRight;\r\n                break;\r\n            default:\r\n        }\r\n        this.rectangle.width=this.rectangle.bottomRight.x-this.rectangle.topLeft.x;\r\n        this.rectangle.height=this.rectangle.topLeft.y-this.rectangle.bottomRight.y;\r\n    }\r\n    getDistance(point) {\r\n        let tl=this.rectangle.topLeft;\r\n        let tr=new Coord2D(tl.x+this.rectangle.width,tl.y);\r\n        let bl=new Coord2D(tl.x,tl.y-this.rectangle.height);\r\n        let br=new Coord2D(tl.x+this.rectangle.width,tl.y-this.rectangle.height);\r\n        let top=new Line(tl,tr);\r\n        let bottom=new Line(bl,br);\r\n        let right=new Line(tr,br);\r\n        let left=new Line(tl,bl);\r\n        return Math.min(Geometry.PointToLineDistance(point,top),\r\n        Geometry.PointToLineDistance(point,left),\r\n        Geometry.PointToLineDistance(point,bottom),\r\n        Geometry.PointToLineDistance(point,right));\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        const inRect=[Geometry.pointInRect(this.rectangle.topLeft,topLeft,bottomRight),\r\n                        Geometry.pointInRect(this.rectangle.bottomRight,topLeft,bottomRight)];\r\n        const full=inRect.every(i=>i===true);\r\n        const cross=Intersection.RectangleRectangle(topLeft,bottomRight,this.rectangle.topLeft,this.rectangle.bottomRight).length>0;\r\n        return {cross,full};    \r\n    }\r\n    toString(){\r\n        return \"Rectangle\";\r\n    }\r\n}","import {Rectangle} from '../../../utils/geometry';\r\nimport RectangleShape from '../RectangleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {Color} from '../../colors';\r\nimport SnapMarker from './SnapMarker';\r\nexport default class EndSnapMarker extends SnapMarker {\r\n    static caption = \"end points\";\r\n    constructor(pos){\r\n        super(pos);\r\n        this.rect=new Rectangle();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        let pos=this.getPos();\r\n        this.rect.width=realRect.width/screenRect.width*SnapMarker.SNAP_MARKER_SIZE;\r\n        this.rect.height=this.rect.width;\r\n        this.rect.topLeft.x=pos.x-this.rect.width/2;\r\n        this.rect.topLeft.y=pos.y+this.rect.height/2;\r\n        let markerShape=new RectangleShape(this.rect);\r\n        markerShape.setStyle(new ShapeStyle(Color.DARK_ORANGE,ShapeStyle.SOLID,3));\r\n        this.setMarker(pos,markerShape);\r\n        super.refresh(realRect,screenRect);\r\n    }\r\n}","import Geometry, { Intersection} from '../../utils/geometry';\r\nimport EndSnapMarker from './markers/EndSnapMarker';\r\nimport MiddleSnapMarker from './markers/MiddleSnapMarker';\r\nimport Shape from \"./Shape\";\r\nimport PointPicker from './pickers/PointPicker';\r\nimport PointMarker from './markers/PointMarker';\r\n\r\nexport default class LineShape extends Shape{\r\n    constructor(line){\r\n        super();\r\n        this.p=[];\r\n        this.p[0]=line.p1;\r\n        this.p[1]=line.p2;\r\n        this.line=line;\r\n        this.model=line;\r\n        this.controlPoints=[\r\n            {point:this.p[0],show:false,selected:false},\r\n            {point:this.p[1],show:false,selected:false}]\r\n        for(let cp of this.controlPoints)\r\n          cp.marker=new PointMarker(cp.point,false)\r\n    }\r\n    drawSelf(ctx,realRect, screenRect){\r\n        this.refresh(realRect, screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x,this.p0.y);\r\n        ctx.lineTo(this.p1.x,this.p1.y);\r\n        ctx.stroke();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.p0 = Geometry.realToScreen(this.line.p1,realRect,screenRect);\r\n        this.p1 = Geometry.realToScreen(this.line.p2, realRect, screenRect);\r\n\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        list.push(new EndSnapMarker(this.line.p1));\r\n        list.push(new EndSnapMarker(this.line.p2));\r\n        list.push(new MiddleSnapMarker(Geometry.midPoint(this.line.p1,this.line.p2)))\r\n        return list;\r\n    }\r\n    setActivePoint(key){\r\n        super.setActivePoint();\r\n        if(key==='P1') {this.controlPoints[0].selected=true;this.controlPoints[0].marker.setActive(true)}\r\n        if(key==='P2') {this.controlPoints[1].selected=true;this.controlPoints[1].marker.setActive(true)}\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'Line',regexp:/\\s*/});\r\n        prop.set('P1',{value:{x:this.line.p1.x,y:this.line.p1.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('P2',{value:{x:this.line.p2.x,y:this.line.p2.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'P1':\r\n                this.line.p1.x=prop.value.x;\r\n                this.line.p1.y=prop.value.y;\r\n                this.controlPoints[0].point=this.line.p1;\r\n                break;\r\n            case 'P2':\r\n                this.line.p2.x=prop.value.x;\r\n                this.line.p2.y=prop.value.y;\r\n                this.controlPoints[1].point=this.line.p2;\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        return Geometry.PointToLineDistance(point,this.line);\r\n    }\r\n\r\n    isInRect(topLeft,bottomRight){\r\n        const inRect=[Geometry.pointInRect(this.line.p1,topLeft,bottomRight),\r\n                        Geometry.pointInRect(this.line.p2,topLeft,bottomRight)];\r\n        const full=inRect.every(i=>i===true);\r\n        const cross=Intersection.LineRectangle(this.line,topLeft,bottomRight).length>0;\r\n        return {cross,full};    \r\n    }\r\n    toString(){\r\n            return `Line P1(${this.line.p1.x},${this.line.p1.y}) P2(${this.line.p2.x},${this.line.p2.y})`;\r\n    }\r\n\r\n}","import Geometry from '../../utils/geometry';\r\nimport Shape from \"./Shape\";\r\n\r\nexport default class TextShape extends Shape{\r\n    static CENTER=1;\r\n    constructor(text=\"\",point={x:0,y:0}){\r\n        super();\r\n        this.p=point;\r\n        this.text=text;\r\n    }\r\n    drawSelf(ctx,realRect, screenRect){\r\n        this.refresh(realRect, screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        console.log(ctx.lineWidth)\r\n        ctx.save();\r\n        ctx.font=this.font;\r\n        let basePoint={...this.p0}\r\n        if(this.anchor===TextShape.CENTER){\r\n            const width=ctx.measureText(this.text).width/2;\r\n            basePoint.x=this.p0.x-width*Math.cos(this.angle);\r\n            basePoint.y=this.p0.y-width*Math.sin(this.angle);\r\n        }\r\n        const newPoint=Geometry.rotatePoint(basePoint,this.angle,{x:0,y:0})\r\n        ctx.translate(basePoint.x-newPoint.x,basePoint.y-newPoint.y);\r\n        ctx.rotate(this.angle);\r\n        ctx.strokeText(this.text,basePoint.x,basePoint.y);\r\n        ctx.restore();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.p0 = Geometry.realToScreen(this.p,realRect,screenRect);\r\n    }\r\n    rotate(angle){\r\n        this.angle=angle;\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        return list;\r\n    }\r\n    setText(text){\r\n        this.text=text;\r\n    }\r\n    setFont(font){\r\n        this.font=font;\r\n    }\r\n    setPoint(point){\r\n        this.p=point;\r\n    }\r\n    setAnchor(anchor){\r\n        this.anchor=anchor;\r\n    }\r\n    setActivePoint(key){\r\n        this.activePoint=null;\r\n        if(key==='P1') this.activePoint=this.p;\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'P1':\r\n                this.line.p1.x=prop.value.x;\r\n                this.line.p1.y=prop.value.y;\r\n                break;\r\n            case 'P2':\r\n                this.line.p2.x=prop.value.x;\r\n                this.line.p2.y=prop.value.y;\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        return null\r\n        //return Geometry.PointToLineDistance(point,this.line);\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        return {cross:false,full:false}\r\n        // const inRect=[Geometry.pointInRect(this.p,topLeft,bottomRight),\r\n        //                 Geometry.pointInRect(this.line.p2,topLeft,bottomRight)];\r\n        // const full=inRect.every(i=>i===true);\r\n        // const cross=Intersection.LineRectangle(this.line,topLeft,bottomRight).length>0;\r\n        // return {cross,full};    \r\n    }\r\n    toString(){\r\n            return `Line P1(${this.line.p1.x},${this.line.p1.y}) P2(${this.line.p2.x},${this.line.p2.y})`;\r\n    }\r\n\r\n}","import LineShape from '../LineShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport Geometry, {Line,Coord2D,Circle, Vector} from \"../../../utils/geometry\";\r\nimport {Color} from '../../colors';\r\nimport PropertyPicker from './PropertyPicker';\r\nimport TextShape from '../TextShape';\r\nexport default class DistancePicker extends PropertyPicker{\r\n    static caption=\"\";\r\n    constructor(style=new ShapeStyle(Color.BLACK,ShapeStyle.DASH)){\r\n        super()\r\n        this.name=\"DistancePicker\"\r\n        this.line=new Line(new Coord2D(),new Coord2D());\r\n        this.boundedCircle=new Circle(new Coord2D(),0);\r\n        this.points=[new Coord2D(),new Coord2D()];\r\n        this.shape=new LineShape(this.line);\r\n        this.text=new TextShape();\r\n        this.text.setAnchor(TextShape.CENTER)\r\n        this.text.setFont('10px sans-serif')\r\n        this.style=style;\r\n        this.shape.setStyle(style);\r\n        this.helperShapes=[this.text];\r\n        this.xAxe=new Vector({x:1,y:0},{x:0,y:0})\r\n        //this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        //this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0)this.line=new Line(this.points[0],this.points[1]);\r\n        this.data=Geometry.distance(this.points[0],this.points[1]);\r\n        this.shape=new LineShape(this.line);\r\n        this.shape.setStyle(this.style);\r\n        this.text.setText(this.data.toFixed(4))\r\n        this.text.setPoint(Geometry.midPoint(this.points[0],this.points[1]))\r\n        let angle=Geometry.angleVectors(new Vector(this.points[1],this.points[0]),this.xAxe);\r\n        if(angle<Math.PI/2)angle=angle*Math.sign(this.points[0].y-this.points[1].y);\r\n            else angle=(Math.PI-angle)*Math.sign(this.points[1].y-this.points[0].y);\r\n        this.text.rotate(angle);\r\n\r\n        this.setControlPoints();\r\n    }\r\n    setControlPoints(){\r\n        //this.helperShapes[0]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        //this.helperShapes[1]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        //this.helperShapes[0].setColor(Color.BLUE);\r\n        //this.helperShapes[1].setColor(Color.BLUE);\r\n    }\r\n    reset(){return new DistancePicker(new ShapeStyle(this.style.getColor(),this.style.getType()));}\r\n}\r\n","import {Coord2D} from \"../../utils/geometry\";\r\nimport Geometry from \"../../utils/geometry\";\r\nimport CenterSnapMarker from './markers/CenterSnapMarker';\r\nimport Shape from \"./Shape\";\r\nimport PointMarker from \"./markers/PointMarker\";\r\nimport PointPicker from './pickers/PointPicker'\r\nimport DistancePicker from './pickers/DistancePicker'\r\nimport ShapeStyle from \"./ShapeStyle\";\r\nexport default class CircleShape extends Shape{\r\n    constructor(circle){\r\n        super();\r\n        this.p=new Coord2D();\r\n        this.circle=circle;\r\n        this.model=circle;\r\n        this.setStyle(new ShapeStyle())\r\n        this.controlPoints=[{point:circle.center,show:false,selected:false}];\r\n        for(let cp of this.controlPoints)\r\n                cp.marker=new PointMarker(cp.point,false)\r\n    }\r\n\r\n    drawSelf(ctx, realRect, screenRect){\r\n        this.refresh(realRect, screenRect);\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.arc(this.screenCenter.x,this.screenCenter.y,this.screenRadius,0,2*Math.PI);\r\n        ctx.stroke();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        this.screenCenter=Geometry.realToScreen(this.circle.center,realRect,screenRect);\r\n        this.screenRadius=Geometry.realToScreenLength(this.circle.radius,realRect.width,screenRect.width);\r\n        if(this.activePoint) \r\n            this.activePointMarker=new PointMarker(this.activePoint)\r\n\r\n    }\r\n    setActivePoint(key){\r\n        super.setActivePoint();\r\n        if(key==='Center') {this.controlPoints[0].selected=true;this.controlPoints[0].marker.setActive(true);}\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        list.push(new CenterSnapMarker(this.circle.center));\r\n        return list;\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'Circle',regexp:/\\s*/});\r\n        prop.set('Center',{value:{x:this.circle.center.x,y:this.circle.center.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('Radius',{value:this.circle.radius,picker:DistancePicker,regexp:/^\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'Center':\r\n                this.circle.center.x=prop.value.x;\r\n                this.circle.center.y=prop.value.y;\r\n                this.controlPoints[0].point=this.circle.center;\r\n                break;\r\n            case 'Radius':\r\n                this.circle.radius=prop.value;\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        return Math.abs(Geometry.distance(point,this.circle.center)-this.circle.radius);\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        const outRectX1=topLeft.x-this.circle.radius;\r\n        const outRectY1=topLeft.y+this.circle.radius;\r\n        const outRectX2=bottomRight.x+this.circle.radius;\r\n        const outRectY2=bottomRight.y-this.circle.radius;\r\n        const inRectX1=topLeft.x+this.circle.radius;\r\n        const inRectY1=topLeft.y-this.circle.radius;\r\n        const inRectX2=bottomRight.x-this.circle.radius;\r\n        const inRectY2=bottomRight.y+this.circle.radius;\r\n        const c=this.circle.center;\r\n        let cross=false;\r\n        const signs=[Math.sign(Geometry.distance(c,{x:topLeft.x,y:topLeft.y})-this.circle.radius),\r\n                     Math.sign(Geometry.distance(c,{x:bottomRight.x,y:topLeft.y})-this.circle.radius),\r\n                     Math.sign(Geometry.distance(c,{x:bottomRight.x,y:bottomRight.y})-this.circle.radius),\r\n                     Math.sign(Geometry.distance(c,{x:topLeft.x,y:bottomRight.y})-this.circle.radius)];\r\n        if(signs.every(x=>x<0)) return {cross:false,full:false};\r\n        let full=Geometry.pointInRectByPoints(c.x,c.y,inRectX1,inRectY1,inRectX2,inRectY2);\r\n        if(full===true) return {cross:false,full:true}\r\n        if(Geometry.pointInRectByPoints(c.x,c.y,outRectX1,outRectY1,outRectX2,outRectY2)){\r\n                cross=true;\r\n                if(Geometry.pointInRectByPoints(c.x,c.y,outRectX1,outRectY1,topLeft.x,topLeft.y)){\r\n                    if(Geometry.distance(c,{x:topLeft.x,y:topLeft.y})>this.circle.radius) cross=false;\r\n                }\r\n                if(Geometry.pointInRectByPoints(c.x,c.y,bottomRight.x,outRectY1,outRectX2,topLeft.y)){\r\n                    if(Geometry.distance(c,{x:bottomRight.x,y:topLeft.y})>this.circle.radius) cross=false;\r\n                }\r\n                if(Geometry.pointInRectByPoints(c.x,c.y,bottomRight.x,bottomRight.y,outRectX2,outRectY2)){\r\n                    if(Geometry.distance(c,{x:bottomRight.x,y:bottomRight.y})>this.circle.radius) cross=false;\r\n                }\r\n                if(Geometry.pointInRectByPoints(c.x,c.y,outRectX1,bottomRight.y,topLeft.x,outRectY2)){\r\n                    if(Geometry.distance(c,{x:topLeft.x,y:bottomRight.y})>this.circle.radius) cross=false;\r\n                }\r\n            }\r\n        return {cross:cross,full:false}\r\n    }\r\n    toString(){\r\n        return \"Center(\"+this.circle.center.x+\",\"+this.circle.center.y+\") radius(\"+this.circle.radius+\")\";\r\n    }\r\n\r\n}","import React from 'react';\r\nimport '../Graph.css';\r\nimport Geometry, {Coord2D, Point2D,Rectangle} from '../utils/geometry.js';\r\nimport ShapeStyle from './shapes/ShapeStyle';\r\nimport {Color} from './colors';\r\nimport { Status } from '../reducers/screen';\r\nimport TextShape from './shapes/TextShape';\r\nexport default class Screen extends React.Component {\r\n    static MARKER_SIZE=0.005;\r\n    static SNAP_MARKER_SIZE=5;\r\n    curPoint=new Point2D();\r\n    prevPoint=new Point2D();\r\n    gridStep=1;gridStepPixels=1;dragGrid=false;\r\n    gridPointsX=[];gridPointsY=[];\r\n    gridNumbersX=[];gridNumbersY=[];\r\n    dragX0=0;dragY0=0;\r\n    drag=false;lbut=0o00;mbut=0o01;\r\n    constructor(props){\r\n        super(props);\r\n        window.KEYDOWNHANDLE=true\r\n        this.refCanvas=React.createRef()\r\n    }\r\n\r\n    getRealRect(){\r\n        let realRect = new Rectangle();\r\n        realRect.topLeft = this.props.topLeft;\r\n        realRect.bottomRight=this.props.bottomRight;\r\n        realRect.width = this.props.bottomRight.x-this.props.topLeft.x;\r\n        realRect.height=this.props.topLeft.y-this.props.bottomRight.y;\r\n        return realRect;\r\n    }\r\n    getScreenRect(){\r\n        let screenRect = new Rectangle();\r\n        screenRect.topLeft.x = 0;\r\n        screenRect.topLeft.y = 0;\r\n        screenRect.width = this.props.screenWidth;\r\n        screenRect.height = this.props.screenHeight;\r\n        return screenRect;\r\n    }\r\n\r\n    test(){\r\n        const text=new TextShape('Text',{x:0,y:0})\r\n        text.setStyle(new ShapeStyle(Color.BLACK,ShapeStyle.SOLID))\r\n        text.rotate(45*Math.PI/180)\r\n        this.props.shapes.push(text);\r\n    }\r\n\r\n    drawCursor(ctx){\r\n      this.props.cursor.setCoord(this.props.curCoord);\r\n      this.drawShape(this.props.cursor,ctx);\r\n    }\r\n    drawGrid(ctx){\r\n        ctx.strokeStyle=Color.GRID;\r\n        let solidStyle=new ShapeStyle(Color.GRAY,ShapeStyle.SOLID);\r\n        let dashStyle=new ShapeStyle(Color.GRAY,ShapeStyle.DASH);\r\n        let firstX=Math.round(this.props.topLeft.x/this.props.gridStep)*this.props.gridStep;\r\n        let firstY=Math.round(this.props.topLeft.y/this.props.gridStep)*this.props.gridStep;\r\n        let hor=false;\r\n        let vert=false;\r\n        let ix=0;\r\n        let iy=0;\r\n        let xGridLineNumber=Math.round(firstX/this.props.gridStep);\r\n        let yGridLineNumber=Math.round(firstY/this.props.gridStep);\r\n        let gridLinesCountX=Math.round(this.props.realWidth/this.props.gridStep);\r\n        let gridLinesCountY=Math.round(this.props.realHeight/this.props.gridStep);\r\n        this.gridPointsX=new Array(gridLinesCountX);\r\n        this.gridPointsY=new Array(gridLinesCountY);\r\n        this.gridNumbersX=new Array(gridLinesCountX);\r\n        this.gridNumbersY=new Array(gridLinesCountY);\r\n        while(!hor||!vert){\r\n            if(!hor){\r\n                let x=firstX+this.props.gridStep*ix;\r\n                let px=Geometry.realToScreen(new Coord2D(x,this.props.topLeft.y),this.getRealRect(),this.getScreenRect());\r\n                if(xGridLineNumber%10===0) ctx.setLineDash(solidStyle.getStroke());else ctx.setLineDash(dashStyle.getStroke());\r\n\r\n                if(this.props.show.grid) {\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(px.x, 0);\r\n                    ctx.lineTo(px.x, this.props.screenHeight);\r\n                    ctx.stroke();\r\n                }\r\n                this.gridPointsX[ix]=px.x;\r\n                this.gridNumbersX[ix]=x;\r\n                ix++;\r\n                xGridLineNumber++;\r\n                if(x>(this.props.topLeft.x+this.props.realWidth))hor=true;\r\n            }\r\n            if(!vert){\r\n                let y=firstY-this.props.gridStep*iy;\r\n                let py=Geometry.realToScreen(new Coord2D(this.props.topLeft.x,y),this.getRealRect(),this.getScreenRect());\r\n                if(yGridLineNumber%10===0) ctx.setLineDash(solidStyle.getStroke());else ctx.setLineDash(dashStyle.getStroke());\r\n                yGridLineNumber--;\r\n                if(this.props.show.grid) {\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(0, py.y);\r\n                    ctx.lineTo(this.props.screenWidth, py.y);\r\n                    ctx.stroke();\r\n                }\r\n                this.gridPointsY[iy]=py.y;\r\n                this.gridNumbersY[iy]=y;\r\n                iy++;\r\n                if(y<(this.props.topLeft.y-this.props.realHeight))vert=true;\r\n            }\r\n\r\n        }\r\n        ctx.setLineDash(solidStyle.getStroke());\r\n    }\r\n    drawCoordinates(ctx){\r\n        ctx.font=\"10px sans-serif\";\r\n        ctx.strokeStyle=\"black\";\r\n        let i=0;\r\n        let format=0;\r\n        let w;\r\n        if(this.props.gridStep>=0.001){format=3;}\r\n        if(this.props.gridStep>=0.01){format=2;}\r\n        if(this.props.gridStep>=0.1){format=1;}\r\n        if(this.props.gridStep>=1){format=0;}\r\n        let l=0;\r\n        let s0=\"\";//Finding out the number with maximum length\r\n        for(let x of this.gridNumbersX){\r\n            if(x===null) continue;\r\n             let s=x.toFixed(format);\r\n            if(l<s.length){s0=s;l=s.length;}\r\n            }\r\n        w=ctx.measureText(s0).width;\r\n        for(let x of this.gridPointsX){\r\n            if(x===null) continue;\r\n            if(x>this.props.marginLeft&&x<this.props.screenWidth-this.props.marginRight) {\r\n                 let s=this.gridNumbersX[i].toFixed(format);\r\n                 let d=1;\r\n                 let r=w/this.props.gridStepPixels;\r\n                 if(r>=1)d=2;\r\n                 if(r>=1.5)d=5;\r\n                 if(Math.round(this.gridNumbersX[i]/this.props.gridStep)%d===0)\r\n                    ctx.strokeText(s,x-ctx.measureText(s).width/2,this.props.marginTop - 5);\r\n            }\r\n            i++;\r\n        }\r\n        i=0;\r\n        for(let y of this.gridPointsY){\r\n            if(y===null) continue;\r\n            if(y>this.props.marginTop&&y<this.props.screenHeight-this.props.marginBottom){\r\n                let s=this.gridNumbersY[i].toFixed(format);\r\n                w=ctx.measureText(s).width;\r\n                let h=ctx.measureText(\"12\").width;\r\n                let d=1;\r\n                let r=h/this.props.gridStepPixels;\r\n                if(r>0.8&&r<1.5)d=2;\r\n                if(r>=1.5)d=5;\r\n                if(Math.round(this.gridNumbersY[i]/this.props.gridStep)%d===0)\r\n                    ctx.strokeText(s,this.props.marginLeft-w,y+h/3);\r\n                }\r\n             i++;\r\n        }\r\n    }\r\n    drawShape(s, ctx){\r\n        s.drawSelf(ctx,this.getRealRect(), this.getScreenRect());\r\n    }\r\n    paint(ctx){\r\n        ctx.fillStyle=\"white\";\r\n        ctx.lineWidth=1;\r\n        ctx.lineJoin='round';\r\n        ctx.fillRect(0, 0, this.props.screenWidth, this.props.screenHeight);\r\n        this.drawGrid(ctx);\r\n        this.drawShape(this.props.xAxe,ctx)\r\n        this.drawShape(this.props.yAxe,ctx)\r\n        let status_bar=`X=${this.props.curCoord.x.toFixed(3)} Y=${this.props.curCoord.y.toFixed(3)} `;\r\n        let currentShape='';\r\n        if(this.props.shapeCreator) currentShape=this.props.captions.creators[this.props.shapeCreator.getName()].description;\r\n        let creationStep='';\r\n        if(this.props.status===Status.CREATE) \r\n            {\r\n            creationStep=this.props.captions.creators[this.props.shapeCreator.getName()].steps[this.props.shapeCreator.getCurrentStep()];\r\n            status_bar=status_bar+`${currentShape}: ${creationStep}`;\r\n            }\r\n        if(this.props.shapeCreator){\r\n            let curHelperShapes=null;\r\n            curHelperShapes=this.props.shapeCreator.getHelperShapes();\r\n            if(curHelperShapes!=null)\r\n            for(let shape of curHelperShapes)\r\n                this.drawShape(shape, ctx);\r\n            let curShape=null;\r\n            curShape=this.props.shapeCreator.getShape();\r\n            if(curShape!=null) this.drawShape(curShape, ctx);\r\n        }\r\n        if(this.props.status===Status.PICK) {\r\n            creationStep=this.props.captions.pickers[this.props.picker.getName()].steps[this.props.picker.getCurrentStep()];\r\n            status_bar=status_bar+`${creationStep}`;\r\n\r\n             }\r\n        if(this.props.picker){\r\n            const pickShape=this.props.picker.getShape();\r\n            if(pickShape!=null) this.drawShape(pickShape, ctx);   \r\n            const pickHelperShapes=this.props.picker.getHelperShapes();\r\n            if(pickHelperShapes!=null)\r\n            for(let shape of pickHelperShapes)\r\n                this.drawShape(shape, ctx);\r\n        }\r\n        for(let shape of this.props.shapes){\r\n                this.drawShape(shape,ctx);\r\n                for(let cp of shape.controlPoints)\r\n                        if(cp.show)this.drawShape(cp.marker,ctx);\r\n            }\r\n         \r\n        ctx.lineWidth=1;\r\n        ctx.setLineDash(ShapeStyle.SOLID);\r\n        ctx.fillStyle=\"white\";\r\n        //fill margin\r\n        ctx.fillRect(0, 0, this.props.screenWidth-this.props.marginRight,this.props.marginTop);\r\n        ctx.fillRect(0,0, this.props.marginLeft,this.props.screenHeight);\r\n        ctx.fillRect(this.props.screenWidth-this.props.marginRight, 0, this.props.screenWidth,this.props.screenHeight);\r\n        ctx.fillRect(this.props.marginLeft, this.props.screenHeight-this.props.marginBottom, this.props.screenWidth-this.props.marginRight,this.props.screenHeight-this.props.marginTop);\r\n        ctx.strokeStyle=\"black\";\r\n        ctx.strokeRect(this.props.marginLeft, this.props.marginTop, this.props.screenWidth-this.props.marginRight-this.props.marginLeft,this.props.screenHeight-this.props.marginBottom-this.props.marginTop);\r\n        this.drawCoordinates(ctx);\r\n        ctx.font=\"12px sans-serif\";\r\n        ctx.strokeText(status_bar,this.props.marginLeft,this.props.screenHeight-this.props.statusBar);\r\n        if(this.props.status!==Status.FREE){\r\n            let marker=this.props.snapMarkersManager.getActiveMarker();\r\n            if(marker!=null) {\r\n                marker.refresh(this.getRealRect(), this.getScreenRect());\r\n                this.drawShape(marker.getMarker(), ctx);\r\n            }\r\n        }\r\n        ctx.lineWidth=1;\r\n        if(this.props.status===Status.SELECT){\r\n            this.drawShape(this.props.selectionManager.getSelectionShape(),ctx);\r\n        }\r\n        if(this.props.mouseHandler.mouseOnScreen)this.drawCursor(ctx);\r\n    }\r\n\r\n    isOutRect(p){\r\n       return p.x<this.props.marginLeft||p.x>this.props.screenWidth-this.props.marginRight\r\n        ||p.y<this.props.marginTop||p.y>this.props.screenHeight-this.props.marginBottom;\r\n    }\r\n    mmoveHandle(e){\r\n        let rect=e.target.getBoundingClientRect();\r\n        let curPoint={x:e.clientX-rect.left,y:e.clientY-rect.top};\r\n        this.props.mouseHandler.move({curPoint,screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey})\r\n    }\r\n    mmove(e){\r\n        let rect=e.target.getBoundingClientRect();\r\n        let curPoint={x:e.clientX-rect.left,y:e.clientY-rect.top};\r\n        this.mouseOnScreen=!this.isOutRect(curPoint);\r\n        let coord={x:this.props.curCoord.x,y:this.props.curCoord.y};\r\n\r\n        if(this.props.status===Status.PAN){\r\n            coord=Geometry.screenToReal(curPoint.x,curPoint.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight);\r\n            let dx=curPoint.x-this.dragX0;\r\n            let dy=curPoint.y-this.dragY0;\r\n            this.dragX0=curPoint.x\r\n            this.dragY0=curPoint.y\r\n            const rdx=this.props.realWidth*dx/this.props.screenWidth;\r\n            const rdy=this.props.realHeight*dy/this.props.screenHeight;\r\n            this.props.actions.setTopLeft({x:this.props.topLeft.x-rdx,y:this.props.topLeft.y+rdy});\r\n            this.props.actions.setBoundedCircle();\r\n            return;\r\n        }\r\n        if(this.isOutRect(curPoint)){\r\n            curPoint.x=this.prevPoint.x;\r\n            curPoint.y=this.prevPoint.y;\r\n        }\r\n        coord=Geometry.screenToReal(curPoint.x,curPoint.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight);\r\n        coord.x=+coord.x.toFixed(4);\r\n        coord.y=+coord.y.toFixed(4);\r\n        this.prevPoint.x=curPoint.x;\r\n        this.prevPoint.y=curPoint.y;\r\n        let temp={x:coord.x,y:coord.y};\r\n        if(this.props.gridSnap&&this.props.status!==Status.FREE){\r\n            let x=Math.round(temp.x/this.props.gridStep)*this.props.gridStep;\r\n            let y=Math.round(temp.y/this.props.gridStep)*this.props.gridStep;\r\n            let dx=x-temp.x;\r\n            let dy=y-temp.y;\r\n            if((Math.sqrt(dx*dx+dy*dy)<=this.props.snapMinDist*this.props.pixelRatio)){\r\n                if(!this.isOutRect(Geometry.realToScreen({x,y},this.getRealRect(),this.getScreenRect()))) {\r\n                    temp.x = x;\r\n                    temp.y = y;\r\n                    curPoint = Geometry.realToScreen(temp,this.getRealRect(),this.getScreenRect());\r\n                }\r\n                }\r\n        }\r\n        if(this.props.status!==Status.FREE){\r\n            let d = this.props.snapMarkersManager.getDistanceToNearestMarker(temp,this.props.snapDist*this.props.pixelRatio);\r\n            if(d>=0&&d<=this.props.snapMinDist*this.props.pixelRatio){\r\n                temp=this.props.snapMarkersManager.getActiveMarker().getPos();\r\n                curPoint = Geometry.realToScreen(temp,this.getRealRect(),this.getScreenRect());\r\n            }\r\n        }\r\n        coord=temp;\r\n        if(this.props.status===Status.FREE){\r\n            this.props.shapeManager.findShapeNearPoint(coord,this.props.selectDist*this.props.pixelRatio);\r\n        }\r\n        if(this.props.status===Status.SELECT){\r\n            this.props.selectionManager.setCurrent(coord);\r\n            this.props.shapeManager.findShapeInRect(this.prevCoord,coord);\r\n        }\r\n        if(this.props.status===Status.CREATE){\r\n            this.props.shapeCreator.setCurrent(coord);\r\n        }\r\n        if(this.props.status===Status.PICK){\r\n            this.props.picker.setCurrent(coord);\r\n        }\r\n        this.props.actions.setCurCoord(coord);\r\n        \r\n    }\r\n    mdownHandle(e){\r\n        if(e.button===1){\r\n            let rect=e.target.getBoundingClientRect();\r\n            const curPoint={x:e.clientX-rect.left,y:e.clientY-rect.top};\r\n            this.dragX0=curPoint.x\r\n            this.dragY0=curPoint.y\r\n            this.props.actions.setScreenStatus(Status.PAN);\r\n            e.preventDefault();\r\n        }\r\n        if(e.button===0){\r\n            let rect=e.target.getBoundingClientRect();\r\n            this.curPoint.x=e.clientX-rect.left;\r\n            this.curPoint.y=e.clientY-rect.top;\r\n            this.props.mouseHandler.down({curPoint:this.curPoint,screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey});\r\n            this.props.actions.repaint();\r\n            e.preventDefault();\r\n        }\r\n    }\r\n    mdown(e){\r\n        if(e.button===1){\r\n            let rect=e.target.getBoundingClientRect();\r\n            const curPoint={x:e.clientX-rect.left,y:e.clientY-rect.top};\r\n            this.dragX0=curPoint.x\r\n            this.dragY0=curPoint.y\r\n            this.props.actions.setScreenStatus(Status.PAN);\r\n            e.preventDefault();\r\n        }\r\n        if(e.button===0){\r\n            let rect=e.target.getBoundingClientRect();\r\n            this.curPoint.x=e.clientX-rect.left;\r\n            this.curPoint.y=e.clientY-rect.top;\r\n            if(this.props.status===Status.FREE){\r\n                this.prevCoord=Geometry.screenToReal(this.curPoint.x,this.curPoint.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight);\r\n                this.props.selectionManager.reset();\r\n                this.props.selectionManager.setNext(Geometry.screenToReal(this.curPoint.x,this.curPoint.y,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight));\r\n                this.props.actions.setScreenStatus(Status.SELECT);\r\n            }\r\n            this.props.actions.repaint();\r\n            e.preventDefault();\r\n        }\r\n    }\r\n    mupHandle(e){\r\n        if(e.button===1){\r\n            this.props.actions.setPrevStatus();\r\n        }\r\n        if(e.button===0){\r\n            this.props.mouseHandler.up({screenProps:this.props});\r\n        }\r\n    }\r\n    mup(e){\r\n        if(e.button===1){\r\n            this.props.actions.setPrevStatus();\r\n        }\r\n        if(e.button===0){\r\n            if(this.props.status===Status.SELECT){\r\n                this.props.actions.cancel();\r\n            }\r\n        }\r\n    }\r\n    mwheelHandle(e){\r\n        if(this.props.status===Status.PAN)return;\r\n        let rect=e.target.getBoundingClientRect();\r\n        let point=Geometry.screenToReal(e.clientX-rect.left,e.clientY-rect.top,this.props.screenWidth,this.props.screenHeight,this.props.topLeft,this.props.bottomRight);\r\n        this.props.mouseHandler.wheel({deltaY:e.deltaY,point,screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey})\r\n       e.preventDefault();\r\n    }\r\n    mleaveHandle(){\r\n        this.props.mouseHandler.leave({screenProps:this.props});\r\n        this.props.actions.repaint();\r\n    }\r\n    mleave(){\r\n        if(this.props.status===Status.PAN){\r\n            this.props.actions.setPrevStatus();\r\n        }\r\n        this.mouseOnScreen=false;\r\n        this.props.actions.repaint();\r\n    }\r\n    menter(){\r\n    }\r\n    clickHandle(e){\r\n        if(e.button===0){\r\n            this.props.mouseHandler.click({screenProps:this.props,shiftKey:e.shiftKey,ctrlKey:e.ctlrKey,altKey:e.altKey});\r\n        }\r\n        this.props.actions.selectShapes(this.props.shapeManager.getSelectedShapes());\r\n        e.preventDefault();\r\n    }\r\n    onclick(e){\r\n        if(e.button===0){\r\n            if(this.props.status===Status.CREATE){\r\n                this.props.shapeCreator.setCurrent(this.props.curCoord);\r\n                if(this.props.shapeCreator.isLegal()) this.props.shapeCreator.setNextPoint(this.props.curCoord);\r\n                if(!this.props.shapeCreator.isNext())\r\n                {\r\n                    this.props.shapes.push(this.props.shapeCreator.getShape());\r\n                    this.props.actions.refreshSnapMarkers();\r\n                    this.props.actions.refreshShapeManager();\r\n                    if(this.props.cyclicCreation){\r\n                        this.props.actions.createShape(this.props.shapeCreator.reset(this.props.boundedCircle));\r\n                    }else {\r\n                        this.props.actions.cancel();\r\n                    }\r\n                }\r\n            }\r\n            if(this.props.status===Status.FREE){\r\n                    this.props.shapeManager.toggleShapeSelected();\r\n                }\r\n            if(this.props.status===Status.PICK){\r\n                    this.props.picker.setNextPoint(this.props.curCoord);\r\n                    if(!this.props.picker.isNext())\r\n                    {\r\n                        this.props.actions.setPickedData(this.props.picker.getPickedData());\r\n                        this.props.actions.refreshSnapMarkers();\r\n                        this.props.actions.refreshShapeManager();\r\n                    }\r\n                }\r\n        }\r\n        this.props.actions.selectShapes(this.props.shapeManager.getSelectedShapes());\r\n        e.preventDefault();\r\n    }\r\n\r\n    resize(){\r\n        const style=window.getComputedStyle(document.querySelector('.screenContainer'));\r\n        const sw=Number.parseInt(style.width);\r\n        const sh=Number.parseInt(style.height);\r\n        this.props.actions.setDimensions(sw,sh,this.props.realWidth,this.props.topLeft);\r\n        this.canvas.width=sw;\r\n        this.canvas.height=sh;\r\n        this.props.actions.setBoundedCircle();\r\n    }\r\n    componentDidMount() {\r\n        this.canvas=document.querySelector(\"#canvas\");\r\n        this.ctx=this.canvas.getContext(\"2d\");\r\n        this.canvas.addEventListener(\"mousewheel\",this.mwheelHandle.bind(this),{passive:false})\r\n        //this.test();\r\n        this.paint(this.ctx);\r\n        window.addEventListener('load',()=>{\r\n            this.resize();\r\n            this.props.actions.centerToPoint(new Coord2D(0,0));\r\n            this.props.actions.repaint();\r\n            document.body.oncontextmenu=()=>false\r\n        });\r\n        window.addEventListener('resize',()=>{\r\n            this.resize();\r\n        })\r\n        window.addEventListener('keyup',(e)=>{\r\n            this.props.cursor.setAdditional({shiftKey:e.shiftKey,altKey:e.altKey});\r\n            this.props.actions.repaint();\r\n        });\r\n        window.addEventListener('keydown',(e)=>{\r\n            if(window.KEYDOWNHANDLE===false) return;\r\n            this.props.cursor.setAdditional({shiftKey:e.shiftKey,altKey:e.altKey});\r\n            this.props.keyDownHandler.forEach(key=>{\r\n                if(e.ctrlKey===key.ctrlKey&&e.shiftKey===key.shiftKey&&e.altKey===key.altKey&&e.keyCode===key.keyCode){\r\n                    if(this.props.actions[key.action]) this.props.actions[key.action](key.param);\r\n                    e.preventDefault();\r\n                }\r\n            })\r\n            this.props.actions.repaint();\r\n        })\r\n        \r\n    }\r\n\r\n    componentDidUpdate(){\r\n        this.props.shapeManager.setShapes(this.props.shapes,this.props.selectionType);\r\n        this.canvas.style.cursor='none'\r\n        this.paint(this.ctx);\r\n    }\r\n\r\n    render(){\r\n        return <canvas ref={this.refCanvas} id=\"canvas\" width={this.props.screenWidth} height={this.props.screenHeight}\r\n                onMouseMove={this.mmoveHandle.bind(this)}\r\n                onMouseDown={this.mdownHandle.bind(this)}\r\n                onMouseUp={this.mupHandle.bind(this)}\r\n                onMouseLeave={this.mleaveHandle.bind(this)}\r\n                onMouseEnter={this.menter.bind(this)}\r\n                onClick={this.clickHandle.bind(this)}\r\n            >\r\n            </canvas>\r\n    }\r\n}\r\n","import SLineShape from '../SLineShape';\r\nimport CircleShape from '../CircleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {SLine,Coord2D, Circle} from \"../../../utils/geometry\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class StraightLineCreator extends ShapeBuilder{\r\n    static caption=\"Straight line\";\r\n    constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"StraightLineCreator\"\r\n        this.points=new Array(2);\r\n        this.points[0]=new Coord2D();\r\n        this.points[1]=new Coord2D();\r\n        this.line=new SLine(0,0,0);\r\n        //this.boundedCircle=new Circle(new Coord2D(),0);\r\n        this.shape=new SLineShape(this.line);\r\n        this.style=style||new ShapeStyle(Color.BLACK,ShapeStyle.SOLID);\r\n        this.shape.setStyle(style);\r\n        this.helperShapes=[];\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new CircleShape(new Circle(this.points[0], this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[1], this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setColor(Color.POINT_MARKER);\r\n        this.helperShapes[1].setColor(Color.POINT_MARKER);\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0) {this.line=new SLine(...this.points);if(this.line.a===0&&this.line.b===0)this.legal=false;else this.legal=true;}\r\n        this.shape=new SLineShape(this.line);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    reset(){return new StraightLineCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}","import Geometry,{Coord2D,Circle, Intersection} from \"../../utils/geometry\";\r\nimport EndSnapMarker from './markers/EndSnapMarker';\r\nimport Shape from \"./Shape\";\r\nimport PointMarker from \"./markers/PointMarker\";\r\nimport PointPicker from \"./pickers/PointPicker\";\r\n\r\nexport default class RayLineShape extends Shape{\r\n    constructor(line){\r\n        super();\r\n        this.line=line;\r\n        this.model=line;\r\n        this.controlPoints=[\r\n            {point:this.line.origin,show:false,selected:false},\r\n            {point:this.line.directionPoint,show:false,selected:false}]\r\n        for(let cp of this.controlPoints)\r\n          cp.marker=new PointMarker(cp.point,false)\r\n    }\r\n    drawSelf(ctx,realRect, screenRect){\r\n        this.refresh(realRect,screenRect);\r\n        if(this.p0===null||this.p1===null) return;\r\n        ctx.strokeStyle=this.getStyle().getColor();\r\n        ctx.setLineDash(this.getStyle().getStroke());\r\n        ctx.lineWidth=this.getStyle().getWidth();\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x,this.p0.y);\r\n        ctx.lineTo(this.p1.x,this.p1.y);\r\n        ctx.stroke();\r\n    }\r\n    refresh(realRect, screenRect){\r\n        let br=new Coord2D(realRect.topLeft.x+realRect.width,realRect.topLeft.y-realRect.height);\r\n        let c=Geometry.midPoint(realRect.topLeft,br);\r\n        let rad=Geometry.distance(realRect.topLeft,br)/2;\r\n        let circle=new Circle(c,rad);\r\n        let p=Intersection.CircleRLine(circle,this.line);\r\n        if(p!=null){\r\n            if(p.length===1){\r\n                let r=p[0];\r\n                p=new Array(2);\r\n                p[0]=this.line.origin;\r\n                p[1]=r;\r\n            }\r\n            this.p0=Geometry.realToScreen(p[0],realRect,screenRect);\r\n            this.p1=Geometry.realToScreen(p[1],realRect,screenRect);\r\n        }else{\r\n            this.p0=null;\r\n            this.p1=null;\r\n        }\r\n        if(this.activePoint) \r\n            this.activePointMarker=new PointMarker(this.activePoint)\r\n    }\r\n    getMarkers(){\r\n        let list=[];\r\n        list.push(new EndSnapMarker(this.line.origin));\r\n        return list;\r\n    }\r\n    setActivePoint(key){\r\n        super.setActivePoint();\r\n        if(key==='Origin') {this.controlPoints[0].selected=true;this.controlPoints[0].marker.setActive(true)}\r\n        if(key==='Direction') {this.controlPoints[1].selected=true;this.controlPoints[1].marker.setActive(true)}\r\n    }\r\n    getProperties(){\r\n        let prop=new Map();\r\n        prop.set('Title',{value:'RLine',regexp:/\\s*/});\r\n        prop.set('Origin',{value:{x:this.line.origin.x,y:this.line.origin.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        prop.set('Direction',{value:{x:this.line.origin.x+this.line.vector.x,y:this.line.origin.y+this.line.vector.y},picker:PointPicker,regexp:/^-?\\d*\\.?\\d*$/});\r\n        return prop;\r\n    }\r\n    setProperty(prop){\r\n        super.setProperty(prop);\r\n        switch(prop.key){\r\n            case 'Origin':\r\n                this.line.origin.x=prop.value.x;\r\n                this.line.origin.y=prop.value.y;\r\n                this.line.directionPoint.x=this.line.origin.x+this.line.vector.x;\r\n                this.line.directionPoint.y=this.line.origin.y+this.line.vector.y;\r\n                this.controlPoints[0].point=this.line.origin;\r\n                this.controlPoints[1].point=this.line.directionPoint;\r\n                break;\r\n            case 'Direction':\r\n                this.line.vector.x=prop.value.x-this.line.origin.x;\r\n                this.line.vector.y=prop.value.y-this.line.origin.y;\r\n                this.line.directionPoint.x=this.line.origin.x+this.line.vector.x;\r\n                this.line.directionPoint.y=this.line.origin.y+this.line.vector.y;\r\n                this.controlPoints[1].point=this.line.directionPoint;\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    getDistance(point) {\r\n        return Geometry.PointToRLineDistance(point,this.line);\r\n    }\r\n    isInRect(topLeft,bottomRight){\r\n        const full=false;\r\n        const cross=Intersection.RectangleRLine(topLeft,bottomRight,this.line).length>0;\r\n        return {cross,full};    \r\n    }\r\n    toString(){\r\n        return `Ray origin (${this.line.origin.x},${this.line.origin.y}) vector(${this.line.vector.x},${this.line.vector.y})`;\r\n    }\r\n\r\n}","import RayLineShape from '../RayLineShape';\r\nimport CircleShape from '../CircleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {RLine, Coord2D, Circle} from \"../../../utils/geometry\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class RayLineCreator extends ShapeBuilder{\r\n    static caption=\"Ray line\";\r\n    constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"RayLineCreator\"\r\n        this.line=new RLine(new Coord2D(),new Coord2D());\r\n        this.points=new Array(2);\r\n        this.shape=new RayLineShape(this.line);\r\n        this.style=style||new ShapeStyle(Color.BLACK,ShapeStyle.SOLID);\r\n        this.shape.setStyle(style);\r\n        this.helperShapes=[];\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new CircleShape(new Circle(this.points[0], this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[1], this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setColor(Color.POINT_MARKER);\r\n        this.helperShapes[1].setColor(Color.POINT_MARKER);\r\n    }\r\n\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0) {this.line=new RLine(...this.points);if(this.line.vector.x===0&&this.line.vector.y===0)this.legal=false;else this.legal=true}\r\n        this.shape=new RayLineShape(this.line,this.boundedCircle);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    reset(){return new RayLineCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}","import LineShape from '../LineShape';\r\nimport CircleShape from '../CircleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport {Line,Coord2D,Circle} from \"../../../utils/geometry\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class LineCreator extends ShapeBuilder{\r\n    static caption=\"Segment line\";\r\n    constructor(style=new ShapeStyle(Color.BLACK,ShapeStyle.SOLID),boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"LineCreator\"\r\n        this.line=new Line(new Coord2D(),new Coord2D());\r\n        this.points=[new Coord2D(),new Coord2D()];\r\n        this.shape=new LineShape(this.line);\r\n        this.style=style;\r\n        this.shape.setStyle(style);\r\n        this.helperShapes=[];\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0)this.line=new Line(this.points[0],this.points[1]);\r\n        this.shape=new LineShape(this.line);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setColor(Color.POINT_MARKER);\r\n        this.helperShapes[1].setColor(Color.POINT_MARKER);\r\n    }\r\n    reset(){return new LineCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}\r\n","import {Circle,Line,Coord2D} from \"../../../utils/geometry\";\r\nimport CircleShape from \"../CircleShape\";\r\nimport LineShape from \"../LineShape\";\r\nimport Geometry from \"../../../utils/geometry\";\r\nimport ShapeStyle from \"../ShapeStyle\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from \"./ShapeBuilder\";\r\nexport default class CircleCRCreator extends ShapeBuilder{\r\n    static caption=\"Circle by center\";\r\n    constructor(style=new ShapeStyle(Color.BLACK,ShapeStyle.SOLID),boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"CircleCRCreator\"\r\n        this.points=new Array(2);\r\n        this.circle=new Circle(new Coord2D(),0);\r\n        this.helperShapes = [];\r\n        this.shape=new CircleShape(this.circle);\r\n        this.radiusLine=new Line(this.circle.center,this.circle.center);\r\n        this.helperShapes.push(new LineShape(this.radiusLine));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.style=style;\r\n        this.shape.setStyle(style);\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.GRAY,ShapeStyle.DASH));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n    }\r\n\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0)this.circle=new Circle(this.points[0], Geometry.distance(this.points[0],this.points[this.i]));\r\n        this.radiusLine=new Line(this.points[0],this.points[this.i]);\r\n        this.shape=new CircleShape(this.circle);\r\n        this.helperShapes[0]=new LineShape(this.radiusLine);\r\n        this.shape.setStyle(this.style);\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.GRAY,ShapeStyle.DASH));\r\n        this.setControlPoints();\r\n    }\r\n\r\n    setControlPoints(){\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius*Screen.MARKER_SIZE));\r\n        this.helperShapes[2]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius*Screen.MARKER_SIZE));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));                     \r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n    }\r\n    reset(){return new CircleCRCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}","import {Circle,Line,Coord2D} from \"../../../utils/geometry\";\r\nimport CircleShape from \"../CircleShape\";\r\nimport LineShape from \"../LineShape\";\r\nimport Geometry from \"../../../utils/geometry\";\r\nimport ShapeStyle from \"../ShapeStyle\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from \"./ShapeBuilder\";\r\nexport default class Circle2PCreator extends ShapeBuilder{\r\n     static caption=\"Circle by 2 points\";\r\n     constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"Circle2PCreator\"\r\n        this.style=style;\r\n        this.circle=new Circle(new Coord2D(),0);\r\n        this.shape=new CircleShape(this.circle);\r\n        this.shape.setStyle(style);\r\n        this.helperShapes = [];\r\n        this.diamLine=new Line(this.circle.center,this.circle.center);\r\n        this.helperShapes.push(new LineShape(this.diamLine));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.gray,ShapeStyle.DASH));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.blue,ShapeStyle.SOLID));\r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.blue,ShapeStyle.SOLID));\r\n        this.points=new Array(2);\r\n    }\r\n    \r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0) this.circle=new Circle(Geometry.midPoint(this.points[0],this.points[1]),Geometry.distance(this.points[0],this.points[1])/2);\r\n        this.diamLine =new Line(this.points[0],this.points[this.i]);\r\n        this.shape=new CircleShape(this.circle);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new LineShape(this.diamLine);\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[2]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.GRAY,ShapeStyle.DASH));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n    }\r\n    reset(){return new Circle2PCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n    \r\n}","import {Circle,Triangle,Coord2D} from \"../../../utils/geometry\";\r\nimport CircleShape from \"../CircleShape\";\r\nimport TriangleShape from \"../TriangleShape\";\r\nimport ShapeStyle from \"../ShapeStyle\";\r\nimport {Color} from '../../colors';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from \"./ShapeBuilder\";\r\nexport default class Circle3PCreator extends ShapeBuilder{\r\n    static caption=\"Circle by 3 points\";\r\n    constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"Circle3PCreator\"\r\n        this.style=style;\r\n        this.circle=new Circle(new Coord2D(),0);\r\n        this.shape=new CircleShape(this.circle);\r\n        this.shape.setStyle(style);\r\n        this.helperShapes = [];\r\n        this.triangle =new Triangle();\r\n        this.helperShapes.push(new TriangleShape(this.triangle));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.gray,ShapeStyle.DASH));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n        this.helperShapes[3].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n        this.points=new Array(3);\r\n    }\r\n\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i<2)this.points[2]=this.points[1];\r\n        this.triangle=new Triangle(this.points);\r\n        this.circle=this.triangle.getOuterCircle();\r\n        this.shape=new CircleShape(this.circle);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new TriangleShape(new Triangle(this.points));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[2]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[3]=new CircleShape(new Circle(this.points[2],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.GRAY,ShapeStyle.DASH));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n        this.helperShapes[2].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n        this.helperShapes[3].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n    }\r\n    reset(){return new Circle3PCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n    refresh(boundedCircle){\r\n        this.boundedCircle=boundedCircle;\r\n        if(this.points[this.i]!=null) this.setControlPoints();\r\n    }\r\n\r\n}","import TriangleShape from '../TriangleShape';\r\nimport CircleShape from '../CircleShape';\r\nimport {Triangle,Coord2D,Circle} from \"../../../utils/geometry\";\r\nimport {Color} from '../../colors';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class TriangleCreator extends ShapeBuilder{\r\n     static caption=\"Triangle\";\r\n     constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"TriangleCreator\"\r\n        this.style=style;\r\n        this.triangle=new Triangle();\r\n        this.shape=new TriangleShape(this.triangle);\r\n        this.helperShapes=[];\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.shape.setStyle(style);\r\n        this.points=new Array(3);\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i<2)this.points[2]=this.points[1];\r\n        this.triangle=new Triangle(this.points);\r\n        this.shape=new TriangleShape(this.triangle);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[2]=new CircleShape(new Circle(this.points[2],this.boundedCircle.radius* Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setColor(Color.POINT_MARKER);\r\n        this.helperShapes[1].setColor(Color.POINT_MARKER);\r\n        this.helperShapes[2].setColor(Color.POINT_MARKER);\r\n    }\r\n    reset(){return new TriangleCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}","import {Color} from '../../colors';\r\nimport {Rectangle,Coord2D,Circle} from '../../../utils/geometry';\r\nimport RectangleShape from '../RectangleShape';\r\nimport CircleShape from '../CircleShape';\r\nimport ShapeStyle from '../ShapeStyle';\r\nimport Screen from '../../Screen';\r\nimport ShapeBuilder from './ShapeBuilder';\r\nexport default class RectangleCreator extends ShapeBuilder{\r\n    static caption=\"Rectangle\";\r\n    rectangle=new Rectangle();\r\n    points=new Array(2);\r\n    constructor(style,boundedCircle){\r\n        super(boundedCircle)\r\n        this.name=\"RectangleCreator\"\r\n        this.style=style;\r\n        this.shape=new RectangleShape(this.rectangle);\r\n        this.shape.setStyle(style);\r\n        this.helperShapes = [];\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes.push(new CircleShape(new Circle(new Coord2D(),0)));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.BLUE,ShapeStyle.SOLID));\r\n    }\r\n    setCurrent(point){\r\n        if(!this.isNext()) return;\r\n        this.points[this.i]=point;\r\n        if(this.i===0)this.points[1]=this.points[0];\r\n        if(this.i>0)this.rectangle=new Rectangle(this.points[0], this.points[1]);\r\n        this.shape=new RectangleShape(this.rectangle);\r\n        this.shape.setStyle(this.style);\r\n        this.setControlPoints();\r\n    }\r\n    setControlPoints(){\r\n        this.helperShapes[0]=new CircleShape(new Circle(this.points[0],this.boundedCircle.radius*Screen.MARKER_SIZE));\r\n        this.helperShapes[1]=new CircleShape(new Circle(this.points[1],this.boundedCircle.radius*Screen.MARKER_SIZE));\r\n        this.helperShapes[0].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n        this.helperShapes[1].setStyle(new ShapeStyle(Color.POINT_MARKER,ShapeStyle.SOLID));\r\n    }\r\n    reset(){return new RectangleCreator(new ShapeStyle(this.style.getColor(),this.style.getType()),this.boundedCircle);}\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport '../Graph.css';\r\nimport ToolButtonGroup from \"./ToolButtonGroup\";\r\nimport StraightLineCreator from \"./shapes/shapecreators/StraightLineCreator\";\r\nimport RayLineCreator from \"./shapes/shapecreators/RayLineCreator\";\r\nimport LineCreator from \"./shapes/shapecreators/LineCreator\";\r\nimport CircleCRCreator from \"./shapes/shapecreators/CircleCRCreator\";\r\nimport Circle2PCreator from \"./shapes/shapecreators/Circle2PCreator\";\r\nimport Circle3PCreator from \"./shapes/shapecreators/Circle3PCreator\";\r\nimport TriangleCreator from \"./shapes/shapecreators/TriangleCreator\";\r\nimport RectangleCreator from \"./shapes/shapecreators/RectangleCreator\";\r\nimport {setActiveCreateButton} from \"../actions/ComponentActions\";\r\nimport {ScreenActions} from \"../actions/ScreenActions\";\r\nimport ShapeStyle from './shapes/ShapeStyle';\r\nimport { Color } from './colors';\r\n\r\nclass CreateToolBar extends React.Component{\r\n    onClick({pressed,params}){\r\n        if(!pressed) {\r\n            this.setButtonId(params.id);\r\n            this.props.createNewShape(new params.creator(new ShapeStyle(Color.BLACK, ShapeStyle.SOLID),this.props.boundedCircle));\r\n        }\r\n        else {\r\n           this.setButtonId(\"\");\r\n           this.props.cancel();\r\n        }\r\n    }\r\n    setButtonId(id){\r\n        this.props.setActiveCreateButton(id);\r\n    }\r\n    render(){\r\n        const cap=this.props.captions.create;\r\n        return <div className={\"toolBar\"} id=\"createToolBar\">\r\n                 <div className={\"toolBarHeader\"}>\r\n                    <span className={\"toolBarCaption noselect\"}>{cap.createToolBar}</span>\r\n                </div>\r\n                <hr/>\r\n                <div className=\"checkbox\">\r\n                    <input type=\"checkbox\" id=\"cyclic\" onChange={(e)=>{this.props.setCyclicFlag(e.target.checked)}}/>\r\n                    <label htmlFor=\"cyclic\">{cap.createCheckBox}</label>\r\n                </div>\r\n            <ToolButtonGroup \r\n                                buttons={[{title:cap.createSLine2Points,id:\"SLine\",params:{creator:StraightLineCreator}},\r\n                                         {title:cap.createRayLine2Points,id:\"RLine\",params:{creator:RayLineCreator}},\r\n                                         {title:cap.createSegmentLine2Points,id:\"Line\",params:{creator:LineCreator}}\r\n                                            ]}\r\n                                activeButton={this.props.activeButton}\r\n                                onClick={this.onClick.bind(this)}\r\n                                />\r\n            <ToolButtonGroup \r\n                                buttons={[{title:cap.createCircleCenter,id:\"CircleRad\",params:{creator:CircleCRCreator}},\r\n                                          {title:cap.createCircle2P,id:\"Circle2p\",params:{creator:Circle2PCreator}},\r\n                                          {title:cap.createCircle3P,id:\"Circle3p\",params:{creator:Circle3PCreator}}\r\n                                            ]}\r\n                                activeButton={this.props.activeButton}\r\n                                onClick={this.onClick.bind(this)}\r\n                                />\r\n            <ToolButtonGroup \r\n                                buttons={[{title:cap.createRect,id:\"Rect2p\",params:{creator:RectangleCreator}},\r\n                                          {title:cap.createRectCenter,id:\"RectCenter\",params:{creator:null,dev:cap.development}}    \r\n                                            ]}\r\n                                activeButton={this.props.activeButton}\r\n                                onClick={this.onClick.bind(this)}            \r\n                                />\r\n            <ToolButtonGroup\r\n                buttons={[{title:cap.createTriangle,id:\"Triangle\",params:{creator:TriangleCreator}},\r\n                        {title:cap.createTriangleInscribed,id:\"TriangleInscribed\",params:{creator:null,dev:cap.development}},\r\n                        {title:cap.createTriangleDescribed,id:\"TriangleDescribed\",params:{creator:null,dev:cap.development}}\r\n                ]}\r\n                activeButton={this.props.activeButton}\r\n                onClick={this.onClick.bind(this)}\r\n            />\r\n            <ToolButtonGroup\r\n                buttons={[{title:cap.createParabola,id:\"Parabola\",params:{creator:null,dev:cap.development}},\r\n                        {title:cap.createHyperbola,id:\"Hyperbola\",params:{creator:null,dev:cap.development}},\r\n                ]}\r\n                activeButton={this.props.activeButton}\r\n                onClick={this.onClick.bind(this)}\r\n            />\r\n            <ToolButtonGroup\r\n                buttons={[{title:cap.createFunction,id:\"Function\",params:{creator:null,dev:cap.development}}\r\n                ]}\r\n                activeButton={this.props.activeButton}\r\n                onClick={this.onClick.bind(this)}\r\n            />\r\n\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (store,ownProps) => {\r\n\r\n    return {\r\n        boundedCircle:store.screen.boundedCircle,\r\n        context:store.screen.context,\r\n        captions:store.options.captions,\r\n        activeButton:store.components.activeCreateButton,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        cancel:()=>dispatch(ScreenActions.cancel()),\r\n        createNewShape:(creator)=>dispatch(ScreenActions.createNewShape(creator)),\r\n        setActiveCreateButton:id=>dispatch(setActiveCreateButton(id)),\r\n        setScreenStatus:(status,params)=>dispatch(ScreenActions.setScreenStatus(status,params)),\r\n        setCyclicFlag:(flag)=>dispatch(ScreenActions.setCyclicFlag(flag)),\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(CreateToolBar)","import React from \"react\";\r\n\r\nexport default class OptionTogglePic extends React.Component{\r\n\r\n    onclick(){\r\n        if(!this.props.pressed) {\r\n                this.props.setSnap(this.props.snapClass,true);\r\n                this.props.setActiveSnapButton(this.props.id);\r\n            }\r\n            else {\r\n                this.props.setSnap(this.props.snapClass,false);\r\n                this.props.clearActiveSnapButton(this.props.id);\r\n            }\r\n    }\r\n    render(){\r\n        let cls=!this.props.pressed?\"toolButtonUp\":\"toolButtonDown\";\r\n        cls=cls+\" toolButton snapButton\";\r\n        return <div id={this.props.id}\r\n                    className={cls}\r\n                       onClick={this.onclick.bind(this)}\r\n                    title={this.props.title}\r\n\r\n                    >\r\n\r\n        </div>\r\n    }\r\n}","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport '../Graph.css';\r\nimport {ScreenActions} from '../actions/ScreenActions';\r\nimport {setActiveSnapButton,clearActiveSnapButton} from '../actions/ComponentActions';\r\nimport OptionTogglePic from './OptionTogglePic';\r\nimport EndSnapMarker from \"./shapes/markers/EndSnapMarker\";\r\nimport MiddleSnapMarker from \"./shapes/markers/MiddleSnapMarker\";\r\nimport CenterSnapMarker from \"./shapes/markers/CenterSnapMarker\";\r\nclass SnapToggleBar extends React.Component{\r\n    render(){\r\n        let cap=this.props.captions.snap;\r\n        return <div className={\"toolBar snapToolBar\"}>\r\n                               \r\n        <OptionTogglePic title={cap.snapGridPoints}\r\n                           id={\"grid\"}\r\n                           setSnap={this.props.setSnap}\r\n                           snapClass={\"grid\"}\r\n                           setActiveSnapButton={this.props.setActiveSnapButton}\r\n                           clearActiveSnapButton={this.props.clearActiveSnapButton}\r\n                           pressed={this.props.activeButtons.has(\"grid\")}\r\n        />\r\n        <OptionTogglePic title={cap.snapEndPoints}\r\n                             id={\"endpoint\"}\r\n                             setSnap={this.props.setSnap}\r\n                             snapClass={EndSnapMarker}\r\n                             setActiveSnapButton={this.props.setActiveSnapButton}\r\n                             clearActiveSnapButton={this.props.clearActiveSnapButton}\r\n                             pressed={this.props.activeButtons.has(\"endpoint\")}\r\n            />\r\n         <OptionTogglePic title={cap.snapMiddlePoints}\r\n                             id={\"middlepoint\"}\r\n                             setSnap={this.props.setSnap}\r\n                             snapClass={MiddleSnapMarker}\r\n                             setActiveSnapButton={this.props.setActiveSnapButton}\r\n                             clearActiveSnapButton={this.props.clearActiveSnapButton}\r\n                             pressed={this.props.activeButtons.has(\"middlepoint\")}\r\n            />\r\n        <OptionTogglePic title={cap.snapCenterPoints}\r\n                             id={\"centerpoint\"}\r\n                             setSnap={this.props.setSnap}\r\n                             snapClass={CenterSnapMarker}\r\n                             setActiveSnapButton={this.props.setActiveSnapButton}\r\n                             clearActiveSnapButton={this.props.clearActiveSnapButton}\r\n                             pressed={this.props.activeButtons.has(\"centerpoint\")}\r\n            />\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = store => {\r\n\r\n    return {\r\n            screen: store.screen,\r\n            captions:store.options.captions,\r\n            activeButtons:store.components.activeSnapButtons,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setSnap: (snapClass,snap)=>dispatch(ScreenActions.setSnap(snapClass,snap)),\r\n        setActiveSnapButton: id=>dispatch(setActiveSnapButton(id)),\r\n        clearActiveSnapButton: id=>dispatch(clearActiveSnapButton(id)),\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(SnapToggleBar)","import React from 'react';\r\nimport '../Buttons.css';\r\nimport { connect } from 'react-redux';\r\n\r\nclass PickButton extends React.Component{\r\n    render(){\r\n        const style=this.props.active?\"pickButtonDown\":\"pickButtonUp\"\r\n        return <div title={this.props.captions.buttons.pick} onClick={this.props.onClick} className={\"pickButton \"+style}></div>\r\n    }\r\n}\r\nconst mapStateToProps=(store)=>({captions:store.options.captions})\r\nexport default connect(mapStateToProps)(PickButton)","import \"../Graph.css\";\r\nimport React from \"react\";\r\nimport PickButton from \"./PickButton\";\r\nimport { Status } from \"../reducers/screen\";\r\nimport { connect } from \"react-redux\";\r\nimport { ScreenActions } from \"../actions/ScreenActions\";\r\n\r\nclass PropertyField extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={value:props.value.toFixed(4),correct:true,prevValue:props.value.toFixed(4),originValue:props.value.toFixed(4)}\r\n    }\r\n    change(e){\r\n        let v=e.target.value;\r\n        const r=this.props.regexp;\r\n        const corr=v.match(r)!=null;\r\n        if(corr)this.setState({value:v,prevValue:v}); \r\n          else\r\n          this.setState({value:v===''?'':this.state.prevValue})\r\n    }\r\n    blur(){\r\n        this.setState({value:this.state.originValue})\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    onKeyPress(e){\r\n        if(e.charCode===13){\r\n            let v=e.target.value;\r\n            v=v===''?\"0\":v;\r\n            const r=this.props.regexp;\r\n            if(v.match(r)!==null) {\r\n                const n=Number.parseFloat(v);\r\n                this.props.setProperty(this.props.propKey,n);\r\n                this.setState({value:n,correct:true,prevValue:n});\r\n                return;\r\n                }\r\n            this.setState({value:this.state.prevValue})\r\n        }\r\n       return false;\r\n        \r\n    }\r\n    static getDerivedStateFromProps(nextProps,prevState){\r\n        let value=(nextProps.status===Status.PICK_END&&nextProps.id===nextProps.editId)?nextProps.pickedValue:prevState.value;\r\n        value=(+value).toFixed(4)\r\n        return {...nextProps,value:value,originValue:nextProps.value,correct:true};\r\n    }\r\n    componentDidUpdate(){\r\n        if(this.props.status===Status.PICK_END&&this.props.propKey===this.props.editId) {\r\n           this.props.setProperty(this.props.propKey,+this.state.value)\r\n           this.props.cancel();\r\n        }\r\n    }\r\n    render(){\r\n        return <div className={\"noselect\"}>\r\n            <div style={{display:'flex',flexDirection:'row',alignContent:'center'}}>\r\n            {this.props.label}\r\n            <input style={!this.state.correct?{backgroundColor:'red'}:{}}\r\n                className='propertyField'\r\n                type=\"text\" value={this.state.value} \r\n                id={this.props.label}\r\n                onChange={this.change.bind(this)}\r\n                onKeyPress={this.onKeyPress.bind(this)}\r\n                onKeyDown={(e)=>{e.stopPropagation()}}\r\n                onBlur={this.blur.bind(this)}\r\n                onFocus={()=>{window.KEYDOWNHANDLE=false}}\r\n                />\r\n            {this.props.picker?<PickButton\r\n                active={this.props.status===Status.PICK&&this.props.id===this.props.editId} \r\n                onClick={()=>{\r\n                    if(this.props.status===Status.PICK&&this.props.id===this.props.editId){this.props.cancel();return;}   \r\n                    this.props.setPickedData(this.state.value);\r\n                    this.props.startPicking(this.props.id,new this.props.picker());\r\n                 }}></PickButton>:<></>}\r\n        </div>\r\n        </div>\r\n    }\r\n}\r\nconst mapStateToProps=(store)=>{\r\n    return {\r\n        pickedValue:store.screen.pickedData.data,\r\n        editId:store.screen.pickedData.editId,\r\n        status:store.screen.status,\r\n    }\r\n}\r\nconst mapDispatchToProps=(dispatch)=>{\r\n    return {\r\n        startPicking:(id,picker)=>dispatch(ScreenActions.startPicking(id,picker)),\r\n        setPickedData:data=>dispatch(ScreenActions.setPickedData(data)),\r\n        cancel:()=>dispatch(ScreenActions.cancel()),\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(PropertyField)","import \"../Graph.css\";\r\nimport React from \"react\";\r\nimport {connect} from 'react-redux';\r\nimport { Status } from \"../reducers/screen\";\r\nimport { ScreenActions } from \"../actions/ScreenActions\";\r\nimport PickButton from \"./PickButton\";\r\n\r\nclass PropertyMultField extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        const value={x:props.value.x,y:props.value.y}\r\n        this.state={value:{x:value.x,y:value.y},correct:true,prevValue:{x:value.x,y:value.y},originValue:{x:value.x,y:value.y}}\r\n    }\r\n    change(e){\r\n        let v={x:this.state.value.x,y:this.state.value.y};\r\n        v[e.target.id]=e.target.value;\r\n        const r=this.props.regexp;\r\n        const corr=v[e.target.id].match(r)!=null&&v[e.target.id]!==\"\";\r\n        if(corr)this.setState({value:{x:v.x,y:v.y},prevValue:{x:v.x,y:v.y}}); \r\n          else{\r\n          const value=this.state.prevValue\r\n          if(v[e.target.id]==='') value[e.target.id]='';\r\n          this.setState({value:value})}\r\n    }\r\n    blur(){\r\n        //this.props.setActivePoint('');\r\n        this.setState({value:this.state.originValue})\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    focus(){\r\n        this.props.setActivePoint(this.props.propKey);\r\n        window.KEYDOWNHANDLE=false;\r\n    }\r\n    onKeyPress(e){\r\n        if(e.charCode===13){\r\n            let v=e.target.value;\r\n            v=v===''?\"0\":v;\r\n            const r=this.props.regexp;\r\n            if(v.match(r)!==null) {\r\n                const n=Number.parseFloat(v);\r\n                const value=this.state.value;\r\n                value[e.target.id]=n;\r\n                this.props.setProperty(this.props.propKey,value);\r\n                this.setState({value:value,correct:true,prevValue:value});\r\n                return;\r\n                }\r\n            this.setState({value:this.state.prevValue})\r\n        }\r\n       return false;\r\n        \r\n    }\r\n    static getDerivedStateFromProps(nextProps,prevState){\r\n            let value=(nextProps.status===Status.PICK_END&&nextProps.id===nextProps.editId)?nextProps.pickedValue:prevState.value;\r\n            value.x=+value.x.toFixed(4)\r\n            value.y=+value.y.toFixed(4)\r\n            return {...nextProps,value:value,originValue:nextProps.value,correct:true};\r\n    }\r\n    componentDidUpdate(){\r\n        if(this.props.status===Status.PICK_END&&this.props.propKey===this.props.editId) {\r\n           this.props.setProperty(this.props.propKey,this.state.value)\r\n           this.props.cancel();\r\n        }\r\n    }\r\n    render(){\r\n        const value=this.state.value;\r\n        return <div className={\"noselect\"}>\r\n            <div style={{display:'flex',flexDirection:'row',alignContent:'center'}}>\r\n            {this.props.label}\r\n            <input style={!this.state.correct?{backgroundColor:'red'}:{}}\r\n                className='propertyMultField'\r\n                type=\"text\" value={value.x} \r\n                id='x'\r\n                onChange={this.change.bind(this)}\r\n                onKeyPress={this.onKeyPress.bind(this)}\r\n                onKeyDown={(e)=>{e.stopPropagation()}}\r\n                onBlur={this.blur.bind(this)}\r\n                onFocus={this.focus.bind(this)}\r\n                />\r\n            <input style={!this.state.correct?{backgroundColor:'red'}:{}}\r\n                className='propertyMultField'\r\n                type=\"text\" value={value.y} \r\n                id='y'\r\n                onChange={this.change.bind(this)}\r\n                onKeyPress={this.onKeyPress.bind(this)}\r\n                onKeyDown={(e)=>{e.stopPropagation()}}\r\n                onBlur={this.blur.bind(this)}\r\n                onFocus={this.focus.bind(this)}\r\n                />\r\n             {this.props.picker?<PickButton \r\n                active={this.props.status===Status.PICK&&this.props.id===this.props.editId} \r\n                onClick={()=>{\r\n                    if(this.props.status===Status.PICK&&this.props.id===this.props.editId){this.props.cancel();return;}   \r\n                    this.props.setPickedData(this.state.value);\r\n                    this.props.startPicking(this.props.id,new this.props.picker());\r\n                    this.props.setActivePoint(this.props.propKey);\r\n                        \r\n                 }}></PickButton>:<></>}\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\nconst mapStateToProps=(store)=>{\r\n    return {\r\n        pickedValue:store.screen.pickedData.data,\r\n        editId:store.screen.pickedData.editId,\r\n        status:store.screen.status,\r\n    }\r\n}\r\nconst mapDispatchToProps=(dispatch)=>{\r\n    return {\r\n        startPicking:(id,picker)=>dispatch(ScreenActions.startPicking(id,picker)),\r\n        setPickedData:data=>dispatch(ScreenActions.setPickedData(data)),\r\n        cancel:()=>dispatch(ScreenActions.cancel()),\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(PropertyMultField)","import \"../Graph.css\";\r\nimport React from \"react\";\r\n\r\nclass PropertyEditButtonsBar extends React.Component{\r\n\r\n    onClick(){\r\n        this.props.deleteConfirm();\r\n    }\r\n\r\n    render(){\r\n        return <div className=\"propEditBar\">\r\n            <button className=\"deleteButton\" onClick={this.onClick.bind(this)}>{this.props.caption}</button>\r\n            \r\n        </div>\r\n    }\r\n}\r\nexport default PropertyEditButtonsBar","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport '../Graph.css';\r\nimport {setProperty} from '../actions/ShapeActions'\r\nimport PropertyField from './PropertyField';\r\nimport PropertyMultField from './PropertyMultField';\r\nimport PropertyEditButtonsBar from './PropertyEditButtonsBar';\r\nimport { ScreenActions } from '../actions/ScreenActions';\r\nclass PropertyEditorBar extends React.Component{\r\n    prop;\r\n    shape;\r\n    setProperty(k,v){\r\n        this.props.setProperty({key:k,value:v});\r\n        }\r\n    setActivePoint(key){\r\n        this.shape.setActivePoint(key);\r\n        this.props.repaint();\r\n    }\r\n    render(){\r\n        const shapes=this.props.screen.selectedShapes;\r\n        let propElements=[];\r\n        let shapeTitle;\r\n        if(shapes.length===1){\r\n            this.shape=shapes[0];\r\n            this.prop=shapes[0].getProperties();\r\n            let shapeType=this.prop.get('Title').value;\r\n            shapeTitle=this.props.captions.shapes[shapeType].Title;\r\n            for(let key of this.prop.keys()){\r\n                if(key!=='Title')propElements.push(typeof this.prop.get(key).value==='object'?<PropertyMultField\r\n                                                     key={key}\r\n                                                     propKey={key}\r\n                                                     id={key}\r\n                                                     label={this.props.captions.shapes[shapeType][key]} \r\n                                                     value={this.prop.get(key).value}\r\n                                                     regexp={this.prop.get(key).regexp}\r\n                                                     picker={this.prop.get(key).picker}\r\n                                                     setProperty={this.setProperty.bind(this)}\r\n                                                     setActivePoint={this.setActivePoint.bind(this)}  />:\r\n                                                     <PropertyField \r\n                                                     key={key}\r\n                                                     propKey={key}\r\n                                                     id={key}\r\n                                                     label={this.props.captions.shapes[shapeType][key]} \r\n                                                     value={this.prop.get(key).value}\r\n                                                     regexp={this.prop.get(key).regexp}\r\n                                                     picker={this.prop.get(key).picker}\r\n                                                     setProperty={this.setProperty.bind(this)}  />)\r\n            }\r\n        }\r\n        if(shapes.length>1){\r\n            propElements=shapes.length+this.props.captions.NShapesSelected;\r\n        }    \r\n        if(shapes.length===0) propElements=this.props.captions.noShapesSelected;\r\n        return <div className={\"toolBar propertiesBar noselect\"}>\r\n            <div className='toolBarHeader noselect'>{this.props.captions.propBar}</div>\r\n            <hr/>\r\n            {shapeTitle?shapeTitle:\"\"}\r\n            <div className='propertyGroup'>\r\n            {propElements}\r\n            </div>\r\n            {this.props.screen.selectedShapes.length>0?<PropertyEditButtonsBar\r\n                                    deleteConfirm={this.props.deleteConfirm.bind(null,true)}\r\n                                    caption={this.props.captions.deleteButton}/>:<></>}\r\n                                    \r\n        \r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = store => {\r\n\r\n    return {\r\n            screen: store.screen,\r\n            captions:store.options.captions,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setProperty:(prop)=>dispatch(setProperty(prop)),\r\n        deleteConfirm:()=>dispatch(ScreenActions.deleteConfirm()),\r\n        repaint:()=>dispatch(ScreenActions.repaint()),\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(PropertyEditorBar)","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport '../Graph.css';\r\nimport {ScreenActions} from \"../actions/ScreenActions\";\r\nimport ToolButtonGroup from './ToolButtonGroup';\r\n\r\n\r\nclass SelectionToolBar extends React.Component{\r\n    onClick({params}){\r\n            this.props.setSelectionType(params.id);\r\n    }\r\n    render(){\r\n        const cap=this.props.captions.modify;\r\n        return <div className={\"toolBar\"} id=\"selectionToolBar\">\r\n                 \r\n                <ToolButtonGroup\r\n                                buttons={[{title:cap.crossSelect,id:\"crossSelect\"},\r\n                                         {title:cap.fullSelect,id:\"fullSelect\"},\r\n                                            ]}\r\n                                activeButton={this.props.activeButton}\r\n                                onClick={this.onClick.bind(this)}\r\n                                />\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = store => {\r\n\r\n    return {\r\n        context:store.screen.context,\r\n        captions:store.options.captions,\r\n        activeButton:store.screen.selectionType,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setSelectionType:id=>dispatch(ScreenActions.setSelectionType(id)),\r\n        setScreenStatus:(status,param)=>dispatch(ScreenActions.setScreenStatus(status,param)),\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(SelectionToolBar)","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport '../Graph.css';\r\nimport {ScreenActions} from \"../actions/ScreenActions\";\r\nimport {setLanguage} from \"../actions/AppActions\";\r\nimport CreateToolBar from \"./CreateToolBar\";\r\nimport Screen from \"./Screen\";\r\nimport SnapToggleBar from './SnapToggleBar';\r\nimport PropertyEditorBar from './PropertyEditorBar';\r\nimport SelectionToolBar from './SelectionToolBar';\r\nimport { createShape } from '../actions/ShapeActions';\r\n\r\nclass MainContainer extends React.Component{\r\n    render(){\r\n        return <div className={'mainContainer'}>\r\n        <div className={'screenContainer'}>\r\n            <Screen style={{borderWidth:1+'px',borderStyle:\"solid\"}}\r\n                actions={this.props.actions}\r\n                keyDownHandler={this.props.keyDownHandler}\r\n                {...this.props.screen}\r\n                />\r\n                </div>\r\n        <CreateToolBar/>\r\n        <SelectionToolBar/>\r\n        <PropertyEditorBar/>\r\n        <SnapToggleBar/>\r\n        \r\n    </div>\r\n    }\r\n}\r\nconst mapStateToProps = store => {\r\n    return {\r\n            screen: {...store.screen,captions:store.options.captions},\r\n            keyDownHandler:store.options.keyDownHandler,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {actions:{\r\n        addShape:(shape)=>dispatch(ScreenActions.addShape(shape)),\r\n        cancel:()=>dispatch(ScreenActions.cancel()),\r\n        cancelSelection:()=>dispatch(ScreenActions.cancelSelection()),\r\n        centerToPoint:(p)=>dispatch(ScreenActions.centerToPoint(p)),\r\n        createShape:(creator)=>dispatch(createShape(creator)),\r\n        deleteConfirm:()=>dispatch(ScreenActions.deleteConfirm()),\r\n        refreshShapeManager:()=>dispatch(ScreenActions.refreshShapeManager()),\r\n        refreshSnapMarkers:()=>dispatch(ScreenActions.refreshSnapMarkers()),\r\n        repaint:()=>dispatch(ScreenActions.repaint()),\r\n        selectAll:()=>dispatch(ScreenActions.selectAll()),\r\n        selectShapes:(selectedShapes)=>dispatch(ScreenActions.selectShapes(selectedShapes)),\r\n        setBoundedCircle:()=>dispatch(ScreenActions.setBoundedCircle()),\r\n        setCurCoord:(coord,screenPoint)=>dispatch(ScreenActions.setCurCoord(coord,screenPoint)),\r\n        setDimensions:(width,height,realWidth,topLeft)=>dispatch(ScreenActions.setDimensions(width,height,realWidth,topLeft)),\r\n        setLanguage:captions=>dispatch(setLanguage(captions)),\r\n        setPickedData:data=>dispatch(ScreenActions.setPickedData(data)),\r\n        setPrevCoord:(coord)=>dispatch(ScreenActions.setPrevCoord(coord)),\r\n        setPrevStatus:()=>dispatch(ScreenActions.setPrevStatus()),\r\n        setRatio:(ratio)=>dispatch(ScreenActions.setRatio(ratio)),\r\n        setRealWidth:(width)=>dispatch(ScreenActions.setRealWidth(width)),\r\n        setScale:(scale,anchor)=>dispatch(ScreenActions.setScale(scale,anchor)),\r\n        setScreenStatus:(status,params)=>dispatch(ScreenActions.setScreenStatus(status,params)),\r\n        setTopLeft:(p)=>dispatch(ScreenActions.setTopLeft(p)),\r\n    }}\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(MainContainer)","import React from 'react';\r\nimport '../Graph.css';\r\nimport {connect} from 'react-redux';\r\n\r\nclass MySelf extends React.Component{\r\n\r\n    render(){\r\n        return <div style={{textAlign: \"center\"}}>\r\n        <span   ref={this.ref2}\r\n                className={\"noselect\"}\r\n                style={{position:\"relative\",whiteSpace:\"pre\",fontSize:\"small\"}}\r\n                >\r\n            <hr/>\r\n            {`${this.props.cap.name}          ${this.props.cap.email}`}\r\n            <hr/>\r\n        </span>\r\n        </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        cap:store.options.captions.about\r\n    }\r\n}\r\nexport default connect(mapStateToProps)(MySelf);","import React,{Fragment} from 'react';\r\nimport '../Graph.css';\r\nimport '../Buttons.css';\r\nimport {showHelp} from '../actions/AppActions';\r\nimport { connect } from 'react-redux';\r\nimport MySelf from './MySelf';\r\n\r\nclass HelpSection extends React.Component{\r\n    constructor(){\r\n        super();\r\n        this.ref=React.createRef()\r\n        this.state={done:false}\r\n    }\r\n    \r\n    animate=()=>{\r\n        if(this.w<this.maxw) this.ref.current.style.width=`${this.w}px`;\r\n        if(this.h<this.maxh) this.ref.current.style.height=`${this.h}px`;\r\n        if(this.w>=this.maxw&&this.h>=this.maxh) this.setState({done:true});\r\n        this.w+=50;\r\n        this.h+=50;\r\n    }\r\n    componentWillUnmount(){\r\n        clearInterval(this.t);\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    componentDidMount(){\r\n        this.maxw=document.body.clientWidth/1.1;\r\n        this.maxh=document.body.clientHeight/1.1;\r\n        this.w=0;\r\n        this.h=0;\r\n        this.t=setInterval(this.animate,1);\r\n        window.KEYDOWNHANDLE=false\r\n    }\r\n    render(){\r\n        const keys=this.props.captions.help.hotKeys.map((item,i)=><Fragment key={i}><span className='helpHotKey'>{item.key} </span> - {item.desc}<br/></Fragment>);\r\n        return <div className='helpContainer  noselect' onClick={this.props.showHelp.bind(null,false)}>\r\n                <div style={{display:\"inline-block\",zIndex:101,position:\"relative\"}}>\r\n                    <div id='help' ref={this.ref} className={\"toolBar helpSectionShow\"}>\r\n                        <div className={\"toolBarHeader\"}>\r\n                            <span className={\"toolBarCaption\"}>{this.props.captions.help.title}</span>\r\n                        </div>\r\n                    {this.state.done?<MySelf/>:<></>}\r\n                    {keys}\r\n                    <div id=\"pifagor\"></div>\r\n                    <div id=\"evklid\"></div>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        captions:store.options.captions,\r\n    }\r\n};\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        showHelp:show=>dispatch(showHelp(show))\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(HelpSection);\r\n","import React from 'react';\r\nimport '../Graph.css';\r\nimport '../Buttons.css';\r\nimport {showConfirm, blink} from '../actions/AppActions';\r\nimport { connect } from 'react-redux';\r\nimport {store} from '../store/configureStore'\r\nclass Confirm extends React.Component{\r\n    \r\n    render(){\r\n        return <div className='modalContainer  noselect' onClick={blink}>\r\n                    <div className={\"toolBar\"} onClick={(e)=>{e.stopPropagation()}}>\r\n                      <div>{this.props.captions.messages[this.props.messageKey]}</div>\r\n                        <div className=\"flexCenter\">\r\n                        <button onClick={()=>{\r\n                            store.dispatch(this.props.onOk());\r\n                            this.props.hideConfirm()}}>OK</button>\r\n                        <button onClick={this.props.hideConfirm}>{this.props.captions.buttons.cancel}</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        captions:store.options.captions,\r\n    }\r\n};\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        hideConfirm:()=>dispatch(showConfirm(false))\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Confirm);\r\n","import React from 'react';\r\nimport '../Graph.css';\r\nimport '../Buttons.css';\r\nimport {showAlert, blink} from '../actions/AppActions';\r\nimport { connect } from 'react-redux';\r\n\r\nclass Alert extends React.Component{\r\n    render(){\r\n        return <div className='modalContainer  noselect' onClick={blink}>\r\n                    <div className={\"toolBar\"} onClick={(e)=>{e.stopPropagation()}}>\r\n                        <div>{this.props.captions.messages[this.props.messageKey]}</div>\r\n                        <div className=\"flexCenter\">\r\n                        <button onClick={()=>{\r\n                            this.props.hideAlert()}}>OK</button>\r\n                        </div>    \r\n                    </div>\r\n                </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        captions:store.options.captions,\r\n    }\r\n};\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        hideAlert:()=>dispatch(showAlert(false))\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Alert);\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport Header from './components/Header';\r\nimport {captions} from './locale/eng';\r\nimport MainContainer from './components/MainContainer';\r\nimport HelpSection from './components/HelpSection';\r\nimport {setLanguage} from './actions/AppActions';\r\nimport Confirm from './components/Confirm';\r\nimport Alert from './components/Alert';\r\n\r\nclass Body extends React.Component {\r\n    constructor(props){\r\n        super(props);\r\n        props.setLanguage(captions);\r\n    }\r\n    render() {\r\n        return <div className={\"body\"}>\r\n            {this.props.showConfirm.show?<Confirm messageKey={this.props.showConfirm.messageKey} onOk={this.props.showConfirm.okAction}/>:<></>}\r\n            {this.props.showAlert.show?<Alert messageKey={this.props.showAlert.messageKey}/>:<></>}\r\n            <Header/>\r\n            {this.props.showHelp?<HelpSection/>:<></>}\r\n            <hr/>\r\n            <MainContainer/>\r\n            \r\n           </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = store => {\r\n    return {\r\n            showHelp:store.components.showHelp,\r\n            showConfirm:store.components.showConfirm,\r\n            showAlert:store.components.showAlert,\r\n    }\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setLanguage: captions=>dispatch(setLanguage(captions)),\r\n    }\r\n};\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Body)","import React from 'react';\r\nimport '../Graph.css';\r\n\r\nexport default class Spinner extends React.Component{\r\n\r\n    render(){\r\n        return <div className=\"spinner\"></div>\r\n    }\r\n}","import React from 'react';\r\nimport '../Graph.css';\r\nimport '../Buttons.css';\r\nimport {connect} from 'react-redux';\r\nimport { setToken } from '../actions/UserActions';\r\nimport options from '../config'\r\nimport Spinner from './Spinner';\r\nimport { blink } from '../actions/AppActions';\r\nclass Login extends React.Component{\r\n    constructor(){\r\n        super();\r\n        this.refName=React.createRef();\r\n        this.refPass=React.createRef();\r\n        this.state={correct:true,logging:false,errCode:0,showPass:false,remember:false}\r\n    }\r\n    onRegClick(){\r\n        this.props.history.push('/register')\r\n    }\r\n    onSubmit(e){\r\n        if(this.state.logging)return;\r\n        const name=this.refName.current.value;\r\n        const pass=this.refPass.current.value;\r\n        this.requestLogin(name,pass);\r\n        e.preventDefault();\r\n    }\r\n    cancel(){\r\n        this.props.history.push('/');\r\n    }\r\n    requestLogin(name,password){\r\n        this.setState({correct:true,logging:true});\r\n        fetch(options.devUrl+'/login',\r\n                    {method:'POST',headers: {\"Content-Type\": \"application/json\"},\r\n                    body:JSON.stringify({nameOrEmail:name,password:password})})\r\n            .then(res=>\r\n                res.json())\r\n            .then(res=>{\r\n                this.setState({correct:res.success,logging:false,errCode:res.errCode});\r\n                if(res.success===true) {\r\n                    this.props.setToken(res.token,this.state.remember);\r\n                    this.props.history.push('/');\r\n                }\r\n            })\r\n            .catch(e=>{console.error(e); this.setState({correct:false,logging:false,errCode:3});});\r\n    }\r\n    \r\n    componentWillUnmount(){\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    componentDidMount(){\r\n        window.KEYDOWNHANDLE=false\r\n        this.ref.style.overflow=\"hidden\"\r\n        this.ref.style.width=\"0px\"\r\n        this.ref.style.transition=\"width 200ms linear\"\r\n        setTimeout(()=>{this.ref.style.width=\"200px\"},10)\r\n    }\r\n    render(){\r\n        const cap=this.props.cap;\r\n        const showPass=this.state.showPass?\"text\":\"password\"\r\n        return <div className='modalContainer noselect' onClick={blink}>\r\n                    <div ref={(ref)=>{this.ref=ref}}className={\"toolBar\"} onClick={(e)=>{e.stopPropagation()}}>\r\n                        <div className={\"toolBarHeader\"}>\r\n                            <span className={\"toolBarCaption\"}>{cap.loginForm.title}</span>\r\n                        </div>\r\n                        <form onSubmit={this.onSubmit.bind(this)} className='loginForm'>\r\n                            <input name=\"nameOrEmail\" ref={this.refName} required placeholder={cap.loginForm.name}/>\r\n                            <input name=\"password\" ref={this.refPass} required placeholder={cap.loginForm.password} type={showPass}/>\r\n                            <input type='submit' value='OK'/>\r\n                            <input type='button' value={cap.loginForm.regForm} onClick={this.onRegClick.bind(this)}/>\r\n                            <input type='button' value={cap.buttons.cancel} onClick={this.cancel.bind(this)}/>\r\n                        </form>\r\n                        <div className=\"checkbox\">\r\n                            <input type=\"checkbox\" id=\"show\" onChange={(e)=>{this.setState({showPass:e.target.checked})}}/>\r\n                            <label htmlFor=\"show\">{cap.buttons.showPass}</label>\r\n                        </div>\r\n                        <div className=\"checkbox\">\r\n                            <input type=\"checkbox\" id=\"remember\" onChange={(e)=>{this.setState({remember:e.target.checked})}}/>\r\n                            <label htmlFor=\"remember\">{cap.loginForm.rememberMe}</label>\r\n                        </div>\r\n                    {this.state.correct===false?<span className=\"errorMessage\">{cap.loginForm.messages[this.state.errCode]}</span>:<></>}\r\n                    <div className=\"flexCenter\">{this.state.logging?<Spinner/>:<></>}</div>\r\n                    </div>\r\n                </div>\r\n    }\r\n}\r\nconst mapStateToProps=(store)=>{\r\n    return {\r\n        cap:store.options.captions,\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n        setToken:(token,remember)=>{dispatch(setToken(token,remember))}\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Login);","import React from 'react';\r\nimport '../Graph.css';\r\nimport {connect} from 'react-redux';\r\nimport options from '../config'\r\nimport Spinner from './Spinner';\r\nimport { showAlert, blink } from '../actions/AppActions';\r\n\r\nclass Register extends React.Component{\r\n    constructor(){\r\n        super()\r\n        this.refName=React.createRef()\r\n        this.refEmail=React.createRef()\r\n        this.refPass1=React.createRef()\r\n        this.refPass2=React.createRef()\r\n        this.state={correct:false,message:\"\",fetching:false,showPass:false}\r\n    }\r\n    check(name,email,pass1,pass2){\r\n        const cap=this.props.cap.registerForm;\r\n        let messIndex;\r\n        let state={correct:true}\r\n        if(pass2!==pass1) messIndex=3\r\n        if(pass1.length<6) messIndex=2\r\n        if(!email.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/)) messIndex=4\r\n        if(!name.match(/^[a-zA-Z0-9]+([a-zA-Z0-9](_)[a-zA-Z0-9])*[a-zA-Z0-9]+$/)) messIndex=1\r\n        if(name.length<4) messIndex=0\r\n        if(messIndex!==undefined) state={correct:false,message:cap.inputMessages[messIndex]}\r\n        return state;\r\n    }\r\n    onSubmit(e){\r\n        const cap=this.props.cap.registerForm;\r\n        const name=this.refName.current.value;\r\n        const email=this.refEmail.current.value;\r\n        const pass1=this.refPass1.current.value;\r\n        const pass2=this.refPass2.current.value;\r\n        const state=this.check(name,email,pass1,pass2)\r\n        if(state.correct){\r\n            fetch(options.devUrl+'/register',{method:'POST',headers: {\"Content-Type\": \"application/json\"},\r\n                    body:JSON.stringify({name:name,email:email,password:pass1})})\r\n                    .then(res=>res.json())\r\n                    .then(res=>{\r\n                        if(res.registered) {\r\n                            this.props.showAlert('regSucceed');\r\n                            this.props.history.push('/');\r\n                        }\r\n                        this.setState({correct:res.registered,fetching:false,message:cap.serverMessages[res.errCode]})\r\n                    })\r\n                    .catch(err=>{this.setState({correct:false,fetching:false,message:cap.serverMessages[5]})})\r\n        }\r\n        this.setState({...state,fetching:true});\r\n        e.preventDefault();\r\n    }\r\n    cancel(){\r\n        this.props.history.push('/');\r\n    }\r\n    componentWillUnmount(){\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    componentDidMount(){\r\n        window.KEYDOWNHANDLE=false\r\n        this.ref.style.overflow=\"hidden\"\r\n        this.ref.style.width=\"0px\"\r\n        this.ref.style.transition=\"width 200ms linear\"\r\n        setTimeout(()=>{this.ref.style.width=\"200px\"},10)\r\n    }\r\n    render(){\r\n        const cap=this.props.cap;\r\n        const showPass=this.state.showPass?\"text\":\"password\"\r\n        return <div className='modalContainer noselect' onClick={blink}>\r\n                    <div ref={(ref)=>{this.ref=ref}} className={\"toolBar center\"} onClick={(e)=>{e.stopPropagation()}}>\r\n                        <div className={\"toolBarHeader\"}>\r\n                            <span className={\"toolBarCaption\"}>{cap.registerForm.title}</span>\r\n                        </div>\r\n                        <form onSubmit={this.onSubmit.bind(this)} className='loginForm'>\r\n                            <input required ref={this.refName} placeholder={cap.registerForm.name}/>\r\n                            <input required ref={this.refEmail} placeholder={cap.registerForm.email} type=\"email\"/>\r\n                            <input required ref={this.refPass1} placeholder={cap.registerForm.password} type={showPass}/>\r\n                            <input required ref={this.refPass2} placeholder={cap.registerForm.passwordAgain} type={showPass}/>\r\n                            <input type='submit' value='OK'/>\r\n                            <input type='button' value={cap.buttons.cancel} onClick={this.cancel.bind(this)}/>\r\n                        </form>\r\n                        <div className=\"checkbox\">\r\n                        <input type=\"checkbox\" id=\"show\" onChange={(e)=>{this.setState({showPass:e.target.checked})}}/><label htmlFor=\"show\">{cap.buttons.showPass}</label>\r\n                        </div>\r\n                        <div className=\"flexCenter\">{this.state.fetching?<Spinner/>:<></>}</div>\r\n                        {!this.state.correct?<span className=\"errorMessages\">{this.state.message}</span>:<></>}\r\n                    </div>\r\n                </div>\r\n    }\r\n}\r\nconst mapStateToProps=store=>{\r\n    return {\r\n        cap:store.options.captions\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return {\r\n        showAlert:(messageKey)=>dispatch(showAlert(true,messageKey))\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Register);","import React from 'react';\r\nimport '../Graph.css';\r\nimport {connect} from 'react-redux';\r\nimport options from '../config';\r\nimport Spinner from './Spinner';\r\n\r\nclass Activation extends React.Component{\r\n    constructor(){\r\n        super();\r\n        this.state={activated:true,logging:false,errCode:0,message:\"\"}\r\n    }\r\n    onLoginClick(){\r\n        this.props.history.push('/login')\r\n    }\r\n    cancel(){\r\n        this.props.history.push('/');\r\n    }\r\n    activate(id){\r\n        this.setState({activated:false,logging:true});\r\n        fetch(options.devUrl+'/activate',\r\n                    {method:'POST',headers: {\"Content-Type\": \"application/json\"},\r\n                    body:JSON.stringify({id:id})})\r\n            .then(res=>res.json())\r\n            .then(res=>{\r\n                this.setState({activated:res.success,logging:false,message:this.props.cap.activation.messages[res.errCode]});\r\n                if(res.success===true) {\r\n                    //this.props.setToken(res.token);\r\n                    //this.props.history.push('/');\r\n                }\r\n            })\r\n            .catch(e=>{console.error(e); this.setState({activated:false,logging:false,errCode:5});});\r\n    }\r\n    componentWillUnmount(){\r\n        window.KEYDOWNHANDLE=true\r\n    }\r\n    componentDidMount(){\r\n        this.activate(this.props.match.params.id)\r\n        window.KEYDOWNHANDLE=false\r\n    }\r\n    render(){\r\n        const cap=this.props.cap;\r\n        //const text=this.cap.activation.messages[this.state.errCode]\r\n        const text=this.state.message\r\n        return <div className='modalContainer noselect'>\r\n                    <div className={\"toolBar\"}>\r\n                        <div className={\"toolBarHeader\"}>\r\n                            <span className={\"toolBarCaption\"}>{cap.activation.title}</span>\r\n                        </div>\r\n                        \r\n                        {this.state.logging?<Spinner/>: \r\n                        <div>   \r\n                         <div>{text}</div>\r\n                         <input type='button' value={cap.loginForm.title} onClick={this.onLoginClick.bind(this)}/>\r\n                         <input type='button' value={cap.buttons.cancel} onClick={this.cancel.bind(this)}/>\r\n                         </div>}\r\n                    </div>\r\n                </div>\r\n    }\r\n}\r\nconst mapStateToProps=(store)=>{\r\n    return {\r\n        cap:store.options.captions,\r\n    }\r\n}\r\nconst mapDispatchToProps=dispatch=>{\r\n    return{\r\n    }\r\n}\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Activation);","import React from 'react';\r\nimport {BrowserRouter,Route} from 'react-router-dom';\r\nimport {Provider} from 'react-redux';\r\nimport {store} from './store/configureStore';\r\nimport Body from './Body';\r\nimport Login from './components/Login'\r\nimport Register from './components/Register';\r\nimport Activation from './components/Activation';\r\nexport default class GeomEditor extends React.Component {\r\n    render() {\r\n        return <Provider store={store}>\r\n            <BrowserRouter>\r\n                <Route path='/' component={Body}/>\r\n                <Route exact path='/activate' component={Activation}/>\r\n                <Route path='/activate/:id' component={Activation}/>\r\n                <Route path='/login' component={Login}/>\r\n                <Route path='/register' component={Register}/>\r\n            </BrowserRouter>\r\n        </Provider>\r\n\r\n    }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport GeomEditor from './GeomEditor';\r\n\r\nReactDOM.render(\r\n    <GeomEditor/>\r\n    ,\r\n    document.getElementById('root'));\r\n"],"sourceRoot":""}